(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{9361:function(e,t){"use strict";t.Z=function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}},9742:function(e,t){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,s=u(e),a=s[0],o=s[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,a,o)),l=0,d=o>0?a-4:a;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===o&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[l++]=255&t);1===o&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],a=16383,o=0,u=n-i;o<u;o+=a)s.push(c(e,o,o+a>u?u:o+a));1===i?(t=e[n-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return s.join("")};for(var r=[],n=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,o=s.length;a<o;++a)r[a]=s[a],n[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var i,s,a=[],o=t;o<n;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(r[(s=i)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},8764:function(e,t,r){"use strict";var n=r(9742),i=r(645),s="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.lW=u,t.h2=50;var a=2147483647;function o(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return c(e,t,r)}function c(e,t,r){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|m(e,t),n=o(r),i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(M(e,Uint8Array)){var t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(M(e,ArrayBuffer)||e&&M(e.buffer,ArrayBuffer))return h(e,t,r);if("undefined"!==typeof SharedArrayBuffer&&(M(e,SharedArrayBuffer)||e&&M(e.buffer,SharedArrayBuffer)))return h(e,t,r);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);var i=function(e){if(u.isBuffer(e)){var t=0|p(e.length),r=o(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!==typeof e.length||V(e.length)?o(0):f(e);if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return l(e),o(e<0?0:0|p(e))}function f(e){for(var t=e.length<0?0:0|p(e.length),r=o(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function h(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function p(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function m(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||M(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return F(e).length;default:if(i)return n?-1:Z(e).length;t=(""+t).toLowerCase(),i=!0}}function v(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return A(this,t,r);case"latin1":case"binary":return C(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){if(0===e.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),V(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:x(e,t,r,n,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):x(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function x(e,t,r,n,i){var s,a=1,o=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,o/=2,u/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(s=r;s<o;s++)if(c(e,s)===c(t,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===u)return l*a}else-1!==l&&(s-=s-l),l=-1}else for(r+u>o&&(r=o-u),s=r;s>=0;s--){for(var d=!0,f=0;f<u;f++)if(c(e,s+f)!==c(t,f)){d=!1;break}if(d)return s}return-1}function b(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=t.length;n>s/2&&(n=s/2);for(var a=0;a<n;++a){var o=parseInt(t.substr(2*a,2),16);if(V(o))return a;e[r+a]=o}return a}function _(e,t,r,n){return D(Z(t,e.length-r),e,r,n)}function w(e,t,r,n){return D(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function j(e,t,r,n){return D(F(t),e,r,n)}function E(e,t,r,n){return D(function(e,t){for(var r,n,i,s=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,i=r%256,s.push(i),s.push(n);return s}(t,e.length-r),e,r,n)}function k(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s,a,o,u,c=e[i],l=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=r)switch(d){case 1:c<128&&(l=c);break;case 2:128===(192&(s=e[i+1]))&&(u=(31&c)<<6|63&s)>127&&(l=u);break;case 3:s=e[i+1],a=e[i+2],128===(192&s)&&128===(192&a)&&(u=(15&c)<<12|(63&s)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:s=e[i+1],a=e[i+2],o=e[i+3],128===(192&s)&&128===(192&a)&&128===(192&o)&&(u=(15&c)<<18|(63&s)<<12|(63&a)<<6|63&o)>65535&&u<1114112&&(l=u)}null===l?(l=65533,d=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=d}return function(e){var t=e.length;if(t<=N)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=N));return r}(n)}u.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(r){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?o(e):void 0!==t?"string"===typeof r?o(e).fill(t,r):o(e).fill(t):o(e)}(e,t,r)},u.allocUnsafe=function(e){return d(e)},u.allocUnsafeSlow=function(e){return d(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(M(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),M(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(M(s,Uint8Array))i+s.length>n.length?u.from(s).copy(n,i):Uint8Array.prototype.set.call(n,s,i);else{if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i)}i+=s.length}return n},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):v.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.h2;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(u.prototype[s]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(M(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),o=Math.min(s,a),c=this.slice(n,i),l=e.slice(t,r),d=0;d<o;++d)if(c[d]!==l[d]){s=c[d],a=l[d];break}return s<a?-1:a<s?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":case"latin1":case"binary":return w(this,e,t,r);case"base64":return j(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var N=4096;function A(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function C(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function I(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=t;s<r;++s)i+=W[e[s]];return i}function T(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function U(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,r,n,i,s){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function P(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function O(e,t,r,n,s){return t=+t,r>>>=0,s||P(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function L(e,t,r,n,s){return t=+t,r>>>=0,s||P(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||U(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||U(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||U(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||U(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||U(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||U(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||U(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||U(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||U(e,t,this.length);for(var n=t,i=1,s=this[e+--n];n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return e>>>=0,t||U(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||U(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||U(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||U(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||U(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return e>>>=0,t||U(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||U(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||U(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||U(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||R(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||R(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);R(this,e,t,r,i-1,-i)}var s=0,a=1,o=0;for(this[t]=255&e;++s<r&&(a*=256);)e<0&&0===o&&0!==this[t+s-1]&&(o=1),this[t+s]=(e/a>>0)-o&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);R(this,e,t,r,i-1,-i)}var s=r-1,a=1,o=0;for(this[t+s]=255&e;--s>=0&&(a*=256);)e<0&&0===o&&0!==this[t+s+1]&&(o=1),this[t+s]=(e/a>>0)-o&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeFloatLE=function(e,t,r){return O(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return O(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return L(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return L(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var i=e.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(e=i)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(s=t;s<r;++s)this[s]=e;else{var a=u.isBuffer(e)?e:u.from(e,n),o=a.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=a[s%o]}return this};var B=/[^+/0-9A-Za-z-_]/g;function Z(e,t){var r;t=t||1/0;for(var n=e.length,i=null,s=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function F(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(B,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function D(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function M(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function V(e){return e!==e}var W=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()},6010:function(e,t,r){"use strict";function n(e){var t,r,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=n(e[t]))&&(i&&(i+=" "),i+=r);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}t.Z=function(){for(var e,t,r=0,i="";r<arguments.length;)(e=arguments[r++])&&(t=n(e))&&(i&&(i+=" "),i+=t);return i}},645:function(e,t){t.read=function(e,t,r,n,i){var s,a,o=8*i-n-1,u=(1<<o)-1,c=u>>1,l=-7,d=r?i-1:0,f=r?-1:1,h=e[t+d];for(d+=f,s=h&(1<<-l)-1,h>>=-l,l+=o;l>0;s=256*s+e[t+d],d+=f,l-=8);for(a=s&(1<<-l)-1,s>>=-l,l+=n;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===s)s=1-c;else{if(s===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),s-=c}return(h?-1:1)*a*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var a,o,u,c=8*s-i-1,l=(1<<c)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:s-1,p=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(a++,u/=2),a+d>=l?(o=0,a=l):a+d>=1?(o=(t*u-1)*Math.pow(2,i),a+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[r+h]=255&o,h+=p,o/=256,i-=8);for(a=a<<i|o,c+=i;c>0;e[r+h]=255&a,h+=p,a/=256,c-=8);e[r+h-p]|=128*m}},3454:function(e,t,r){"use strict";var n,i;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"===typeof(null==(i=r.g.process)?void 0:i.env)?r.g.process:r(7663)},6840:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return r(8449)}])},2708:function(e,t,r){"use strict";var n=r(5893);t.Z=function(e){var t=e.width,r=void 0===t?"60px":t,i=e.height,s=void 0===i?"60px":i,a=e.short;return void 0===a||a?(0,n.jsx)("img",{width:r,height:s,src:"/writefull-logo.png"}):(0,n.jsx)("img",{width:r,height:s,src:"/writefull-logo-2x.png"})}},444:function(e,t,r){"use strict";r.d(t,{Z:function(){return m}});var n=r(4924),i=r(6042),s=r(9396),a=r(9534),o=r(5893),u=r(3967),c=r.n(u),l=r(7294);var d=function(e){return function(t){e.forEach((function(e){"function"===typeof e?e(t):null!=e&&(e.current=t)}))}},f=r(5609),h=r.n(f),p=r(1016),m=(0,l.forwardRef)((function(e,t){var r,u=e.className,f=e.variant,m=void 0===f?"flat":f,v=e.children,g=e.active,y=e.width,x=e.loading,b=void 0!==x&&x,_=e.disabled,w=void 0!==_&&_,j=e.style,E=void 0===j?{}:j,k=(e.special,e.tooltip),S=void 0===k?"":k,N=e.Component,A=void 0===N?"button":N,C=(0,a.Z)(e,["className","variant","children","active","width","loading","disabled","style","special","tooltip","Component"]),I=(0,l.useRef)(null),T=c()(h().root,(r={},(0,n.Z)(r,h().slim,"slim"===m),(0,n.Z)(r,h().loading,b),(0,n.Z)(r,h().disabled,w),r),u);return(0,o.jsxs)(A,(0,s.Z)((0,i.Z)({"aria-pressed":g,"data-variant":m,ref:d([I,t]),className:T,disabled:w,title:S,style:(0,i.Z)({width:y},E)},C),{children:[v,b&&(0,o.jsx)("i",{className:"pl-2 m-0 flex align-middle",children:(0,o.jsx)(p.Z,{})})]}))}))},1016:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(5893),i=r(6732),s=r.n(i),a=function(){return(0,n.jsxs)("span",{className:s().root,children:[(0,n.jsx)("span",{}),(0,n.jsx)("span",{}),(0,n.jsx)("span",{})]})}},8672:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(5893);r(7294);function i(e){var t,r=e.size,i={xs:"w-2 h-2",sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-16 h-16"},s=null!==(t=i[void 0===r?"md":r])&&void 0!==t?t:i.md;return(0,n.jsxs)("div",{role:"status",children:[(0,n.jsxs)("svg",{className:"inline text-slate-100 animate-spin fill-slate-700 ".concat(s),viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),(0,n.jsx)("span",{className:"sr-only",children:"Loading..."})]})}},4884:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(5893),i=(r(7294),r(3967)),s=r.n(i),a=r(2584),o=r.n(a),u=function(e){var t=e.className,r=void 0===t?"":t,i=e.type,a=void 0===i?"default":i,u=e.style,c=void 0===u?"half-rounded":u,l=e.children,d=s()(o().root,r,{"bg-gold":"primary"===a},{"bg-gray-800 text-white":"default"===a},{"rounded-tl-lg rounded-br-lg":"half-rounded"===c},{"rounded-lg shadow-xl":"rounded-shadow"===c});return(0,n.jsx)("div",{className:d,children:l})}},4245:function(e,t,r){"use strict";var n=r(7568),i=r(6042),s=r(7582),a=r(7294),o=r(3996),u=r(3646),c=r(949),l=r(8582),d=r(1163);t.Z=function(e){var t=e.priceLoading,r=(0,d.useRouter)(),f=(0,o.aF)(),h=f.session,p=f.subscription,m=(0,u.Y)().trackExperiment,v=(0,a.useCallback)(function(){var e=(0,n.Z)((function(e,n,a){var o,u,d,f,v,g,y,x,b,_,w,j,E,k;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:if(!r.isReady)return[2];if(d=1===e.interval_count?"monthly":3===e.interval_count?"quarterly":"yearly",m("plan-purchase",d),t(e.id),!(null===h||void 0===h?void 0:h.idToken))return f=r.query,v=f.code,g=f.origin,y="wfo"===g,[2,r.push({pathname:"/authenticate",query:{price_id:e.id,code:v,signInWithOverleaf:y?"enabled":void 0}})];if(!0!==(null===(o=h.user)||void 0===o?void 0:o.emailVerified))return[2,r.push({pathname:"/account",query:(0,i.Z)({emailVerification:"required"},r.query)})];if("active"===(null===p||void 0===p?void 0:p.status))return[2,r.push("/account")];if(null===h||void 0===h||null===(u=h.user)||void 0===u?void 0:u.premium)return[2,r.push("/account")];x=r.query.code,b=x,s.label=1;case 1:return s.trys.push([1,4,5,6]),[4,(0,c.qC)({url:"/api/create-checkout-session",data:{price:e,code:b,successUrl:n,cancelUrl:a},token:h.idToken})];case 2:return _=s.sent(),w=_.sessionId,(j=_.error)&&alert(j),[4,(0,l.d)()];case 3:return null===(E=s.sent())||void 0===E||E.redirectToCheckout({sessionId:w}),[3,6];case 4:return k=s.sent(),[2,alert(null===k||void 0===k?void 0:k.message)];case 5:return t(void 0),[7];case 6:return[2]}}))}));return function(t,r,n){return e.apply(this,arguments)}}(),[r.isReady,null===h||void 0===h?void 0:h.idToken,null===p||void 0===p?void 0:p.status]);return(0,a.useEffect)((function(){if(r.isReady){var e=r.query,t=e.overleafUserId,n=e.code,i=e.price_id;if(t){var s="/api/oauth2?redirect=plans";return n&&(s+="&code=".concat(n)),void r.push(s)}i&&v({id:i})}}),[r.isReady]),{handleCheckout:v}}},3646:function(e,t,r){"use strict";r.d(t,{Y:function(){return s}});var n=r(7294),i=(0,n.createContext)(void 0),s=function(){var e=(0,n.useContext)(i);if(void 0===e)throw new Error("useExperimentContext must be used within a ExperimentProvider");return e};t.Z=i},4624:function(e,t,r){"use strict";var n=r(7568),i=r(7582),s=r(7294),a=r(7543);t.Z=function(e){var t=e.isRouterReady,r=e.discountCode,o=void 0===r?void 0:r,u=e.onlyTier1Prices,c=void 0!==u&&u,l=function(e){return!!e},d=(0,s.useState)(),f=d[0],h=d[1],p=(0,s.useState)(null),m=p[0],v=p[1],g=(0,s.useState)(null),y=g[0],x=g[1];return(0,s.useEffect)((function(){if(t){var e=function(){var e=(0,n.Z)((function(){var e,t,r,n,s,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,(0,a.U2)("https://nlp.writefull.ai/get-ip-info")];case 1:return e=i.sent(),t=e.result,r=t.country.isoCode,n="?countryCode=".concat(r),o&&(n+="&coupon=".concat(o)),c&&(n+="&onlyTier1Prices=true"),[4,(0,a.U2)("api/get-active-products".concat(n))];case 2:return(s=i.sent().products)&&(h(s),x(s[0].prices[0].currency),u=s.map((function(e){return e.prices?e.prices[0]:void 0})).filter(l).sort((function(e,t){return e.unit_discounted_amount-t.unit_discounted_amount}))[0],v(u)),[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}}),[t,o]),{products:f,minimumPrice:m,currency:y}}},1210:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDomainLocale=function(e,t,r,n){return!1};("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&"undefined"===typeof t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8045:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9361).Z,i=r(4941).Z,s=r(3929).Z;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.src,r=e.sizes,o=e.unoptimized,u=void 0!==o&&o,m=e.priority,v=void 0!==m&&m,b=e.loading,k=e.lazyRoot,N=void 0===k?null:k,A=e.lazyBoundary,C=e.className,I=e.quality,T=e.width,U=e.height,R=e.style,P=e.objectFit,O=e.objectPosition,L=e.onLoadingComplete,B=e.placeholder,Z=void 0===B?"empty":B,F=e.blurDataURL,D=c(e,["src","sizes","unoptimized","priority","loading","lazyRoot","lazyBoundary","className","quality","width","height","style","objectFit","objectPosition","onLoadingComplete","placeholder","blurDataURL"]),M=l.useContext(p.ImageConfigContext),V=l.useMemo((function(){var e=g||M||f.imageConfigDefault,t=s(e.deviceSizes).concat(s(e.imageSizes)).sort((function(e,t){return e-t})),r=e.deviceSizes.sort((function(e,t){return e-t}));return a({},e,{allSizes:t,deviceSizes:r})}),[M]),W=D,q=r?"responsive":"intrinsic";"layout"in W&&(W.layout&&(q=W.layout),delete W.layout);var Y=E;if("loader"in W){if(W.loader){var z=W.loader;Y=function(e){e.config;var t=c(e,["config"]);return z(t)}}delete W.loader}var G="";if(function(e){return"object"===typeof e&&(_(e)||function(e){return void 0!==e.src}(e))}(t)){var K=_(t)?t.default:t;if(!K.src)throw new Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ".concat(JSON.stringify(K)));if(F=F||K.blurDataURL,G=K.src,(!q||"fill"!==q)&&(U=U||K.height,T=T||K.width,!K.height||!K.width))throw new Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ".concat(JSON.stringify(K)))}var H=!v&&("lazy"===b||"undefined"===typeof b);((t="string"===typeof t?t:G).startsWith("data:")||t.startsWith("blob:"))&&(u=!0,H=!1);y.has(t)&&(H=!1);V.unoptimized&&(u=!0);var X,J=i(l.useState(!1),2),Q=J[0],$=J[1],ee=i(h.useIntersection({rootRef:N,rootMargin:A||"200px",disabled:!H}),3),te=ee[0],re=ee[1],ne=ee[2],ie=!H||re,se={boxSizing:"border-box",display:"block",overflow:"hidden",width:"initial",height:"initial",background:"none",opacity:1,border:0,margin:0,padding:0},ae={boxSizing:"border-box",display:"block",width:"initial",height:"initial",background:"none",opacity:1,border:0,margin:0,padding:0},oe=!1,ue={position:"absolute",top:0,left:0,bottom:0,right:0,boxSizing:"border-box",padding:0,border:"none",margin:"auto",display:"block",width:0,height:0,minWidth:"100%",maxWidth:"100%",minHeight:"100%",maxHeight:"100%",objectFit:P,objectPosition:O},ce=j(T),le=j(U),de=j(I);0;var fe=Object.assign({},R,ue),he="blur"!==Z||Q?{}:{backgroundSize:P||"cover",backgroundPosition:O||"0% 0%",filter:"blur(20px)",backgroundImage:'url("'.concat(F,'")')};if("fill"===q)se.display="block",se.position="absolute",se.top=0,se.left=0,se.bottom=0,se.right=0;else if("undefined"!==typeof ce&&"undefined"!==typeof le){var pe=le/ce,me=isNaN(pe)?"100%":"".concat(100*pe,"%");"responsive"===q?(se.display="block",se.position="relative",oe=!0,ae.paddingTop=me):"intrinsic"===q?(se.display="inline-block",se.position="relative",se.maxWidth="100%",oe=!0,ae.maxWidth="100%",X="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27".concat(ce,"%27%20height=%27").concat(le,"%27/%3e")):"fixed"===q&&(se.display="inline-block",se.position="relative",se.width=ce,se.height=le)}else 0;var ve={src:x,srcSet:void 0,sizes:void 0};ie&&(ve=w({config:V,src:t,unoptimized:u,layout:q,width:ce,quality:de,sizes:r,loader:Y}));var ge=t;0;var ye;0;var xe=(n(ye={},"imagesrcset",ve.srcSet),n(ye,"imagesizes",ve.sizes),n(ye,"crossOrigin",W.crossOrigin),ye),be=l.default.useLayoutEffect,_e=l.useRef(L),we=l.useRef(t);l.useEffect((function(){_e.current=L}),[L]),be((function(){we.current!==t&&(ne(),we.current=t)}),[ne,t]);var je=a({isLazy:H,imgAttributes:ve,heightInt:le,widthInt:ce,qualityInt:de,layout:q,className:C,imgStyle:fe,blurStyle:he,loading:b,config:V,unoptimized:u,placeholder:Z,loader:Y,srcString:ge,onLoadingCompleteRef:_e,setBlurComplete:$,setIntersection:te,isVisible:ie,noscriptSizes:r},W);return l.default.createElement(l.default.Fragment,null,l.default.createElement("span",{style:se},oe?l.default.createElement("span",{style:ae},X?l.default.createElement("img",{style:{display:"block",maxWidth:"100%",width:"initial",height:"initial",background:"none",opacity:1,border:0,margin:0,padding:0},alt:"","aria-hidden":!0,src:X}):null):null,l.default.createElement(S,Object.assign({},je))),v?l.default.createElement(d.default,null,l.default.createElement("link",Object.assign({key:"__nimg-"+ve.src+ve.srcSet+ve.sizes,rel:"preload",as:"image",href:ve.srcSet?void 0:ve.src},xe))):null)};var a=r(6495).Z,o=r(2648).Z,u=r(1598).Z,c=r(7273).Z,l=u(r(7294)),d=o(r(5443)),f=r(9309),h=r(7190),p=r(9977),m=(r(3794),r(2392));function v(e){return"/"===e[0]?e.slice(1):e}var g={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1},y=new Set,x=(new Map,"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");var b=new Map([["default",function(e){var t=e.config,r=e.src,n=e.width,i=e.quality;return r.endsWith(".svg")&&!t.dangerouslyAllowSVG?r:"".concat(m.normalizePathTrailingSlash(t.path),"?url=").concat(encodeURIComponent(r),"&w=").concat(n,"&q=").concat(i||75)}],["imgix",function(e){var t=e.config,r=e.src,n=e.width,i=e.quality,s=new URL("".concat(t.path).concat(v(r))),a=s.searchParams;return a.set("auto",a.getAll("auto").join(",")||"format"),a.set("fit",a.get("fit")||"max"),a.set("w",a.get("w")||n.toString()),i&&a.set("q",i.toString()),s.href}],["cloudinary",function(e){var t=e.config,r=e.src,n=["f_auto","c_limit","w_"+e.width,"q_"+(e.quality||"auto")].join(",")+"/";return"".concat(t.path).concat(n).concat(v(r))}],["akamai",function(e){var t=e.config,r=e.src,n=e.width;return"".concat(t.path).concat(v(r),"?imwidth=").concat(n)}],["custom",function(e){var t=e.src;throw new Error('Image with src "'.concat(t,'" is missing "loader" prop.')+"\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader")}]]);function _(e){return void 0!==e.default}function w(e){var t=e.config,r=e.src,n=e.unoptimized,i=e.layout,a=e.width,o=e.quality,u=e.sizes,c=e.loader;if(n)return{src:r,srcSet:void 0,sizes:void 0};var l=function(e,t,r,n){var i=e.deviceSizes,a=e.allSizes;if(n&&("fill"===r||"responsive"===r)){for(var o,u=/(^|\s)(1?\d?\d)vw/g,c=[];o=u.exec(n);o)c.push(parseInt(o[2]));if(c.length){var l,d=.01*(l=Math).min.apply(l,s(c));return{widths:a.filter((function(e){return e>=i[0]*d})),kind:"w"}}return{widths:a,kind:"w"}}return"number"!==typeof t||"fill"===r||"responsive"===r?{widths:i,kind:"w"}:{widths:s(new Set([t,2*t].map((function(e){return a.find((function(t){return t>=e}))||a[a.length-1]})))),kind:"x"}}(t,a,i,u),d=l.widths,f=l.kind,h=d.length-1;return{sizes:u||"w"!==f?u:"100vw",srcSet:d.map((function(e,n){return"".concat(c({config:t,src:r,quality:o,width:e})," ").concat("w"===f?e:n+1).concat(f)})).join(", "),src:c({config:t,src:r,quality:o,width:d[h]})}}function j(e){return"number"===typeof e?e:"string"===typeof e?parseInt(e,10):void 0}function E(e){var t,r=(null==(t=e.config)?void 0:t.loader)||"default",n=b.get(r);if(n)return n(e);throw new Error('Unknown "loader" found in "next.config.js". Expected: '.concat(f.VALID_LOADERS.join(", "),". Received: ").concat(r))}function k(e,t,r,n,i,s){e&&e.src!==x&&e["data-loaded-src"]!==t&&(e["data-loaded-src"]=t,("decode"in e?e.decode():Promise.resolve()).catch((function(){})).then((function(){if(e.parentNode&&(y.add(t),"blur"===n&&s(!0),null==i?void 0:i.current)){var r=e.naturalWidth,a=e.naturalHeight;i.current({naturalWidth:r,naturalHeight:a})}})))}var S=function(e){var t=e.imgAttributes,r=(e.heightInt,e.widthInt),n=e.qualityInt,i=e.layout,s=e.className,o=e.imgStyle,u=e.blurStyle,d=e.isLazy,f=e.placeholder,h=e.loading,p=e.srcString,m=e.config,v=e.unoptimized,g=e.loader,y=e.onLoadingCompleteRef,x=e.setBlurComplete,b=e.setIntersection,_=e.onLoad,j=e.onError,E=(e.isVisible,e.noscriptSizes),S=c(e,["imgAttributes","heightInt","widthInt","qualityInt","layout","className","imgStyle","blurStyle","isLazy","placeholder","loading","srcString","config","unoptimized","loader","onLoadingCompleteRef","setBlurComplete","setIntersection","onLoad","onError","isVisible","noscriptSizes"]);return h=d?"lazy":h,l.default.createElement(l.default.Fragment,null,l.default.createElement("img",Object.assign({},S,t,{decoding:"async","data-nimg":i,className:s,style:a({},o,u),ref:l.useCallback((function(e){b(e),(null==e?void 0:e.complete)&&k(e,p,0,f,y,x)}),[b,p,i,f,y,x]),onLoad:function(e){k(e.currentTarget,p,0,f,y,x),_&&_(e)},onError:function(e){"blur"===f&&x(!0),j&&j(e)}})),(d||"blur"===f)&&l.default.createElement("noscript",null,l.default.createElement("img",Object.assign({},S,w({config:m,src:p,unoptimized:v,layout:i,width:r,quality:n,sizes:E,loader:g}),{decoding:"async","data-nimg":i,style:o,className:s,loading:h}))))};("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&"undefined"===typeof t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8418:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4941).Z;r(5753).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(2648).Z,s=r(7273).Z,a=i(r(7294)),o=r(6273),u=r(2725),c=r(3462),l=r(1018),d=r(7190),f=r(1210),h=r(8684),p={};function m(e,t,r,n){if(e&&o.isLocalURL(t)){Promise.resolve(e.prefetch(t,r,n)).catch((function(e){0}));var i=n&&"undefined"!==typeof n.locale?n.locale:e&&e.locale;p[t+"%"+r+(i?"%"+i:"")]=!0}}var v=a.default.forwardRef((function(e,t){var r,i=e.href,v=e.as,g=e.children,y=e.prefetch,x=e.passHref,b=e.replace,_=e.shallow,w=e.scroll,j=e.locale,E=e.onClick,k=e.onMouseEnter,S=e.onTouchStart,N=e.legacyBehavior,A=void 0===N?!0!==Boolean(!1):N,C=s(e,["href","as","children","prefetch","passHref","replace","shallow","scroll","locale","onClick","onMouseEnter","onTouchStart","legacyBehavior"]);r=g,!A||"string"!==typeof r&&"number"!==typeof r||(r=a.default.createElement("a",null,r));var I=!1!==y,T=a.default.useContext(c.RouterContext),U=a.default.useContext(l.AppRouterContext);U&&(T=U);var R,P=a.default.useMemo((function(){var e=n(o.resolveHref(T,i,!0),2),t=e[0],r=e[1];return{href:t,as:v?o.resolveHref(T,v):r||t}}),[T,i,v]),O=P.href,L=P.as,B=a.default.useRef(O),Z=a.default.useRef(L);A&&(R=a.default.Children.only(r));var F=A?R&&"object"===typeof R&&R.ref:t,D=n(d.useIntersection({rootMargin:"200px"}),3),M=D[0],V=D[1],W=D[2],q=a.default.useCallback((function(e){Z.current===L&&B.current===O||(W(),Z.current=L,B.current=O),M(e),F&&("function"===typeof F?F(e):"object"===typeof F&&(F.current=e))}),[L,F,O,W,M]);a.default.useEffect((function(){var e=V&&I&&o.isLocalURL(O),t="undefined"!==typeof j?j:T&&T.locale,r=p[O+"%"+L+(t?"%"+t:"")];e&&!r&&m(T,O,L,{locale:t})}),[L,O,V,j,I,T]);var Y={ref:q,onClick:function(e){A||"function"!==typeof E||E(e),A&&R.props&&"function"===typeof R.props.onClick&&R.props.onClick(e),e.defaultPrevented||function(e,t,r,n,i,s,u,c,l,d){if("A"!==e.currentTarget.nodeName.toUpperCase()||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&o.isLocalURL(r)){e.preventDefault();var f=function(){"beforePopState"in t?t[i?"replace":"push"](r,n,{shallow:s,locale:c,scroll:u}):t[i?"replace":"push"](r,{forceOptimisticNavigation:!d})};l?a.default.startTransition(f):f()}}(e,T,O,L,b,_,w,j,Boolean(U),I)},onMouseEnter:function(e){A||"function"!==typeof k||k(e),A&&R.props&&"function"===typeof R.props.onMouseEnter&&R.props.onMouseEnter(e),!I&&U||o.isLocalURL(O)&&m(T,O,L,{priority:!0})},onTouchStart:function(e){A||"function"!==typeof S||S(e),A&&R.props&&"function"===typeof R.props.onTouchStart&&R.props.onTouchStart(e),!I&&U||o.isLocalURL(O)&&m(T,O,L,{priority:!0})}};if(!A||x||"a"===R.type&&!("href"in R.props)){var z="undefined"!==typeof j?j:T&&T.locale,G=T&&T.isLocaleDomain&&f.getDomainLocale(L,z,T.locales,T.domainLocales);Y.href=G||h.addBasePath(u.addLocale(L,z,T&&T.defaultLocale))}return A?a.default.cloneElement(R,Y):a.default.createElement("a",Object.assign({},C,Y),r)}));t.default=v,("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&"undefined"===typeof t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7190:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4941).Z;Object.defineProperty(t,"__esModule",{value:!0}),t.useIntersection=function(e){var t=e.rootRef,r=e.rootMargin,c=e.disabled||!a,l=n(i.useState(!1),2),d=l[0],f=l[1],h=n(i.useState(null),2),p=h[0],m=h[1];i.useEffect((function(){if(a){if(c||d)return;if(p&&p.tagName){var e=function(e,t,r){var n=function(e){var t,r={root:e.root||null,margin:e.rootMargin||""},n=u.find((function(e){return e.root===r.root&&e.margin===r.margin}));if(n&&(t=o.get(n)))return t;var i=new Map,s=new IntersectionObserver((function(e){e.forEach((function(e){var t=i.get(e.target),r=e.isIntersecting||e.intersectionRatio>0;t&&r&&t(r)}))}),e);return t={id:r,observer:s,elements:i},u.push(r),o.set(r,t),t}(r),i=n.id,s=n.observer,a=n.elements;return a.set(e,t),s.observe(e),function(){if(a.delete(e),s.unobserve(e),0===a.size){s.disconnect(),o.delete(i);var t=u.findIndex((function(e){return e.root===i.root&&e.margin===i.margin}));t>-1&&u.splice(t,1)}}}(p,(function(e){return e&&f(e)}),{root:null==t?void 0:t.current,rootMargin:r});return e}}else if(!d){var n=s.requestIdleCallback((function(){return f(!0)}));return function(){return s.cancelIdleCallback(n)}}}),[p,c,r,t,d]);var v=i.useCallback((function(){f(!1)}),[]);return[m,d,v]};var i=r(7294),s=r(9311),a="function"===typeof IntersectionObserver,o=new Map,u=[];("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&"undefined"===typeof t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1018:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TemplateContext=t.GlobalLayoutRouterContext=t.LayoutRouterContext=t.AppRouterContext=void 0;var n=(0,r(2648).Z)(r(7294)),i=n.default.createContext(null);t.AppRouterContext=i;var s=n.default.createContext(null);t.LayoutRouterContext=s;var a=n.default.createContext(null);t.GlobalLayoutRouterContext=a;var o=n.default.createContext(null);t.TemplateContext=o},638:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6856).Z;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=a.default,s=(null==t?void 0:t.suspense)?{}:{loading:function(e){e.error,e.isLoading;return e.pastDelay,null}};n(e,Promise)?s.loader=function(){return e}:"function"===typeof e?s.loader=e:"object"===typeof e&&(s=i({},s,e));if((s=i({},s,t)).suspense)throw new Error("Invalid suspense option usage in next/dynamic. Read more: https://nextjs.org/docs/messages/invalid-dynamic-suspense");s.suspense&&(delete s.ssr,delete s.loading);s.loadableGenerated&&delete(s=i({},s,s.loadableGenerated)).loadableGenerated;if("boolean"===typeof s.ssr&&!s.suspense){if(!s.ssr)return delete s.ssr,o(r,s);delete s.ssr}return r(s)},t.noSSR=o;var i=r(6495).Z,s=r(2648).Z,a=(s(r(7294)),s(r(4302)));function o(e,t){return delete t.webpack,delete t.modules,e(t)}("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&"undefined"===typeof t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6319:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadableContext=void 0;var n=(0,r(2648).Z)(r(7294)).default.createContext(null);t.LoadableContext=n},4302:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9658).Z,i=r(7222).Z;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(6495).Z,a=(0,r(2648).Z)(r(7294)),o=r(6319),u=r(1688).useSyncExternalStore,c=[],l=[],d=!1;function f(e){var t=e(),r={loading:!0,loaded:null,error:null};return r.promise=t.then((function(e){return r.loading=!1,r.loaded=e,e})).catch((function(e){throw r.loading=!1,r.error=e,e})),r}var h=function(){function e(t,r){n(this,e),this._loadFn=t,this._opts=r,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}return i(e,[{key:"promise",value:function(){return this._res.promise}},{key:"retry",value:function(){var e=this;this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};var t=this._res,r=this._opts;t.loading&&("number"===typeof r.delay&&(0===r.delay?this._state.pastDelay=!0:this._delay=setTimeout((function(){e._update({pastDelay:!0})}),r.delay)),"number"===typeof r.timeout&&(this._timeout=setTimeout((function(){e._update({timedOut:!0})}),r.timeout))),this._res.promise.then((function(){e._update({}),e._clearTimeouts()})).catch((function(t){e._update({}),e._clearTimeouts()})),this._update({})}},{key:"_update",value:function(e){this._state=s({},this._state,{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading},e),this._callbacks.forEach((function(e){return e()}))}},{key:"_clearTimeouts",value:function(){clearTimeout(this._delay),clearTimeout(this._timeout)}},{key:"getCurrentValue",value:function(){return this._state}},{key:"subscribe",value:function(e){var t=this;return this._callbacks.add(e),function(){t._callbacks.delete(e)}}}]),e}();function p(e){return function(e,t){var r=function(){if(!c){var t=new h(e,i);c={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return c.promise()},n=function(){r();var e=a.default.useContext(o.LoadableContext);e&&Array.isArray(i.modules)&&i.modules.forEach((function(t){e(t)}))},i=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null,suspense:!1},t);i.suspense&&(i.lazy=a.default.lazy(i.loader));var c=null;if(!d){var f=i.webpack?i.webpack():i.modules;f&&l.push((function(e){var t=!0,n=!1,i=void 0;try{for(var s,a=f[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var o=s.value;if(-1!==e.indexOf(o))return r()}}catch(u){n=!0,i=u}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}))}var p=i.suspense?function(e,t){return n(),a.default.createElement(i.lazy,s({},e,{ref:t}))}:function(e,t){n();var r=u(c.subscribe,c.getCurrentValue,c.getCurrentValue);return a.default.useImperativeHandle(t,(function(){return{retry:c.retry}}),[]),a.default.useMemo((function(){return r.loading||r.error?a.default.createElement(i.loading,{isLoading:r.loading,pastDelay:r.pastDelay,timedOut:r.timedOut,error:r.error,retry:c.retry}):r.loaded?a.default.createElement((t=r.loaded)&&t.__esModule?t.default:t,e):null;var t}),[e,r])};return p.preload=function(){return r()},p.displayName="LoadableComponent",a.default.forwardRef(p)}(f,e)}function m(e,t){for(var r=[];e.length;){var n=e.pop();r.push(n(t))}return Promise.all(r).then((function(){if(e.length)return m(e,t)}))}p.preloadAll=function(){return new Promise((function(e,t){m(c).then(e,t)}))},p.preloadReady=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(t){var r=function(){return d=!0,t()};m(l,e).then(r,r)}))},window.__NEXT_PRELOADREADY=p.preloadReady;var v=p;t.default=v},8449:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return It}});var n=r(6042),i=r(5893),s=r(7294),a=(r(6512),r(1442),r(8268)),o=r(7491),u=r(4347),c=r(7154),l=r(4072),d=r(9260),f=r(3298),h=r(1366),p=r(715),m=r(9008),v=r.n(m),g=r(1163),y=r(5152),x=r.n(y),b=r(1664),_=r.n(b),w=r(7255),j=r.n(w),E=r(2708),k=r(3996),S=r(374),N=x()((function(){return r.e(948).then(r.bind(r,1948)).then((function(e){return e.ChevronDownIcon}))}),{loadableGenerated:{webpack:function(){return[null]}},ssr:!1}),A=function(){var e=(0,k.aF)(),t=e.user,r=e.signOut,n=(0,g.useRouter)(),a=(0,s.useState)(!1),o=a[0],u=a[1],c=(0,s.useRef)(null);return(0,s.useEffect)((function(){var e=function(e){c.current&&!c.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[]),(0,i.jsxs)("nav",{className:j().root,children:[(0,i.jsx)("a",{href:"#skip",className:"sr-only focus:not-sr-only",children:"Skip to content"}),(0,i.jsx)("div",{className:"mx-auto max-w-6xl px-6",children:(0,i.jsxs)("div",{className:"flex justify-between align-center flex-row py-4 md:py-6 relative",children:[(0,i.jsxs)("div",{className:"flex flex-1 items-center",children:[(0,i.jsx)(_(),{href:{pathname:"/",query:n.query},children:(0,i.jsx)("a",{className:j().logo,"aria-label":"Logo",children:(0,i.jsx)(E.Z,{})})}),(0,i.jsxs)("nav",{className:"space-x-2 ml-6 hidden lg:block",children:[(0,i.jsx)(_(),{href:{pathname:"/plans",query:n.query},children:(0,i.jsx)("a",{className:j().link,children:"plans"})}),(0,i.jsx)(_(),{href:{pathname:"/account",query:n.query},children:(0,i.jsx)("a",{className:j().link,children:"account"})}),t&&(0,i.jsx)(_(),{href:{pathname:"/account-settings",query:n.query},children:(0,i.jsx)("a",{className:j().link,children:"settings"})})]})]}),(0,i.jsxs)("div",{className:"flex flex-1 justify-end space-x-8",children:[(0,i.jsxs)("div",{className:"relative mt-3.5",ref:c,children:[(0,i.jsxs)("button",{onClick:function(){return u(!o)},className:"inline-flex w-full justify-center gap-x-1.5 ".concat(j().link),children:["help",(0,i.jsx)(N,{"aria-hidden":"true",className:"-mr-1 size-5 text-gray-400 transition-transform duration-200 ".concat(o?"rotate-180":"rotate-0")})]}),o&&(0,i.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white border rounded shadow-lg",children:[(0,i.jsx)(_(),{href:{pathname:"/contact"},children:(0,i.jsx)("a",{className:"block px-4 py-2 text-gray-800 hover:bg-gray-100 ".concat(j().link),onClick:function(){return u(!1)},children:"contact"})}),(0,i.jsx)(_(),{href:{pathname:"https://help.writefull.com/"},children:(0,i.jsx)("a",{className:"block px-4 py-2 text-gray-800 hover:bg-gray-100 ".concat(j().link),onClick:function(){return u(!1)},children:"help guides"})})]})]}),t?(0,i.jsx)(_(),{href:"#",children:(0,i.jsx)("a",{className:j().link,onClick:function(){(0,S.HJ)(),r()},children:"sign out"})}):(0,i.jsx)(_(),{href:{pathname:"/authenticate",query:n.query},children:(0,i.jsx)("a",{className:j().link,children:"Log in"})})]})]})})]})},C=r(105),I=r.n(C),T=(new Date).getFullYear();function U(e){var t=e.href,r=void 0===t?"/":t,n=e.children;return(0,i.jsx)("li",{className:"py-3 sm:py-2 md:pb-2",children:(0,i.jsx)(_(),{href:r,children:(0,i.jsx)("a",{className:I().link,children:n})})})}function R(){return(0,i.jsxs)("footer",{className:"w-full mx-auto px-6 bg-primary-2 font-light",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-12 gap-8 mt-8 pt-12 text-secondary transition-colors duration-150",children:[(0,i.jsxs)("div",{className:"col-span-1 lg:col-start-3 lg:col-span-2",children:[(0,i.jsxs)("ul",{className:"flex flex-initial flex-col md:flex-1",children:[(0,i.jsx)(U,{href:"https://www.writefull.com/writefull-for-word",children:"Writefull for Word"}),(0,i.jsx)(U,{href:"https://www.writefull.com/writefull-for-overleaf",children:"Writefull for Overleaf"}),(0,i.jsx)(U,{href:"https://www.writefull.com/writefull-revise",children:"Writefull Revise"}),(0,i.jsx)(U,{href:"https://www.writefull.com/writefull-cite",children:"Writefull Cite"})]}),(0,i.jsx)("button",{id:"ot-sdk-btn",className:"ot-sdk-show-settings",children:"Cookie Settings"})]}),(0,i.jsx)("div",{className:"col-span-1 lg:col-span-2",children:(0,i.jsxs)("ul",{className:"flex flex-initial flex-col md:flex-1",children:[(0,i.jsx)(U,{href:"https://www.writefull.com/home",children:"for students & researchers"}),(0,i.jsx)(U,{href:"https://www.writefull.com/for-institutions",children:"for institutions"}),(0,i.jsx)(U,{href:"https://www.writefull.com/for-publishers",children:"for publishers"}),(0,i.jsx)(U,{href:"https://my.writefull.com/plans",children:"plans"})]})}),(0,i.jsx)("div",{className:"col-span-1 lg:col-start-8 lg:col-span-1",children:(0,i.jsxs)("ul",{className:"flex flex-initial flex-col md:flex-1",children:[(0,i.jsx)(U,{href:"https://blog.writefull.com/",children:"blog"}),(0,i.jsx)(U,{href:"https://www.writefull.com/about",children:"about"}),(0,i.jsx)(U,{href:"/contact",children:"contact"}),(0,i.jsx)(U,{href:"https://www.writefull.com/press",children:"press"}),(0,i.jsx)(U,{href:"https://www.writefull.com/webinars",children:"webinars"})]})}),(0,i.jsx)("div",{className:"col-span-1 lg:col-span-1",children:(0,i.jsxs)("ul",{className:"flex flex-initial flex-col md:flex-1",children:[(0,i.jsx)(U,{href:"https://help.writefull.com",children:"help center"}),(0,i.jsx)(U,{href:"https://www.writefull.com/terms",children:"terms"}),(0,i.jsx)(U,{href:"https://www.writefull.com/privacy",children:"privacy"}),(0,i.jsx)(U,{href:"https://www.writefull.com/cookies",children:"cookies"})]})})]}),(0,i.jsx)("div",{className:"py-12 grid grid-cols-1 lg:grid-cols-12 justify-between text-secondary",children:(0,i.jsx)("div",{className:"col-span-1 lg:col-span-12 text-center",children:(0,i.jsxs)("span",{children:["\xa9 2014-",T," Writefull. All Rights Reserved."]})})})]})}function P(e){var t=e.children,r=e.meta,s=(0,g.useRouter)(),a=(0,n.Z)({title:"Writefull Subscription",description:"",cardImage:"/og.png"},r);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(v(),{children:[(0,i.jsx)("title",{children:a.title}),(0,i.jsx)("meta",{name:"robots",content:"follow, index"}),(0,i.jsx)("link",{href:"/favicon.ico",rel:"shortcut icon"}),(0,i.jsx)("meta",{content:a.description,name:"description"}),(0,i.jsx)("meta",{property:"og:url",content:"https://my.writefull.com".concat(s.asPath)}),(0,i.jsx)("meta",{property:"og:type",content:"website"}),(0,i.jsx)("meta",{property:"og:site_name",content:a.title}),(0,i.jsx)("meta",{property:"og:description",content:a.description}),(0,i.jsx)("meta",{property:"og:title",content:a.title}),(0,i.jsx)("meta",{property:"og:image",content:a.cardImage}),(0,i.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,i.jsx)("meta",{name:"twitter:site",content:"@writefullapp"}),(0,i.jsx)("meta",{name:"twitter:title",content:a.title}),(0,i.jsx)("meta",{name:"twitter:description",content:a.description}),(0,i.jsx)("meta",{name:"twitter:image",content:a.cardImage})]}),(0,i.jsx)(A,{}),(0,i.jsx)("main",{id:"skip",className:"flex-grow",children:t}),(0,i.jsx)(R,{})]})}var O=r(4298),L=r.n(O),B=r(1508),Z=r(605),F=/^[a-zA-Z:_][a-zA-Z0-9:_.-]*$/,D={revert:function(){}},M=new Map,V=new Set;function W(e){var t=M.get(e);return t||(t={element:e,attributes:{}},M.set(e,t)),t}function q(e,t,r,n,i){var s=r(e),a={isDirty:!1,originalValue:s,virtualValue:s,mutations:[],el:e,_positionTimeout:null,observer:new MutationObserver((function(){if("position"!==t||!a._positionTimeout){"position"===t&&(a._positionTimeout=setTimeout((function(){a._positionTimeout=null}),1e3));var n=r(e);"position"===t&&n.parentNode===a.virtualValue.parentNode&&n.insertBeforeNode===a.virtualValue.insertBeforeNode||n!==a.virtualValue&&(a.originalValue=n,i(a))}})),mutationRunner:i,setValue:n,getCurrentValue:r};return"position"===t&&e.parentNode?a.observer.observe(e.parentNode,{childList:!0,subtree:!0,attributes:!1,characterData:!1}):a.observer.observe(e,function(e){return"html"===e?{childList:!0,subtree:!0,attributes:!0,characterData:!0}:{childList:!1,subtree:!1,attributes:!0,attributeFilter:[e]}}(t)),a}function Y(e,t){var r=t.getCurrentValue(t.el);t.virtualValue=e,e&&"string"!==typeof e?r&&e.parentNode===r.parentNode&&e.insertBeforeNode===r.insertBeforeNode||(t.isDirty=!0,le()):e!==r&&(t.isDirty=!0,le())}function z(e){var t=e.originalValue;e.mutations.forEach((function(e){return t=e.mutate(t)})),Y(function(e){se||(se=document.createElement("div"));return se.innerHTML=e,se.innerHTML}(t),e)}function G(e){var t=new Set(e.originalValue.split(/\s+/).filter(Boolean));e.mutations.forEach((function(e){return e.mutate(t)})),Y(Array.from(t).filter(Boolean).join(" "),e)}function K(e){var t=e.originalValue;e.mutations.forEach((function(e){return t=e.mutate(t)})),Y(t,e)}function H(e){var t=e.originalValue;e.mutations.forEach((function(e){var r=function(e){var t=e.parentSelector,r=e.insertBeforeSelector,n=document.querySelector(t);if(!n)return null;var i=r?document.querySelector(r):null;return r&&!i?null:{parentNode:n,insertBeforeNode:i}}(e.mutate());t=r||t})),Y(t,e)}var X=function(e){return e.innerHTML},J=function(e,t){return e.innerHTML=t};function Q(e){var t=W(e);return t.html||(t.html=q(e,"html",X,J,z)),t.html}var $=function(e){return{parentNode:e.parentElement,insertBeforeNode:e.nextElementSibling}},ee=function(e,t){t.insertBeforeNode&&!t.parentNode.contains(t.insertBeforeNode)||t.parentNode.insertBefore(e,t.insertBeforeNode)};function te(e){var t=W(e);return t.position||(t.position=q(e,"position",$,ee,H)),t.position}var re=function(e,t){return t?e.className=t:e.removeAttribute("class")},ne=function(e){return e.className};function ie(e){var t=W(e);return t.classes||(t.classes=q(e,"class",ne,re,G)),t.classes}var se,ae;function oe(e,t){var r,n=W(e);return n.attributes[t]||(n.attributes[t]=q(e,t,(r=t,function(e){var t;return null!=(t=e.getAttribute(r))?t:null}),function(e){return function(t,r){return null!==r?t.setAttribute(e,r):t.removeAttribute(e)}}(t),K)),n.attributes[t]}function ue(e,t,r){if(r.isDirty){r.isDirty=!1;var n=r.virtualValue;r.mutations.length||function(e,t){var r,n,i=M.get(e);if(i)if("html"===t)null==(r=i.html)||null==(n=r.observer)||n.disconnect(),delete i.html;else if("class"===t){var s,a;null==(s=i.classes)||null==(a=s.observer)||a.disconnect(),delete i.classes}else if("position"===t){var o,u;null==(o=i.position)||null==(u=o.observer)||u.disconnect(),delete i.position}else{var c,l,d;null==(c=i.attributes)||null==(l=c[t])||null==(d=l.observer)||d.disconnect(),delete i.attributes[t]}}(e,t),r.setValue(e,n)}}function ce(e,t){e.html&&ue(t,"html",e.html),e.classes&&ue(t,"class",e.classes),e.position&&ue(t,"position",e.position),Object.keys(e.attributes).forEach((function(r){ue(t,r,e.attributes[r])}))}function le(){M.forEach(ce)}function de(e){if("position"!==e.kind||1!==e.elements.size){var t=new Set(e.elements);document.querySelectorAll(e.selector).forEach((function(r){t.has(r)||(e.elements.add(r),function(e,t){var r=null;"html"===e.kind?r=Q(t):"class"===e.kind?r=ie(t):"attribute"===e.kind?r=oe(t,e.attribute):"position"===e.kind&&(r=te(t)),r&&(r.mutations.push(e),r.mutationRunner(r))}(e,r))}))}}function fe(e){e.elements.forEach((function(t){return function(e,t){var r=null;if("html"===e.kind?r=Q(t):"class"===e.kind?r=ie(t):"attribute"===e.kind?r=oe(t,e.attribute):"position"===e.kind&&(r=te(t)),r){var n=r.mutations.indexOf(e);-1!==n&&r.mutations.splice(n,1),r.mutationRunner(r)}}(e,t)})),e.elements.clear(),V.delete(e)}function he(){V.forEach(de)}function pe(e){return"undefined"===typeof document?D:(V.add(e),de(e),{revert:function(){fe(e)}})}function me(e,t){return pe({kind:"html",elements:new Set,mutate:t,selector:e})}function ve(e,t){return pe({kind:"position",elements:new Set,mutate:t,selector:e})}function ge(e,t){return pe({kind:"class",elements:new Set,mutate:t,selector:e})}function ye(e,t,r){return F.test(t)?"class"===t||"className"===t?ge(e,(function(e){var t=r(Array.from(e).join(" "));e.clear(),t&&t.split(/\s+/g).filter(Boolean).forEach((function(t){return e.add(t)}))})):pe({kind:"attribute",attribute:t,elements:new Set,mutate:r,selector:e}):D}"undefined"!==typeof document&&(ae||(ae=new MutationObserver((function(){he()}))),he(),ae.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!1,characterData:!1}));var xe={html:me,classes:ge,attribute:ye,position:ve,declarative:function(e){var t=e.selector,r=e.action,n=e.value,i=e.attribute,s=e.parentSelector,a=e.insertBeforeSelector;if("html"===i){if("append"===r)return me(t,(function(e){return e+(null!=n?n:"")}));if("set"===r)return me(t,(function(){return null!=n?n:""}))}else if("class"===i){if("append"===r)return ge(t,(function(e){n&&e.add(n)}));if("remove"===r)return ge(t,(function(e){n&&e.delete(n)}));if("set"===r)return ge(t,(function(e){e.clear(),n&&e.add(n)}))}else if("position"===i){if("set"===r&&s)return ve(t,(function(){return{insertBeforeSelector:a,parentSelector:s}}))}else{if("append"===r)return ye(t,i,(function(e){return null!==e?e+(null!=n?n:""):null!=n?n:""}));if("set"===r)return ye(t,i,(function(){return null!=n?n:""}));if("remove"===r)return ye(t,i,(function(){return null}))}return D}};const be={fetch:globalThis.fetch?globalThis.fetch.bind(globalThis):void 0,SubtleCrypto:globalThis.crypto?globalThis.crypto.subtle:void 0,EventSource:globalThis.EventSource};function _e(e){let t=2166136261;const r=e.length;for(let n=0;n<r;n++)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}function we(e,t,r){return 2===r?_e(_e(e+t)+"")%1e4/1e4:1===r?_e(t+e)%1e3/1e3:null}function je(e,t){return e>=t[0]&&e<t[1]}function Ee(e){try{const t=e.replace(/([^\\])\//g,"$1\\/");return new RegExp(t)}catch(t){return void console.error(t)}}function ke(e,t){if(!t.length)return!1;let r=!1,n=!1;for(let i=0;i<t.length;i++){const s=Ne(e,t[i].type,t[i].pattern);if(!1===t[i].include){if(s)return!1}else r=!0,s&&(n=!0)}return n||!r}function Se(e,t){try{const r=new URL(t.replace(/^([^:/?]*)\./i,"https://$1.").replace(/\*/g,"_____"),"https://_____"),n=[[e.host,r.host,!1],[e.pathname,r.pathname,!0]];return r.hash&&n.push([e.hash,r.hash,!1]),r.searchParams.forEach(((t,r)=>{n.push([e.searchParams.get(r)||"",t,!1])})),!n.some((e=>!function(e,t,r){try{let n=t.replace(/[*.+?^${}()|[\]\\]/g,"\\$&").replace(/_____/g,".*");return r&&(n="\\/?"+n.replace(/(^\/|\/$)/g,"")+"\\/?"),new RegExp("^"+n+"$","i").test(e)}catch(n){return!1}}(e[0],e[1],e[2])))}catch(r){return!1}}function Ne(e,t,r){try{const n=new URL(e,"https://_");if("regex"===t){const e=Ee(r);return!!e&&(e.test(n.href)||e.test(n.href.substring(n.origin.length)))}return"simple"===t&&Se(n,r)}catch(n){return!1}}function Ae(e,t,r){(t=void 0===t?1:t)<0?t=0:t>1&&(t=1);const n=(i=e)<=0?[]:new Array(i).fill(1/i);var i;(r=r||n).length!==e&&(r=n);const s=r.reduce(((e,t)=>t+e),0);(s<.99||s>1.01)&&(r=n);let a=0;return r.map((e=>{const r=a;return a+=e,[r,r+t*e]}))}const Ce=e=>Uint8Array.from(atob(e),(e=>e.charCodeAt(0)));async function Ie(e,t,r){if(t=t||"",!(r=r||globalThis.crypto&&globalThis.crypto.subtle||be.SubtleCrypto))throw new Error("No SubtleCrypto implementation found");try{const n=await r.importKey("raw",Ce(t),{name:"AES-CBC",length:128},!0,["encrypt","decrypt"]),[i,s]=e.split("."),a=await r.decrypt({name:"AES-CBC",iv:Ce(i)},n,Ce(s));return(new TextDecoder).decode(a)}catch(n){throw new Error("Failed to decrypt")}}function Te(e){return"string"===typeof e?e:JSON.stringify(e)}function Ue(e){"number"===typeof e&&(e+=""),e&&"string"===typeof e||(e="0");const t=e.replace(/(^v|\+.*$)/g,"").split(/[-.]/);return 3===t.length&&t.push("~"),t.map((e=>e.match(/^[0-9]+$/)?e.padStart(5," "):e)).join("-")}function Re(e){return"object"===typeof e&&null!==e}function Pe(e){return e.urlPatterns&&e.variations.some((e=>Re(e)&&"urlRedirect"in e))?"redirect":e.variations.some((e=>Re(e)&&(e.domMutations||"js"in e||"css"in e)))?"visual":"unknown"}async function Oe(e,t){return new Promise((r=>{let n,i=!1;const s=e=>{i||(i=!0,n&&clearTimeout(n),r(e||null))};t&&(n=setTimeout((()=>s()),t)),e.then((e=>s(e))).catch((()=>s()))}))}const Le={};function Be(e,t,r){r=r||{};for(const[n,i]of Object.entries(t))switch(n){case"$or":if(!We(e,i,r))return!1;break;case"$nor":if(We(e,i,r))return!1;break;case"$and":if(!qe(e,i,r))return!1;break;case"$not":if(Be(e,i,r))return!1;break;default:if(!Fe(i,Ze(e,n),r))return!1}return!0}function Ze(e,t){const r=t.split(".");let n=e;for(let i=0;i<r.length;i++){if(!n||"object"!==typeof n||!(r[i]in n))return null;n=n[r[i]]}return n}function Fe(e,t,r){if("string"===typeof e)return t+""===e;if("number"===typeof e)return 1*t===e;if("boolean"===typeof e)return!!t===e;if(null===e)return null===t;if(Array.isArray(e)||!De(e))return JSON.stringify(t)===JSON.stringify(e);for(const n in e)if(!Ve(n,t,e[n],r))return!1;return!0}function De(e){const t=Object.keys(e);return t.length>0&&t.filter((e=>"$"===e[0])).length===t.length}function Me(e,t){return Array.isArray(e)?e.some((e=>t.includes(e))):t.includes(e)}function Ve(e,t,r,n){switch(e){case"$veq":return Ue(t)===Ue(r);case"$vne":return Ue(t)!==Ue(r);case"$vgt":return Ue(t)>Ue(r);case"$vgte":return Ue(t)>=Ue(r);case"$vlt":return Ue(t)<Ue(r);case"$vlte":return Ue(t)<=Ue(r);case"$eq":return t===r;case"$ne":return t!==r;case"$lt":return t<r;case"$lte":return t<=r;case"$gt":return t>r;case"$gte":return t>=r;case"$exists":return r?null!=t:null==t;case"$in":return!!Array.isArray(r)&&Me(t,r);case"$inGroup":return Me(t,n[r]||[]);case"$notInGroup":return!Me(t,n[r]||[]);case"$nin":return!!Array.isArray(r)&&!Me(t,r);case"$not":return!Fe(r,t,n);case"$size":return!!Array.isArray(t)&&Fe(r,t.length,n);case"$elemMatch":return function(e,t,r){if(!Array.isArray(e))return!1;const n=De(t)?e=>Fe(t,e,r):e=>Be(e,t,r);for(let i=0;i<e.length;i++)if(e[i]&&n(e[i]))return!0;return!1}(t,r,n);case"$all":if(!Array.isArray(t))return!1;for(let e=0;e<r.length;e++){let i=!1;for(let s=0;s<t.length;s++)if(Fe(r[e],t[s],n)){i=!0;break}if(!i)return!1}return!0;case"$regex":try{return(i=r,Le[i]||(Le[i]=new RegExp(i.replace(/([^\\])\//g,"$1\\/"))),Le[i]).test(t)}catch(s){return!1}case"$type":return function(e){if(null===e)return"null";if(Array.isArray(e))return"array";const t=typeof e;return["string","number","boolean","object","undefined"].includes(t)?t:"unknown"}(t)===r;default:return console.error("Unknown operator: "+e),!1}var i}function We(e,t,r){if(!t.length)return!0;for(let n=0;n<t.length;n++)if(Be(e,t[n],r))return!0;return!1}function qe(e,t,r){for(let n=0;n<t.length;n++)if(!Be(e,t[n],r))return!1;return!0}const Ye={staleTTL:6e4,maxAge:144e5,cacheKey:"gbFeaturesCache",backgroundSync:!0,maxEntries:10,disableIdleStreams:!1,idleStreamInterval:2e4,disableCache:!1},ze=be,Ge={fetchFeaturesCall:e=>{let{host:t,clientKey:r,headers:n}=e;return ze.fetch("".concat(t,"/api/features/").concat(r),{headers:n})},fetchRemoteEvalCall:e=>{let{host:t,clientKey:r,payload:n,headers:i}=e;const s={method:"POST",headers:{"Content-Type":"application/json",...i},body:JSON.stringify(n)};return ze.fetch("".concat(t,"/api/eval/").concat(r),s)},eventSourceCall:e=>{let{host:t,clientKey:r,headers:n}=e;return n?new ze.EventSource("".concat(t,"/sub/").concat(r),{headers:n}):new ze.EventSource("".concat(t,"/sub/").concat(r))},startIdleListener:()=>{let e;if(!("undefined"!==typeof window&&"undefined"!==typeof document))return;const t=()=>{"visible"===document.visibilityState?(window.clearTimeout(e),Qe.forEach((e=>{e&&"idle"===e.state&&ft(e)}))):"hidden"===document.visibilityState&&(e=window.setTimeout(rt,Ye.idleStreamInterval))};return document.addEventListener("visibilitychange",t),()=>document.removeEventListener("visibilitychange",t)},stopIdleListener:()=>{}};try{globalThis.localStorage&&(ze.localStorage=globalThis.localStorage)}catch(Tt){}const Ke=new Map;let He=!1;const Xe=new Map,Je=new Map,Qe=new Map,$e=new Set;async function et(e){let{instance:t,timeout:r,skipCache:n,allowStale:i,backgroundSync:s}=e;return s||(Ye.backgroundSync=!1),async function(e){let{instance:t,allowStale:r,timeout:n,skipCache:i}=e;const s=it(t),a=st(t),o=new Date,u=new Date(o.getTime()-Ye.maxAge+Ye.staleTTL);await async function(){if(He)return;He=!0;try{if(ze.localStorage){const e=await ze.localStorage.getItem(Ye.cacheKey);if(!Ye.disableCache&&e){const t=JSON.parse(e);t&&Array.isArray(t)&&t.forEach((e=>{let[t,r]=e;Xe.set(t,{...r,staleAt:new Date(r.staleAt)})})),at()}}}catch(Tt){}if(!Ye.disableIdleStreams){const e=Ge.startIdleListener();e&&(Ge.stopIdleListener=e)}}();const c=Ye.disableCache||i?void 0:Xe.get(a);if(c&&(r||c.staleAt>o)&&c.staleAt>u)return c.sse&&$e.add(s),c.staleAt<o?ut(t):ct(t),{data:c.data,success:!0,source:"cache"};return await Oe(ut(t),n)||{data:null,success:!1,source:"timeout",error:new Error("Timeout")}}({instance:t,allowStale:i,timeout:r,skipCache:n})}function tt(e){const t=it(e),r=Ke.get(t)||new Set;r.add(e),Ke.set(t,r)}function rt(){Qe.forEach((e=>{e&&(e.state="idle",dt(e))}))}async function nt(){try{if(!ze.localStorage)return;await ze.localStorage.setItem(Ye.cacheKey,JSON.stringify(Array.from(Xe.entries())))}catch(Tt){}}function it(e){const[t,r]=e.getApiInfo();return"".concat(t,"||").concat(r)}function st(e){const t=it(e);if(!e.isRemoteEval())return t;const r=e.getAttributes(),n=e.getCacheKeyAttributes()||Object.keys(e.getAttributes()),i={};n.forEach((e=>{i[e]=r[e]}));const s=e.getForcedVariations(),a=e.getUrl();return"".concat(t,"||").concat(JSON.stringify({ca:i,fv:s,url:a}))}function at(){const e=Array.from(Xe.entries()).map((e=>{let[t,r]=e;return{key:t,staleAt:r.staleAt.getTime()}})).sort(((e,t)=>e.staleAt-t.staleAt)),t=Math.min(Math.max(0,Xe.size-Ye.maxEntries),Xe.size);for(let r=0;r<t;r++)Xe.delete(e[r].key)}function ot(e,t,r){const n=r.dateUpdated||"",i=new Date(Date.now()+Ye.staleTTL),s=Ye.disableCache?void 0:Xe.get(t);if(s&&n&&s.version===n)return s.staleAt=i,void nt();Ye.disableCache||(Xe.set(t,{data:r,version:n,staleAt:i,sse:$e.has(e)}),at()),nt();const a=Ke.get(e);a&&a.forEach((e=>async function(e,t){await e.setPayload(t||e.getPayload())}(e,r)))}async function ut(e){const{apiHost:t,apiRequestHeaders:r}=e.getApiHosts(),n=e.getClientKey(),i=e.isRemoteEval(),s=it(e),a=st(e);let o=Je.get(a);if(!o){o=(i?Ge.fetchRemoteEvalCall({host:t,clientKey:n,payload:{attributes:e.getAttributes(),forcedVariations:e.getForcedVariations(),forcedFeatures:Array.from(e.getForcedFeatures().entries()),url:e.getUrl()},headers:r}):Ge.fetchFeaturesCall({host:t,clientKey:n,headers:r})).then((e=>{if(!e.ok)throw new Error("HTTP error: ".concat(e.status));return"enabled"===e.headers.get("x-sse-support")&&$e.add(s),e.json()})).then((t=>(ot(s,a,t),ct(e),Je.delete(a),{data:t,success:!0,source:"network"}))).catch((e=>(Je.delete(a),{data:null,source:"error",success:!1,error:e}))),Je.set(a,o)}return o}function ct(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=it(e),n=st(e),{streamingHost:i,streamingHostRequestHeaders:s}=e.getApiHosts(),a=e.getClientKey();if(t&&$e.add(r),Ye.backgroundSync&&$e.has(r)&&ze.EventSource){if(Qe.has(r))return;const e={src:null,host:i,clientKey:a,headers:s,cb:t=>{try{if("features-updated"===t.type){const e=Ke.get(r);e&&e.forEach((e=>{ut(e)}))}else if("features"===t.type){const e=JSON.parse(t.data);ot(r,n,e)}e.errors=0}catch(Tt){lt(e)}},errors:0,state:"active"};Qe.set(r,e),ft(e)}}function lt(e){if("idle"!==e.state&&(e.errors++,e.errors>3||e.src&&2===e.src.readyState)){const t=Math.pow(3,e.errors-3)*(1e3+1e3*Math.random());dt(e),setTimeout((()=>{["idle","active"].includes(e.state)||ft(e)}),Math.min(t,3e5))}}function dt(e){e.src&&(e.src.onopen=null,e.src.onerror=null,e.src.close(),e.src=null,"active"===e.state&&(e.state="disabled"))}function ft(e){e.src=Ge.eventSourceCall({host:e.host,clientKey:e.clientKey,headers:e.headers}),e.state="active",e.src.addEventListener("features",e.cb),e.src.addEventListener("features-updated",e.cb),e.src.onerror=()=>lt(e),e.src.onopen=()=>{e.errors=0}}function ht(e,t){dt(e),Qe.delete(t)}function pt(){$e.clear(),Qe.forEach(ht),Ke.clear(),Ge.stopIdleListener()}const mt="undefined"!==typeof window&&"undefined"!==typeof document,vt=function(){let e;try{e="1.2.0"}catch(Tt){e=""}return e}();class gt{constructor(e){if(e=e||{},this.version=vt,this._ctx=this.context=e,this._renderer=e.renderer||null,this._trackedExperiments=new Set,this._completedChangeIds=new Set,this._trackedFeatures={},this.debug=!!e.debug,this._subscriptions=new Set,this._rtQueue=[],this._rtTimer=0,this.ready=!1,this._assigned=new Map,this._forcedFeatureValues=new Map,this._attributeOverrides={},this._activeAutoExperiments=new Map,this._triggeredExpKeys=new Set,this._initialized=!1,this._redirectedUrl="",this._deferredTrackingCalls=new Map,this._autoExperimentsAllowed=!e.disableExperimentsOnLoad,e.remoteEval){if(e.decryptionKey)throw new Error("Encryption is not available for remoteEval");if(!e.clientKey)throw new Error("Missing clientKey");let t=!1;try{t=!!new URL(e.apiHost||"").hostname.match(/growthbook\.io$/i)}catch(Tt){}if(t)throw new Error("Cannot use remoteEval on GrowthBook Cloud")}else if(e.cacheKeyAttributes)throw new Error("cacheKeyAttributes are only used for remoteEval");if(e.features&&(this.ready=!0),mt&&e.enableDevMode&&(window._growthbook=this,document.dispatchEvent(new Event("gbloaded"))),e.experiments&&(this.ready=!0,this._updateAllAutoExperiments()),this._ctx.stickyBucketService&&this._ctx.stickyBucketAssignmentDocs)for(const t in this._ctx.stickyBucketAssignmentDocs){const e=this._ctx.stickyBucketAssignmentDocs[t];e&&this._ctx.stickyBucketService.saveAssignments(e).catch((()=>{}))}this.ready&&this.refreshStickyBuckets(this.getPayload())}async setPayload(e){this._payload=e;const t=await this.decryptPayload(e);this._decryptedPayload=t,await this.refreshStickyBuckets(t),t.features&&(this._ctx.features=t.features),t.savedGroups&&(this._ctx.savedGroups=t.savedGroups),t.experiments&&(this._ctx.experiments=t.experiments,this._updateAllAutoExperiments()),this.ready=!0,this._render()}initSync(e){this._initialized=!0;const t=e.payload;if(t.encryptedExperiments||t.encryptedFeatures)throw new Error("initSync does not support encrypted payloads");if(this._ctx.stickyBucketService&&!this._ctx.stickyBucketAssignmentDocs)throw new Error("initSync requires you to pass stickyBucketAssignmentDocs into the GrowthBook constructor");if(this._payload=t,this._decryptedPayload=t,t.features&&(this._ctx.features=t.features),t.experiments&&(this._ctx.experiments=t.experiments,this._updateAllAutoExperiments()),this.ready=!0,e.streaming){if(!this._ctx.clientKey)throw new Error("Must specify clientKey to enable streaming");ct(this,!0),tt(this)}return this}async init(e){var t;if(this._initialized=!0,(e=e||{}).cacheSettings&&(t=e.cacheSettings,Object.assign(Ye,t),Ye.backgroundSync||pt()),e.payload){if(await this.setPayload(e.payload),e.streaming){if(!this._ctx.clientKey)throw new Error("Must specify clientKey to enable streaming");ct(this,!0),tt(this)}return{success:!0,source:"init"}}{const{data:t,...r}=await this._refresh({...e,allowStale:!0});return e.streaming&&tt(this),await this.setPayload(t||{}),r}}async loadFeatures(e){this._initialized=!0,(e=e||{}).autoRefresh&&(this._ctx.subscribeToChanges=!0);const{data:t}=await this._refresh({...e,allowStale:!0});await this.setPayload(t||{}),this._canSubscribe()&&tt(this)}async refreshFeatures(e){const t=await this._refresh({...e||{},allowStale:!1});t.data&&await this.setPayload(t.data)}getApiInfo(){return[this.getApiHosts().apiHost,this.getClientKey()]}getApiHosts(){const e=this._ctx.apiHost||"https://cdn.growthbook.io";return{apiHost:e.replace(/\/*$/,""),streamingHost:(this._ctx.streamingHost||e).replace(/\/*$/,""),apiRequestHeaders:this._ctx.apiHostRequestHeaders,streamingHostRequestHeaders:this._ctx.streamingHostRequestHeaders}}getClientKey(){return this._ctx.clientKey||""}getPayload(){return this._payload||{features:this.getFeatures(),experiments:this.getExperiments()}}getDecryptedPayload(){return this._decryptedPayload||this.getPayload()}isRemoteEval(){return this._ctx.remoteEval||!1}getCacheKeyAttributes(){return this._ctx.cacheKeyAttributes}async _refresh(e){var t;let{timeout:r,skipCache:n,allowStale:i,streaming:s}=e;if(!this._ctx.clientKey)throw new Error("Missing clientKey");return et({instance:this,timeout:r,skipCache:n||this._ctx.disableCache,allowStale:i,backgroundSync:null===(t=null!==s&&void 0!==s?s:this._ctx.backgroundSync)||void 0===t||t})}_render(){if(this._renderer)try{this._renderer()}catch(Tt){console.error("Failed to render",Tt)}}setFeatures(e){this._ctx.features=e,this.ready=!0,this._render()}async setEncryptedFeatures(e,t,r){const n=await Ie(e,t||this._ctx.decryptionKey,r);this.setFeatures(JSON.parse(n))}setExperiments(e){this._ctx.experiments=e,this.ready=!0,this._updateAllAutoExperiments()}async setEncryptedExperiments(e,t,r){const n=await Ie(e,t||this._ctx.decryptionKey,r);this.setExperiments(JSON.parse(n))}async decryptPayload(e,t,r){if((e={...e}).encryptedFeatures){try{e.features=JSON.parse(await Ie(e.encryptedFeatures,t||this._ctx.decryptionKey,r))}catch(Tt){console.error(Tt)}delete e.encryptedFeatures}if(e.encryptedExperiments){try{e.experiments=JSON.parse(await Ie(e.encryptedExperiments,t||this._ctx.decryptionKey,r))}catch(Tt){console.error(Tt)}delete e.encryptedExperiments}if(e.encryptedSavedGroups){try{e.savedGroups=JSON.parse(await Ie(e.encryptedSavedGroups,t||this._ctx.decryptionKey,r))}catch(Tt){console.error(Tt)}delete e.encryptedSavedGroups}return e}async setAttributes(e){this._ctx.attributes=e,this._ctx.stickyBucketService&&await this.refreshStickyBuckets(),this._ctx.remoteEval?await this._refreshForRemoteEval():(this._render(),this._updateAllAutoExperiments())}async updateAttributes(e){return this.setAttributes({...this._ctx.attributes,...e})}async setAttributeOverrides(e){this._attributeOverrides=e,this._ctx.stickyBucketService&&await this.refreshStickyBuckets(),this._ctx.remoteEval?await this._refreshForRemoteEval():(this._render(),this._updateAllAutoExperiments())}async setForcedVariations(e){this._ctx.forcedVariations=e||{},this._ctx.remoteEval?await this._refreshForRemoteEval():(this._render(),this._updateAllAutoExperiments())}setForcedFeatures(e){this._forcedFeatureValues=e,this._render()}async setURL(e){if(e!==this._ctx.url){if(this._ctx.url=e,this._redirectedUrl="",this._ctx.remoteEval)return await this._refreshForRemoteEval(),void this._updateAllAutoExperiments(!0);this._updateAllAutoExperiments(!0)}}getAttributes(){return{...this._ctx.attributes,...this._attributeOverrides}}getForcedVariations(){return this._ctx.forcedVariations||{}}getForcedFeatures(){return this._forcedFeatureValues||new Map}getStickyBucketAssignmentDocs(){return this._ctx.stickyBucketAssignmentDocs||{}}getUrl(){return this._ctx.url||""}getFeatures(){return this._ctx.features||{}}getExperiments(){return this._ctx.experiments||[]}getCompletedChangeIds(){return Array.from(this._completedChangeIds)}subscribe(e){return this._subscriptions.add(e),()=>{this._subscriptions.delete(e)}}_canSubscribe(){var e;return(null===(e=this._ctx.backgroundSync)||void 0===e||e)&&this._ctx.subscribeToChanges}async _refreshForRemoteEval(){if(!this._ctx.remoteEval)return;if(!this._initialized)return;const e=await this._refresh({allowStale:!1});e.data&&await this.setPayload(e.data)}getAllResults(){return new Map(this._assigned)}destroy(){var e;this._subscriptions.clear(),this._assigned.clear(),this._trackedExperiments.clear(),this._completedChangeIds.clear(),this._deferredTrackingCalls.clear(),this._trackedFeatures={},this._rtQueue=[],this._payload=void 0,this._rtTimer&&clearTimeout(this._rtTimer),e=this,Ke.forEach((t=>t.delete(e))),mt&&window._growthbook===this&&delete window._growthbook,this._activeAutoExperiments.forEach((e=>{e.undo()})),this._activeAutoExperiments.clear(),this._triggeredExpKeys.clear()}setRenderer(e){this._renderer=e}forceVariation(e,t){this._ctx.forcedVariations=this._ctx.forcedVariations||{},this._ctx.forcedVariations[e]=t,this._ctx.remoteEval?this._refreshForRemoteEval():(this._updateAllAutoExperiments(),this._render())}run(e){const{result:t}=this._run(e,null);return this._fireSubscriptions(e,t),t}triggerExperiment(e){if(this._triggeredExpKeys.add(e),!this._ctx.experiments)return null;return this._ctx.experiments.filter((t=>t.key===e)).map((e=>this._runAutoExperiment(e))).filter((e=>null!==e))}triggerAutoExperiments(){this._autoExperimentsAllowed=!0,this._updateAllAutoExperiments(!0)}_runAutoExperiment(e,t){const r=this._activeAutoExperiments.get(e);if(e.manual&&!this._triggeredExpKeys.has(e.key)&&!r)return null;const n=this._isAutoExperimentBlockedByContext(e);let i,s;n?i=this._getResult(e,-1,!1,""):(({result:i,trackingCall:s}=this._run(e,null)),this._fireSubscriptions(e,i));const a=JSON.stringify(i.value);if(!t&&i.inExperiment&&r&&r.valueHash===a)return i;if(r&&this._undoActiveAutoExperiment(e),i.inExperiment){const t=Pe(e);if("redirect"===t&&i.value.urlRedirect&&e.urlPatterns){const t=e.persistQueryString?function(e,t){let r,n;try{r=new URL(e),n=new URL(t)}catch(Tt){return console.error("Unable to merge query strings: ".concat(Tt)),t}return r.searchParams.forEach(((e,t)=>{n.searchParams.has(t)||n.searchParams.set(t,e)})),n.toString()}(this._getContextUrl(),i.value.urlRedirect):i.value.urlRedirect;if(ke(t,e.urlPatterns))return this.log("Skipping redirect because original URL matches redirect URL",{id:e.key}),i;this._redirectedUrl=t;const{navigate:r,delay:n}=this._getNavigateFunction();var o;if(r)if(mt)Promise.all([...s?[Oe(s,null!==(o=this._ctx.maxNavigateDelay)&&void 0!==o?o:1e3)]:[],new Promise((e=>{var t;return window.setTimeout(e,null!==(t=this._ctx.navigateDelay)&&void 0!==t?t:n)}))]).then((()=>{try{r(t)}catch(Tt){console.error(Tt)}}));else try{r(t)}catch(Tt){console.error(Tt)}}else if("visual"===t){const t=this._ctx.applyDomChangesCallback?this._ctx.applyDomChangesCallback(i.value):this._applyDOMChanges(i.value);t&&this._activeAutoExperiments.set(e,{undo:t,valueHash:a})}}return i}_undoActiveAutoExperiment(e){const t=this._activeAutoExperiments.get(e);t&&(t.undo(),this._activeAutoExperiments.delete(e))}_updateAllAutoExperiments(e){if(!this._autoExperimentsAllowed)return;const t=this._ctx.experiments||[],r=new Set(t);this._activeAutoExperiments.forEach(((e,t)=>{r.has(t)||(e.undo(),this._activeAutoExperiments.delete(t))}));for(const n of t){const t=this._runAutoExperiment(n,e);if(null!==t&&void 0!==t&&t.inExperiment&&"redirect"===Pe(n))break}}_fireSubscriptions(e,t){const r=e.key,n=this._assigned.get(r);n&&n.result.inExperiment===t.inExperiment&&n.result.variationId===t.variationId||(this._assigned.set(r,{experiment:e,result:t}),this._subscriptions.forEach((r=>{try{r(e,t)}catch(Tt){console.error(Tt)}})))}_trackFeatureUsage(e,t){if("override"===t.source)return;const r=JSON.stringify(t.value);if(this._trackedFeatures[e]!==r){if(this._trackedFeatures[e]=r,this._ctx.onFeatureUsage)try{this._ctx.onFeatureUsage(e,t)}catch(Tt){}mt&&window.fetch&&(this._rtQueue.push({key:e,on:t.on}),this._rtTimer||(this._rtTimer=window.setTimeout((()=>{this._rtTimer=0;const e=[...this._rtQueue];this._rtQueue=[],this._ctx.realtimeKey&&window.fetch("https://rt.growthbook.io/?key=".concat(this._ctx.realtimeKey,"&events=").concat(encodeURIComponent(JSON.stringify(e))),{cache:"no-cache",mode:"no-cors"}).catch((()=>{}))}),this._ctx.realtimeInterval||2e3)))}}_getFeatureResult(e,t,r,n,i,s){const a={value:t,on:!!t,off:!t,source:r,ruleId:n||""};return i&&(a.experiment=i),s&&(a.experimentResult=s),this._trackFeatureUsage(e,a),a}isOn(e){return this.evalFeature(e).on}isOff(e){return this.evalFeature(e).off}getFeatureValue(e,t){const r=this.evalFeature(e).value;return null===r?t:r}feature(e){return this.evalFeature(e)}evalFeature(e){return this._evalFeature(e)}_evalFeature(e,t){if((t=t||{evaluatedFeatures:new Set}).evaluatedFeatures.has(e))return this._getFeatureResult(e,null,"cyclicPrerequisite");if(t.evaluatedFeatures.add(e),t.id=e,this._forcedFeatureValues.has(e))return this._getFeatureResult(e,this._forcedFeatureValues.get(e),"override");if(!this._ctx.features||!this._ctx.features[e])return this._getFeatureResult(e,null,"unknownFeature");const r=this._ctx.features[e];if(r.rules)e:for(const n of r.rules){if(n.parentConditions)for(const s of n.parentConditions){const r=this._evalFeature(s.id,t);if("cyclicPrerequisite"===r.source)return this._getFeatureResult(e,null,"cyclicPrerequisite");if(!Be({value:r.value},s.condition||{})){if(s.gate)return this._getFeatureResult(e,null,"prerequisite");continue e}}if(n.filters&&this._isFilteredOut(n.filters))continue;if("force"in n){if(n.condition&&!this._conditionPasses(n.condition))continue;if(!this._isIncludedInRollout(n.seed||e,n.hashAttribute,this._ctx.stickyBucketService&&!n.disableStickyBucketing?n.fallbackAttribute:void 0,n.range,n.coverage,n.hashVersion))continue;return n.tracks&&n.tracks.forEach((e=>{this._track(e.experiment,e.result)})),this._getFeatureResult(e,n.force,"force",n.id)}if(!n.variations)continue;const r={variations:n.variations,key:n.key||e};"coverage"in n&&(r.coverage=n.coverage),n.weights&&(r.weights=n.weights),n.hashAttribute&&(r.hashAttribute=n.hashAttribute),n.fallbackAttribute&&(r.fallbackAttribute=n.fallbackAttribute),n.disableStickyBucketing&&(r.disableStickyBucketing=n.disableStickyBucketing),void 0!==n.bucketVersion&&(r.bucketVersion=n.bucketVersion),void 0!==n.minBucketVersion&&(r.minBucketVersion=n.minBucketVersion),n.namespace&&(r.namespace=n.namespace),n.meta&&(r.meta=n.meta),n.ranges&&(r.ranges=n.ranges),n.name&&(r.name=n.name),n.phase&&(r.phase=n.phase),n.seed&&(r.seed=n.seed),n.hashVersion&&(r.hashVersion=n.hashVersion),n.filters&&(r.filters=n.filters),n.condition&&(r.condition=n.condition);const{result:i}=this._run(r,e);if(this._fireSubscriptions(r,i),i.inExperiment&&!i.passthrough)return this._getFeatureResult(e,i.value,"experiment",n.id,r,i)}return this._getFeatureResult(e,void 0===r.defaultValue?null:r.defaultValue,"defaultValue")}_isIncludedInRollout(e,t,r,n,i,s){if(!n&&void 0===i)return!0;if(!n&&0===i)return!1;const{hashValue:a}=this._getHashAttribute(t,r);if(!a)return!1;const o=we(e,a,s||1);return null!==o&&(n?je(o,n):void 0===i||o<=i)}_conditionPasses(e){return Be(this.getAttributes(),e,this._ctx.savedGroups||{})}_isFilteredOut(e){return e.some((e=>{const{hashValue:t}=this._getHashAttribute(e.attribute);if(!t)return!0;const r=we(e.seed,t,e.hashVersion||2);return null===r||!e.ranges.some((e=>je(r,e)))}))}_run(e,t){const r=e.key,n=e.variations.length;if(n<2)return{result:this._getResult(e,-1,!1,t)};if(!1===this._ctx.enabled)return{result:this._getResult(e,-1,!1,t)};if((e=this._mergeOverrides(e)).urlPatterns&&!ke(this._getContextUrl(),e.urlPatterns))return{result:this._getResult(e,-1,!1,t)};const i=function(e,t,r){if(!t)return null;const n=t.split("?")[1];if(!n)return null;const i=n.replace(/#.*/,"").split("&").map((e=>e.split("=",2))).filter((t=>{let[r]=t;return r===e})).map((e=>{let[,t]=e;return parseInt(t)}));return i.length>0&&i[0]>=0&&i[0]<r?i[0]:null}(r,this._getContextUrl(),n);if(null!==i)return{result:this._getResult(e,i,!1,t)};if(this._ctx.forcedVariations&&r in this._ctx.forcedVariations){const n=this._ctx.forcedVariations[r];return{result:this._getResult(e,n,!1,t)}}if("draft"===e.status||!1===e.active)return{result:this._getResult(e,-1,!1,t)};const{hashAttribute:s,hashValue:a}=this._getHashAttribute(e.hashAttribute,this._ctx.stickyBucketService&&!e.disableStickyBucketing?e.fallbackAttribute:void 0);if(!a)return{result:this._getResult(e,-1,!1,t)};let o=-1,u=!1,c=!1;if(this._ctx.stickyBucketService&&!e.disableStickyBucketing){const{variation:t,versionIsBlocked:r}=this._getStickyBucketVariation({expKey:e.key,expBucketVersion:e.bucketVersion,expHashAttribute:e.hashAttribute,expFallbackAttribute:e.fallbackAttribute,expMinBucketVersion:e.minBucketVersion,expMeta:e.meta});u=t>=0,o=t,c=!!r}if(!u){if(e.filters){if(this._isFilteredOut(e.filters))return{result:this._getResult(e,-1,!1,t)}}else if(e.namespace&&!function(e,t){const r=we("__"+t[0],e,1);return null!==r&&r>=t[1]&&r<t[2]}(a,e.namespace))return{result:this._getResult(e,-1,!1,t)};if(e.include&&!function(e){try{return e()}catch(Tt){return console.error(Tt),!1}}(e.include))return{result:this._getResult(e,-1,!1,t)};if(e.condition&&!this._conditionPasses(e.condition))return{result:this._getResult(e,-1,!1,t)};if(e.parentConditions)for(const r of e.parentConditions){const n=this._evalFeature(r.id);if("cyclicPrerequisite"===n.source)return{result:this._getResult(e,-1,!1,t)};if(!Be({value:n.value},r.condition||{}))return{result:this._getResult(e,-1,!1,t)}}if(e.groups&&!this._hasGroupOverlap(e.groups))return{result:this._getResult(e,-1,!1,t)}}if(e.url&&!this._urlIsValid(e.url))return{result:this._getResult(e,-1,!1,t)};const l=we(e.seed||r,a,e.hashVersion||1);if(null===l)return{result:this._getResult(e,-1,!1,t)};if(!u){o=function(e,t){for(let r=0;r<t.length;r++)if(je(e,t[r]))return r;return-1}(l,e.ranges||Ae(n,void 0===e.coverage?1:e.coverage,e.weights))}if(c)return{result:this._getResult(e,-1,!1,t,void 0,!0)};if(o<0)return{result:this._getResult(e,-1,!1,t)};if("force"in e)return{result:this._getResult(e,void 0===e.force?-1:e.force,!1,t)};if(this._ctx.qaMode)return{result:this._getResult(e,-1,!1,t)};if("stopped"===e.status)return{result:this._getResult(e,-1,!1,t)};const d=this._getResult(e,o,!0,t,l,u);if(this._ctx.stickyBucketService&&!e.disableStickyBucketing){const{changed:t,key:r,doc:n}=this._generateStickyBucketAssignmentDoc(s,Te(a),{[this._getStickyBucketExperimentKey(e.key,e.bucketVersion)]:d.key});t&&(this._ctx.stickyBucketAssignmentDocs=this._ctx.stickyBucketAssignmentDocs||{},this._ctx.stickyBucketAssignmentDocs[r]=n,this._ctx.stickyBucketService.saveAssignments(n))}const f=this._track(e,d);return"changeId"in e&&e.changeId&&this._completedChangeIds.add(e.changeId),{result:d,trackingCall:f}}log(e,t){this.debug&&(this._ctx.log?this._ctx.log(e,t):console.log(e,t))}getDeferredTrackingCalls(){return Array.from(this._deferredTrackingCalls.values())}setDeferredTrackingCalls(e){this._deferredTrackingCalls=new Map(e.filter((e=>e&&e.experiment&&e.result)).map((e=>[this._getTrackKey(e.experiment,e.result),e])))}async fireDeferredTrackingCalls(){if(!this._ctx.trackingCallback)return;const e=[];this._deferredTrackingCalls.forEach((t=>{t&&t.experiment&&t.result?e.push(this._track(t.experiment,t.result)):console.error("Invalid deferred tracking call",{call:t})})),this._deferredTrackingCalls.clear(),await Promise.all(e)}setTrackingCallback(e){this._ctx.trackingCallback=e,this.fireDeferredTrackingCalls()}_getTrackKey(e,t){return t.hashAttribute+t.hashValue+e.key+t.variationId}async _track(e,t){const r=this._getTrackKey(e,t);if(this._ctx.trackingCallback){if(!this._trackedExperiments.has(r)){this._trackedExperiments.add(r);try{await this._ctx.trackingCallback(e,t)}catch(Tt){console.error(Tt)}}}else this._deferredTrackingCalls.has(r)||this._deferredTrackingCalls.set(r,{experiment:e,result:t})}_mergeOverrides(e){const t=e.key,r=this._ctx.overrides;return r&&r[t]&&"string"===typeof(e=Object.assign({},e,r[t])).url&&(e.url=Ee(e.url)),e}_getHashAttribute(e,t){let r=e||"id",n="";return this._attributeOverrides[r]?n=this._attributeOverrides[r]:this._ctx.attributes?n=this._ctx.attributes[r]||"":this._ctx.user&&(n=this._ctx.user[r]||""),!n&&t&&(this._attributeOverrides[t]?n=this._attributeOverrides[t]:this._ctx.attributes?n=this._ctx.attributes[t]||"":this._ctx.user&&(n=this._ctx.user[t]||""),n&&(r=t)),{hashAttribute:r,hashValue:n}}_getResult(e,t,r,n,i,s){let a=!0;(t<0||t>=e.variations.length)&&(t=0,a=!1);const{hashAttribute:o,hashValue:u}=this._getHashAttribute(e.hashAttribute,this._ctx.stickyBucketService&&!e.disableStickyBucketing?e.fallbackAttribute:void 0),c=e.meta?e.meta[t]:{},l={key:c.key||""+t,featureId:n,inExperiment:a,hashUsed:r,variationId:t,value:e.variations[t],hashAttribute:o,hashValue:u,stickyBucketUsed:!!s};return c.name&&(l.name=c.name),void 0!==i&&(l.bucket=i),c.passthrough&&(l.passthrough=c.passthrough),l}_getContextUrl(){return this._ctx.url||(mt?window.location.href:"")}_urlIsValid(e){const t=this._getContextUrl();if(!t)return!1;const r=t.replace(/^https?:\/\//,"").replace(/^[^/]*\//,"/");return!!e.test(t)||!!e.test(r)}_hasGroupOverlap(e){const t=this._ctx.groups||{};for(let r=0;r<e.length;r++)if(t[e[r]])return!0;return!1}_isAutoExperimentBlockedByContext(e){const t=Pe(e);if("visual"===t){if(this._ctx.disableVisualExperiments)return!0;if(this._ctx.disableJsInjection&&e.variations.some((e=>e.js)))return!0}else{if("redirect"!==t)return!0;if(this._ctx.disableUrlRedirectExperiments)return!0;try{const t=new URL(this._getContextUrl());for(const r of e.variations){if(!r||!r.urlRedirect)continue;const e=new URL(r.urlRedirect);if(this._ctx.disableCrossOriginUrlRedirectExperiments){if(e.protocol!==t.protocol)return!0;if(e.host!==t.host)return!0}}}catch(Tt){return this.log("Error parsing current or redirect URL",{id:e.key,error:Tt}),!0}}return!(!e.changeId||!(this._ctx.blockedChangeIds||[]).includes(e.changeId))}getRedirectUrl(){return this._redirectedUrl}_getNavigateFunction(){return this._ctx.navigate?{navigate:this._ctx.navigate,delay:0}:mt?{navigate:e=>{window.location.replace(e)},delay:100}:{navigate:null,delay:0}}_applyDOMChanges(e){if(!mt)return;const t=[];if(e.css){const r=document.createElement("style");r.innerHTML=e.css,document.head.appendChild(r),t.push((()=>r.remove()))}if(e.js){const r=document.createElement("script");r.innerHTML=e.js,this._ctx.jsInjectionNonce&&(r.nonce=this._ctx.jsInjectionNonce),document.head.appendChild(r),t.push((()=>r.remove()))}return e.domMutations&&e.domMutations.forEach((e=>{t.push(xe.declarative(e).revert)})),()=>{t.forEach((e=>e()))}}_deriveStickyBucketIdentifierAttributes(e){const t=new Set,r=e&&e.features?e.features:this.getFeatures(),n=e&&e.experiments?e.experiments:this.getExperiments();return Object.keys(r).forEach((e=>{const n=r[e];if(n.rules)for(const r of n.rules)r.variations&&(t.add(r.hashAttribute||"id"),r.fallbackAttribute&&t.add(r.fallbackAttribute))})),n.map((e=>{t.add(e.hashAttribute||"id"),e.fallbackAttribute&&t.add(e.fallbackAttribute)})),Array.from(t)}async refreshStickyBuckets(e){if(this._ctx.stickyBucketService){const t=this._getStickyBucketAttributes(e);this._ctx.stickyBucketAssignmentDocs=await this._ctx.stickyBucketService.getAllAssignments(t)}}_getStickyBucketAssignments(e,t){if(!this._ctx.stickyBucketAssignmentDocs)return{};const{hashAttribute:r,hashValue:n}=this._getHashAttribute(e),i="".concat(r,"||").concat(Te(n)),{hashAttribute:s,hashValue:a}=this._getHashAttribute(t),o=a?"".concat(s,"||").concat(Te(a)):null,u={};return o&&this._ctx.stickyBucketAssignmentDocs[o]&&Object.assign(u,this._ctx.stickyBucketAssignmentDocs[o].assignments||{}),this._ctx.stickyBucketAssignmentDocs[i]&&Object.assign(u,this._ctx.stickyBucketAssignmentDocs[i].assignments||{}),u}_getStickyBucketVariation(e){let{expKey:t,expBucketVersion:r,expHashAttribute:n,expFallbackAttribute:i,expMinBucketVersion:s,expMeta:a}=e;r=r||0,s=s||0,n=n||"id",a=a||[];const o=this._getStickyBucketExperimentKey(t,r),u=this._getStickyBucketAssignments(n,i);if(s>0)for(let d=0;d<=s;d++){if(void 0!==u[this._getStickyBucketExperimentKey(t,d)])return{variation:-1,versionIsBlocked:!0}}const c=u[o];if(void 0===c)return{variation:-1};const l=a.findIndex((e=>e.key===c));return l<0?{variation:-1}:{variation:l}}_getStickyBucketExperimentKey(e,t){return t=t||0,"".concat(e,"__").concat(t)}_getStickyBucketAttributes(e){const t={};return this._ctx.stickyBucketIdentifierAttributes=this._deriveStickyBucketIdentifierAttributes(e),this._ctx.stickyBucketIdentifierAttributes.forEach((e=>{const{hashValue:r}=this._getHashAttribute(e);t[e]=Te(r)})),t}_generateStickyBucketAssignmentDoc(e,t,r){const n="".concat(e,"||").concat(t),i=this._ctx.stickyBucketAssignmentDocs&&this._ctx.stickyBucketAssignmentDocs[n]&&this._ctx.stickyBucketAssignmentDocs[n].assignments||{},s={...i,...r};return{key:n,doc:{attributeName:e,attributeValue:t,assignments:s},changed:JSON.stringify(i)!==JSON.stringify(s)}}}const yt=s.createContext({});const xt=({children:e,growthbook:t})=>{const[r,n]=s.useState(0);return s.useEffect((()=>{if(t&&t.setRenderer)return t.setRenderer((()=>{n((e=>e+1))})),()=>{t.setRenderer((()=>{}))}}),[t]),s.createElement(yt.Provider,{value:{growthbook:t}},e)};var bt=r(3646),_t=r(1968),wt=r(9223),jt=function(e){var t,r,n,a=e.children,o=(0,s.useState)(!1),u=o[0],c=o[1],l=(0,s.useState)([]),d=l[0],f=l[1],h=(0,g.useRouter)(),p=null!==(t="https://cdn.growthbook.io")?t:"",m=null!==(r="sdk-l59QaUcvrRggJglf")?r:"",v=null!==(n="Fga2P8fKt55/4l30+Ii+GQ==")?n:"",y=(0,s.useMemo)((function(){return new gt({apiHost:p,clientKey:m,decryptionKey:v,enableDevMode:false,navigate:function(e){h.replace(e)},navigateDelay:0,trackingCallback:function(e,t){if(t.inExperiment){d.includes("".concat(e.key,"__").concat(t.key))||(d.push("".concat(e.key,"__").concat(t.key)),f(d)),localStorage.setItem("writefull.targets",JSON.stringify(d));var r=h.route.split("/").at(-1);t.value.urlRedirect&&(r=t.value.urlRedirect.split("/").at(-1)),(0,_t.L)("page-viewed",null!==r&&void 0!==r?r:"",{experiment_name:e.key,experiment_variation:t.key,target:d})}}})}),[]);return(0,s.useEffect)((function(){y.setAttributes({id:(0,wt.E)(),browser:navigator.userAgent}),y.init({streaming:!0}).then((function(){c(!0)}))}),[y]),(0,s.useEffect)((function(){var e=function(){y.setURL(window.location.href)};if(h.isReady)return h.events.on("routeChangeComplete",e),function(){return h.events.off("routeChangeComplete",e)}}),[h.isReady]),(0,i.jsx)(bt.Z.Provider,{value:{isReady:u,trackExperiment:function(e,t){(0,_t.L)(e,t,{})}},children:(0,i.jsx)(xt,{growthbook:y,children:a})})},Et=r(2743),kt=r(9297),St=r(7003),Nt=[o.default,u.default,c.default,l.default,d.default,B.default,Z.default,f.default,h.default,p.default,kt.default,Et.default],At=[Z.default,h.default,Et.default,kt.default],Ct=[h.default,Et.default];function It(e){var t=e.Component,r=e.pageProps;return(0,s.useEffect)((function(){var e;null===(e=document.body.classList)||void 0===e||e.remove("loading")}),[]),t===a.default?(0,i.jsx)(t,(0,n.Z)({},r)):(0,i.jsxs)("div",{className:"flex flex-col bg-primary min-h-screen",children:[!At.includes(t)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(L(),{id:"one-trust-script",children:"\n              window.dataLayer = window.dataLayer || [];\n              function gtag(){dataLayer.push(arguments);}\n              gtag('consent', 'default', {\n                'ad_storage': 'denied',\n                'ad_user_data': 'denied',\n                'ad_personalization': 'denied',\n                'analytics_storage': 'denied'\n              });\n            "}),(0,i.jsx)(L(),{src:"https://cdn.cookielaw.org/scripttemplates/otSDKStub.js",type:"text/javascript","data-domain-script":"018ecc92-9746-7f09-b86a-d2b36f0a59c4"}),(0,i.jsx)(L(),{id:"optanon-script",children:"\n            function OptanonWrapper() { }\n            "}),(0,i.jsx)(L(),{children:"\n              (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n              new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n              j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n              'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n              })(window,document,'script','dataLayer', 'GTM-PFNXSMJX');\n            "}),(0,i.jsx)("noscript",{children:(0,i.jsx)("iframe",{src:"https://www.googletagmanager.com/ns.html?id=GTM-PFNXSMJX",height:"0",width:"0",className:"hide"})})]}),(0,i.jsx)(jt,{children:Ct.includes(t)?(0,i.jsx)(St.Pl,{children:(0,i.jsx)(t,(0,n.Z)({},r))}):(0,i.jsx)(St.Pl,{children:(0,i.jsx)(k.fS,{children:Nt.includes(t)?(0,i.jsx)(t,(0,n.Z)({},r)):(0,i.jsx)(P,{children:(0,i.jsx)(t,(0,n.Z)({},r))})})})})]})}},715:function(e,t,r){"use strict";r.r(t);var n=r(7568),i=r(6042),s=r(7582),a=r(5893),o=r(1163),u=r(7294),c=r(444),l=r(2708),d=r(7543),f={verifyEmail:{message:"Please verify your email address.",button:"Verify",successMessage:(0,a.jsxs)(a.Fragment,{children:["Your email address has been verified!",(0,a.jsx)("br",{}),"You can now"," ",(0,a.jsx)("a",{className:"underline",href:"https://my.writefull.com/login",children:"sign in"})," ","with this account."]}),requirePassword:!1},resetPassword:{message:"Please enter a new password for your Writefull account.",button:"Save",successMessage:(0,a.jsxs)(a.Fragment,{children:["Your new password has been saved!",(0,a.jsx)("br",{}),"You can now"," ",(0,a.jsx)("a",{className:"underline",href:"https://my.writefull.com/login",children:"sign in"})," ","with your new password."]}),requirePassword:!0}};t.default=function(){var e=(0,u.useState)(!1),t=e[0],r=e[1],h=(0,u.useState)(!1),p=h[0],m=h[1],v=(0,u.useState)(null),g=v[0],y=v[1],x=(0,u.useState)(""),b=x[0],_=x[1],w=(0,o.useRouter)();if(!w.isReady)return null;var j=w.query,E=j.mode,k=j.oobCode;if(!function(e){return!(!e||Array.isArray(e))&&Object.keys(f).includes(e)}(E)||!function(e){return!!e&&!Array.isArray(e)}(k))return(0,a.jsx)("div",{className:"text-center m-10",children:"Sorry! An issue has occurred. Try restarting the process."});var S=f[E],N=function(){var e=(0,n.Z)((function(e){var t,n;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:e.preventDefault(),r(!0),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,(0,d.v_)("/api/auth/action",(0,i.Z)({},w.query,S.requirePassword?{newPassword:b}:{}),{headers:{"Content-Type":"application/json"}})];case 2:return s.sent(),m(!0),[3,5];case 3:return t=s.sent(),n=t.message,y(n||"An error occurred"),[3,5];case 4:return r(!1),[7];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,a.jsx)("div",{className:"relative flex min-h-screen flex-col justify-center overflow-hidden bg-gray-50",children:(0,a.jsx)("div",{className:"relative bg-white w-96 px-6 pb-8 pt-10 shadow-xl ring-1 ring-gray-900/5 mx-auto max-w-lg rounded-lg",children:(0,a.jsxs)("div",{className:"mx-auto max-w-md",children:[(0,a.jsx)(l.Z,{short:!1,width:"128px",height:"128px"}),(0,a.jsx)("div",{className:"divide-y divide-gray-300/50",children:(0,a.jsxs)("div",{className:"pt-8 text-base leading-6 text-gray-600",children:[!g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"mt-2",children:p?S.successMessage:S.message}),!p&&(0,a.jsxs)("form",{className:"flex flex-col relative mt-8 gap-6",onSubmit:N,children:[S.requirePassword&&(0,a.jsx)("input",{name:"password",type:"password",minLength:6,required:!0,className:"\n                            relative block w-full py-1.5 pl-3\n                            rounded-md border-0\n                            text-gray-900 sm:text-sm sm:leading-6\n                            placeholder:text-gray-400\n                            ring-1 ring-gray-300\n                            focus:ring-2 focus:ring-black focus:ring-opacity-100 focus:z-10\n                            outline-none",placeholder:"Password",value:b,onChange:function(e){var t;_(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)}}),(0,a.jsx)(c.Z,{type:"submit",loading:t,className:"text-white w-full bg-slate-900 px-3 py-2 text-sm font-normal justify-center rounded-md hover:bg-slate-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-800",children:S.button})]})]}),g]})})]})})})}},7154:function(e,t,r){"use strict";r.r(t);var n=r(6042),i=r(9396),s=r(5893),a=r(1163),o=r(7294),u=r(444),c=r(2708),l=r(3996);t.default=function(){var e=(0,a.useRouter)(),t=e.query,r=(0,l.aF)().user,d=(0,o.useState)(!1),f=d[0],h=d[1],p=(0,o.useState)(null),m=p[0],v=p[1];return(0,o.useEffect)((function(){if(r){var n,i=t.origin,s=null!==(n=null===i||void 0===i?void 0:i.toString())&&void 0!==n?n:"/account";e.replace(s)}}),[r]),(0,o.useEffect)((function(){if(e.isReady){var r=t.signInWithOverleaf,n=t.error;if("enabled"===r&&h(!0),n)v("ol-user-not-found"===n?"User not found. Please sign in with Overleaf from the Writefull for Overleaf integration.":"An error occurred. Please try again."),setTimeout((function(){v(null)}),1e4)}}),[e.isReady]),(0,s.jsx)("div",{className:"h-screen bg-gray-50",children:(0,s.jsx)("div",{className:"flex justify-center height-screen-helper",children:(0,s.jsxs)("div",{className:"flex flex-col justify-between max-w-lg p-3 m-auto",children:[(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(c.Z,{short:!0,width:"80",height:"80"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-center text-2xl text-gray-600 font-normal",children:"Welcome to Writefull"}),(0,s.jsx)("p",{className:"text-center text-xl text-gray-600 mt-2 font-light",children:"Log in with your Writefull account to continue"})]})}),(0,s.jsx)("div",{className:"flex items-center justify-between mt-8",children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-center",children:[(0,s.jsx)(u.Z,{type:"submit",onClick:function(r){r.preventDefault(),e.push({pathname:"/login",query:t})},className:"text-white flex relative bg-slate-900 px-6 py-3 font-normal justify-center rounded-md hover:bg-slate-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-800",children:"Log in"}),(0,s.jsx)(u.Z,{type:"submit",onClick:function(r){r.preventDefault(),e.push({pathname:"/signup",query:t})},className:"text-white flex relative ml-4 bg-slate-900 px-6 py-3 font-normal justify-center rounded-md hover:bg-slate-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-800",children:"Sign up"})]})}),f&&(0,s.jsx)("div",{className:"flex items-center justify-between mt-4",children:(0,s.jsx)("div",{className:"flex w-full items-center justify-center",children:(0,s.jsx)(u.Z,{type:"submit",onClick:function(r){r.preventDefault(),e.push({pathname:"/api/oauth2",query:(0,i.Z)((0,n.Z)({},t),{origin:"customer-portal",redirect:(null===t||void 0===t?void 0:t.price_id)?"plans":void 0})})},className:"text-white flex relative px-6 py-3 font-normal justify-center rounded-md  bg-overleaf-green hover:bg-overleaf-green-dark focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-800",children:"Sign in with Overleaf"})})}),m&&(0,s.jsx)("div",{className:"flex w-full items-center justify-center mt-5",children:(0,s.jsx)("p",{className:"text-pink text-center",children:m})})]})]})})})}},8268:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return u},default:function(){return c}});var n=r(5893),i=r(9008),s=r.n(i),a=r(5675),o=r.n(a);var u=!0;function c(e){var t=e.universityName,r=e.metrics;return(0,n.jsxs)("div",{id:"container",className:"bg-gray-50 font-sans flex flex-col min-h-screen font-light",children:[(0,n.jsxs)(s(),{children:[(0,n.jsx)("title",{children:"Writefull | Usage Report"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.png"})]}),(0,n.jsxs)("header",{className:"m-4 mt-32 flex flex-col items-center",children:[(0,n.jsx)(o(),{src:"/writefull-logo-dark-bg.jpeg",alt:"Writefull logo",width:100,height:100,className:"rounded-full self-center justify-self-center"}),(0,n.jsx)("div",{className:"mt-4 text-center text-xl",children:"Usage report for"}),(0,n.jsx)("div",{className:"mt-1 text-center text-3xl",children:t})]}),(0,n.jsx)("main",{className:"max-w-6xl self-center m-8 mt-12 mb-32",children:(0,n.jsx)("div",{id:"metrics",className:"grid grid-flow-row grid-cols-1 md:grid-cols-2 gap-4",children:r.map((function(e){return function(e){var t=e.value,r=e.label;return(0,n.jsxs)("div",{className:"shadow inline-block p-6 bg-white flex flex-col flex-grow flex-1",children:[(0,n.jsx)("div",{className:"text-center text-4xl font-light",children:t}),(0,n.jsx)("div",{className:"mt-2 text-center font-light uppercase",children:r})]})}(e)}))})}),(0,n.jsx)("footer",{className:"bg-gray-100 p-12 text-center flex-grow flex flex-col justify-center items-center",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:"support@writefull.com"}),(0,n.jsxs)("div",{className:"mt-2",children:["\xa92014-",(new Date).getFullYear()," Writefull. All Rights Reserved."]})]})})]})}},4072:function(e,t,r){"use strict";r.r(t);var n=r(7568),i=r(7582),s=r(5893),a=r(1163),o=r(7294),u=r(7543),c=r(3967),l=r.n(c),d=r(444),f=r(2708);t.default=function(){var e=(0,o.useState)(!1),t=e[0],r=e[1],c=(0,o.useState)(!1),h=c[0],p=c[1],m=(0,o.useState)({type:"",content:""}),v=m[0],g=m[1],y=(0,a.useRouter)().query,x=y&&y.iuid?y.iuid:"",b=function(){var e=(0,n.Z)((function(e){var t,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:e.preventDefault(),r(!0),g({}),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,(0,u.v_)("/api/accept-invitation",{iuid:x},{headers:{"Content-Type":"application/json"}})];case 2:return i.sent(),g({type:"note",content:"You have successfully joined the Writefull Premium group. Enjoy your Writefull subscription!"}),p(!0),[3,5];case 3:return t=i.sent(),n=function(e){var t="An unexpected error has occurred.";return'"INVITATION_LINK_NOT_FOUND"'===e.message&&(t="The invitation link is no longer valid."),t}(t),g({type:"error",content:n}),[3,5];case 4:return r(!1),[7];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,s.jsx)("div",{className:"flex justify-center height-screen-helper",children:(0,s.jsxs)("div",{className:"flex flex-col justify-between max-w-lg p-3 m-auto w-80 ",children:[(0,s.jsx)("div",{className:"flex justify-center pb-8 ",children:(0,s.jsx)(f.Z,{width:"64px",height:"64px"})}),(0,s.jsxs)("form",{onSubmit:b,className:"flex flex-col space-y-4",children:[(0,s.jsx)("span",{className:"text-center text-sm sm:text-base font-medium leading-none",children:"You've been invited to join a Writefull Premium group subscription"}),(0,s.jsx)("div",{className:"pt-3 pb-2 w-full flex flex-col",children:(0,s.jsx)(d.Z,{variant:"slim",type:"submit",loading:t,disabled:t||h,children:"Accept Invitation"})}),(0,s.jsx)("div",{className:l()("text-center border p-3 h-13",{"text-pink border-pink":"error"===v.type,"text-green border-green":"note"===v.type,invisible:!(v.content&&""!==v.content)}),children:v.content||"-"})]})]})})}},7491:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return j}});var n=r(7568),i=r(7582),s=r(5893),a=r(1664),o=r.n(a),u=r(1163),c=r(7294),l=r(444),d=r(1016),f=r(2708),h=r(3996),p=r(949),m=r(7543),v=r(3454),g="staging"===v.env.ENVIRONMENT?[{id:"prod_QJQRKlQmxo7aEV",label:"monthly",name:"Writefull Premium - Monthly Plan",active:!0,description:"",prices:[{id:"price_1QCie1EUsIYYEeXNVZdDBQji",active:!0,currency:"USD",interval:"month",interval_count:1,unit_amount:2060,tier:"1"},{id:"price_1QCieuEUsIYYEeXNnB7UsyoF",active:!0,currency:"EUR",interval:"month",interval_count:1,unit_amount:1752,tier:"1"},{id:"price_1PSnaIEUsIYYEeXNkQog7XON",active:!0,currency:"GBP",interval:"month",interval_count:1,unit_amount:1537,tier:"1"},{id:"price_1QCieJEUsIYYEeXNI4jAcddG",active:!0,currency:"USD",interval:"month",interval_count:1,unit_amount:721,tier:"2"},{id:"price_1PSnaIEUsIYYEeXNMbuDeXlL",active:!0,currency:"GBP",interval:"month",interval_count:1,unit_amount:1537,tier:"1",one_time_payment:!0},{id:"price_1PSnaIEUsIYYEeXNckn2gPE3",active:!0,currency:"GBP",interval:"month",interval_count:1,unit_amount:534,tier:"2",one_time_payment:!0},{id:"price_1PSnaIEUsIYYEeXNckn2gPE3",active:!0,currency:"GBP",interval:"month",interval_count:1,unit_amount:534,tier:"3",one_time_payment:!0}]},{id:"prod_QJQMNcLcILPj1e",label:"quarterly",name:"Writefull Premium - Quarterly Plan",active:!0,description:"billed as one payment of",prices:[{id:"price_1QCiZgEUsIYYEeXNEikXs1Hb",active:!0,currency:"USD",interval:"month",interval_count:3,unit_amount:1583,tier:"1",total_price:4748},{id:"price_1QCiafEUsIYYEeXNpBpm0dyo",active:!0,currency:"EUR",interval:"month",interval_count:3,unit_amount:1347,tier:"1",total_price:4039},{id:"price_1PSnVQEUsIYYEeXNeiBZ7Eip",active:!0,currency:"GBP",interval:"month",interval_count:3,unit_amount:1181,tier:"1",total_price:3543},{id:"price_1QCia1EUsIYYEeXNsAGW86iY",active:!0,currency:"USD",interval:"month",interval_count:3,unit_amount:554,tier:"2",total_price:1662},{id:"price_1PSnVQEUsIYYEeXNwSyMJW0n",active:!0,currency:"GBP",interval:"month",interval_count:3,unit_amount:1181,tier:"1",total_price:3543,one_time_payment:!0},{id:"price_1PSnVQEUsIYYEeXNzoldxgBT",active:!0,currency:"GBP",interval:"month",interval_count:3,unit_amount:410,tier:"2",total_price:1230,one_time_payment:!0},{id:"price_1PSnVQEUsIYYEeXNzoldxgBT",active:!0,currency:"GBP",interval:"month",interval_count:3,unit_amount:410,tier:"3",total_price:1230,one_time_payment:!0}]},{id:"prod_QJQ8qi2KKkCP7C",label:"yearly",name:"Writefull Premium - Annual Plan",active:!0,description:"billed as one payment of",prices:[{id:"price_1QCiF3EUsIYYEeXNJhKs8Uyj",active:!0,currency:"USD",interval:"month",interval_count:12,unit_amount:733,tier:"1",total_price:8785},{id:"price_1QCiIpEUsIYYEeXNcnhuS1oI",active:!0,currency:"EUR",interval:"month",interval_count:12,unit_amount:623,tier:"1",total_price:7474},{id:"price_1QCiKjEUsIYYEeXNQlFdPKwj",active:!0,currency:"GBP",interval:"month",interval_count:12,unit_amount:546,tier:"1",total_price:6552},{id:"price_1QCiHKEUsIYYEeXNyA5U6aP1",active:!0,currency:"USD",interval:"month",interval_count:12,unit_amount:257,tier:"2",total_price:3073},{id:"price_1PSnI5EUsIYYEeXN42ZwLRkQ",active:!0,currency:"GBP",interval:"month",interval_count:12,unit_amount:546,tier:"1",total_price:6552,one_time_payment:!0},{id:"price_1PSnI5EUsIYYEeXNMoUR0AZx",active:!0,currency:"GBP",interval:"month",interval_count:12,unit_amount:190,tier:"2",total_price:2268,one_time_payment:!0},{id:"price_1PSnI5EUsIYYEeXNMoUR0AZx",active:!0,currency:"GBP",interval:"month",interval_count:12,unit_amount:190,tier:"3",total_price:2268,one_time_payment:!0}]}]:[{id:"prod_Jo7e0i7TRYLGm9",label:"monthly",name:"Writefull Premium - Monthly Plan",active:!0,description:"",prices:[{id:"price_1QCzIeEUsIYYEeXNqvNDKfEQ",active:!0,currency:"USD",interval:"month",interval_count:1,unit_amount:2060,tier:"1"},{id:"price_1QCzJaEUsIYYEeXN35t4nRxK",active:!0,currency:"EUR",interval:"month",interval_count:1,unit_amount:1752,tier:"1"},{id:"price_1Kux55EUsIYYEeXNjLDKqFGj",active:!0,currency:"GBP",interval:"month",interval_count:1,unit_amount:1537,tier:"1"},{id:"price_1QCzIzEUsIYYEeXNXswaxrvM",active:!0,currency:"USD",interval:"month",interval_count:1,unit_amount:721,tier:"2"},{id:"price_1MIH9FEUsIYYEeXN6AeGLJRX",active:!0,currency:"GBP",interval:"month",interval_count:1,unit_amount:1537,tier:"1",one_time_payment:!0},{id:"price_1MIBCJEUsIYYEeXN6KiubGn0",active:!0,currency:"GBP",interval:"month",interval_count:1,unit_amount:534,tier:"2",one_time_payment:!0},{id:"price_1MIBCJEUsIYYEeXN6KiubGn0",active:!0,currency:"GBP",interval:"month",interval_count:1,unit_amount:534,tier:"3",one_time_payment:!0}]},{id:"prod_Jo7eMRrORERiKw",label:"quarterly",name:"Writefull Premium - Quarterly Plan",active:!0,description:"billed as one payment of",prices:[{id:"price_1QCzCEEUsIYYEeXNbgo2tJ69",active:!0,currency:"USD",interval:"month",interval_count:3,unit_amount:1583,tier:"1",total_price:4748},{id:"price_1QCzDiEUsIYYEeXNNftdfMrj",active:!0,currency:"EUR",interval:"month",interval_count:3,unit_amount:1347,tier:"1",total_price:4039},{id:"price_1L0jIuEUsIYYEeXNjmL1I4YC",active:!0,currency:"GBP",interval:"month",interval_count:3,unit_amount:1181,tier:"1",total_price:3543},{id:"price_1QCzCuEUsIYYEeXN5P2kAuwF",active:!0,currency:"USD",interval:"month",interval_count:3,unit_amount:554,tier:"2",total_price:1662},{id:"price_1MIH8UEUsIYYEeXNfOaZXnTU",active:!0,currency:"GBP",interval:"month",interval_count:3,unit_amount:1181,tier:"1",total_price:3543,one_time_payment:!0},{id:"price_1MIBEDEUsIYYEeXN92zlswfX",active:!0,currency:"GBP",interval:"month",interval_count:3,unit_amount:410,tier:"2",total_price:1230,one_time_payment:!0},{id:"price_1MIBEDEUsIYYEeXN92zlswfX",active:!0,currency:"GBP",interval:"month",interval_count:3,unit_amount:410,tier:"3",total_price:1230,one_time_payment:!0}]},{id:"prod_Jnl0VpTt6XCv7b",label:"yearly",name:"Writefull Premium - Annual Plan",active:!0,description:"billed as one payment of",prices:[{id:"price_1QDPlMEUsIYYEeXNOfie3BJM",active:!0,currency:"USD",interval:"month",interval_count:12,unit_amount:733,tier:"1",total_price:8785},{id:"price_1QDPndEUsIYYEeXNHm9u6MBV",active:!0,currency:"EUR",interval:"month",interval_count:12,unit_amount:623,tier:"1",total_price:7474},{id:"price_1KtwLcEUsIYYEeXNyOkxHwfw",active:!0,currency:"GBP",interval:"month",interval_count:12,unit_amount:546,tier:"1",total_price:6556},{id:"price_1QDQPoEUsIYYEeXNLQh3Qj85",active:!0,currency:"USD",interval:"month",interval_count:12,unit_amount:257,tier:"2",total_price:3075},{id:"price_1MIH7YEUsIYYEeXNahuziojK",active:!0,currency:"GBP",interval:"month",interval_count:12,unit_amount:546,tier:"1",total_price:6552,one_time_payment:!0},{id:"price_1MIBFGEUsIYYEeXNfSyP6IhV",active:!0,currency:"GBP",interval:"month",interval_count:12,unit_amount:190,tier:"2",total_price:2268,one_time_payment:!0},{id:"price_1MIBFGEUsIYYEeXNfSyP6IhV",active:!0,currency:"GBP",interval:"month",interval_count:12,unit_amount:190,tier:"3",total_price:2268,one_time_payment:!0}]}],y=(v.env.ENVIRONMENT,r(8582)),x=(r(3454),r(6010)),b=r(374),_=r(7507),w="6LdBGokfAAAAAEcmcCwAlHwLafiB2KsN0NbnZEZ0",j=function(){var e=(0,c.useState)(""),t=e[0],r=e[1],a=(0,c.useState)(""),v=a[0],j=a[1],E=(0,c.useState)(!1),k=E[0],S=E[1],N=(0,c.useState)(!1),A=N[0],C=N[1],I=(0,c.useState)({type:"",content:""}),T=I[0],U=I[1],R=(0,u.useRouter)(),P=R.query,O=(0,h.aF)(),L=O.session,B=O.user,Z=O.signIn,F=O.userLoaded,D=!1,M=P.callback,V=function(){var e=(0,n.Z)((function(e){return(0,i.__generator)(this,(function(t){return e.preventDefault(),C(!0),U({}),window.grecaptcha.ready((function(){window.grecaptcha.execute(w,{action:"signin"}).then(function(){var e=(0,n.Z)((function(e){var t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,(0,m.v_)("/api/verify-captcha",{recaptchaToken:e},{headers:{"Content-Type":"application/json"}})];case 1:return(t=r.sent())&&t.success&&"signin"===t.action?(D=!0,[4,W()]):[3,3];case 2:return r.sent(),[3,4];case 3:U({type:"error",content:"An unexpected error occurred."}),C(!1),r.label=4;case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}())})),[2]}))}));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=(0,n.Z)((function(){var e,r,n,s,a,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return D?(D=!1,[4,Z({email:t,password:v,rememberMe:k})]):[2];case 1:return e=i.sent(),r=e.session,(n=e.error)?(s=function(e){var t="An unexpected error has occurred.";return'"INVALID_LOGIN"'!==e.message&&"INVALID_LOGIN"!==e.message||(t="The email and password you entered don't match."),t}(n),U({type:"error",content:s}),C(!1),[3,6]):[3,2];case 2:return a={},(0,b.gB)()?(o=(0,b.IF)(),a.referral=o,[4,(0,m.v_)("/api/add-referral",{email:t,referral:o},{headers:{"Content-Type":"application/json"}})]):[3,4];case 3:i.sent(),i.label=4;case 4:return[4,(0,_.x)("login",{},a,r)];case 5:i.sent(),i.label=6;case 6:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),q=function(){var e=(0,n.Z)((function(e,t){var r,n,s,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:r=function(e){return g.filter((function(t){return t.prices.some((function(t){return t.id===e}))})).map((function(t){return Object.assign({},t).prices.filter((function(t){return t.id===e}))}))[0][0]}(e),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,(0,p.qC)({url:"/api/create-checkout-session",data:{price:r,code:t},token:L.idToken})];case 2:return n=i.sent().sessionId,[4,(0,y.d)()];case 3:return null===(s=i.sent())||void 0===s||s.redirectToCheckout({sessionId:n}),[3,5];case 4:return a=i.sent(),[2,alert(null===a||void 0===a?void 0:a.message)];case 5:return[2]}}))}));return function(t,r){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){C(!0),(0,p.Vr)("recaptcha-key","https://www.recaptcha.net/recaptcha/api.js?render=".concat(w),(function(){C(!1)}))}),[]),(0,c.useEffect)((function(){if(R.isReady&&F&&(null===B||void 0===B?void 0:B.uid)){var e=P.price_id,t=P.code;if(e&&!B.premium){q(e,t)}else{var r="/account";"x"===M&&(r="https://x.writefull.com");t&&(r+="?code=".concat(t)),R.replace(r)}}}),[null===R||void 0===R?void 0:R.isReady,F,null===B||void 0===B?void 0:B.uid]),B?(0,s.jsx)("div",{className:"h-[200px] flex flex-row justify-center items-center",children:(0,s.jsx)(d.Z,{})}):(0,s.jsx)("div",{className:"h-screen bg-gray-50",children:(0,s.jsx)("div",{className:"flex justify-center height-screen-helper",children:(0,s.jsxs)("div",{className:"flex flex-col justify-between w-full max-w-md min-w-[350px] m-auto px-4",children:[(0,s.jsx)("div",{className:"flex justify-center pb-2",children:(0,s.jsx)(f.Z,{short:!0})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-center text-2xl md:text-3xl font-bold tracking-tight text-gray-900",children:"Log in to Writefull"}),(0,s.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",(0,s.jsx)(o(),{href:"/signup",children:(0,s.jsx)("a",{onClick:function(e){e.preventDefault(),R.push({pathname:"/signup",query:P})},className:"font-medium text-gray-900 underline hover:text-gray-700",children:"create an account"})})]})]}),(0,s.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:V,children:[(0,s.jsxs)("div",{className:"-space-y-px rounded-md shadow-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email-address",className:"sr-only select-none",children:"Email address"}),(0,s.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",spellCheck:"false",required:!0,className:"relative block w-full py-1.5 pl-3\n                    rounded-t-md border-0\n                    text-gray-900 sm:text-sm sm:leading-6\n                    placeholder:text-gray-400\n                    ring-1 ring-gray-300\n                    focus:ring-2 focus:ring-gray-900 focus:ring-opacity-100 focus:z-10\n                    outline-none",placeholder:"Email address",value:t,onChange:function(e){var t;r(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"sr-only select-none",children:"Password"}),(0,s.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"\n                    relative block w-full py-1.5 pl-3\n                    rounded-b-md border-0\n                    text-gray-900 sm:text-sm sm:leading-6\n                    placeholder:text-gray-400\n                    ring-1 ring-gray-300\n                    focus:ring-2 focus:ring-black focus:ring-opacity-100 focus:z-10\n                    outline-none",placeholder:"Password",value:v,onChange:function(e){var t;j(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)}})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 rounded accent-black border-gray-300 text-gray-600 focus:ring-gray-600",checked:k,onChange:function(e){S(!k)}}),(0,s.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900 select-none",children:"Remember me"})]}),(0,s.jsx)("div",{className:"text-sm",children:(0,s.jsx)(o(),{href:"/reset-password",children:(0,s.jsx)("a",{href:"#",className:"font-medium text-gray-900 underline hover:text-gray-700",children:"Forgot your password?"})})})]}),(0,s.jsx)("div",{children:(0,s.jsx)(l.Z,{type:"submit",loading:A,className:"text-white flex relative w-full bg-slate-900 px-3 py-2 text-sm font-normal justify-center rounded-md hover:bg-slate-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-800",children:"Log in"})}),T.content&&(0,s.jsx)("div",{className:(0,x.Z)("p-3 border","error"===T.type?"text-pink border-pink":"text-green border-green"),children:T.content}),(0,s.jsx)("input",{type:"hidden",name:"remember",defaultValue:"true"})]})]})})})}},1366:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return _}});var n=r(7568),i=r(6042),s=r(9396),a=r(7582),o=r(5893),u=r(1163),c=r(7294),l=r(7543),d=r(8946),f=r(949),h=r(2708),p=r(8672),m=r(3454),v="https://www.overleaf.com",g=("".concat(v,"/oauth/authorize"),"".concat(v,"/oauth/token"),"".concat(v,"/oauth/user/info"),m.env.OVERLEAF_OAUTH2_CLIENT_ID,m.env.OVERLEAF_OAUTH2_CLIENT_SECRET,m.env.OVERLEAF_OAUTH2_CALLBACK_URL,r(6917)),y=r(7003),x=["https://www.stag-overleaf.com","https://www.overleaf.com","https://overleaf.com","https://stag-overleaf.com"],b="".concat("https://www.overleaf.com","/user/settings");function _(){var e=(0,y.Iy)(),t=e.oAuth2Status,r=e.updateOAuth2Status,m=(0,c.useState)(null),v=m[0],_=m[1],w=(0,c.useState)(null),j=w[0],E=w[1],k=(0,c.useState)(null),S=k[0],N=k[1],A=(0,c.useState)(null),C=A[0],I=A[1],T=(0,c.useState)(null),U=T[0],R=T[1],P=(0,c.useState)(null),O=P[0],L=P[1],B=(0,c.useState)(!1),Z=B[0],F=B[1],D=(0,c.useState)(!1),M=D[0],V=D[1],W=(0,c.useState)(""),q=W[0],Y=W[1],z=(0,c.useState)(0),G=z[0],K=z[1],H=(0,c.useState)({}),X=H[0],J=H[1],Q=(0,c.useState)(null),$=Q[0],ee=Q[1],te=(0,c.useRef)(0),re=(0,u.useRouter)(),ne=re.query,ie=(0,c.useCallback)((function(e){r(e),K((function(e){return e+1}))}),[]);(0,c.useEffect)((function(){if(re.isReady){var e=re.query,t=e.state,r=e.code,n=(0,f.Ei)(t);J(n),ee(r)}}),[re.isReady]);var se=(0,c.useRef)(X);(0,c.useEffect)((function(){se.current=X}),[X]);var ae=(0,c.useCallback)(function(){var e=(0,n.Z)((function(e,t){var r,n,i,s,o,u;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),d.Zs.signOut(),[4,d.Zs.signIn({email:e,password:t})];case 1:if(i=a.sent(),i.session,s=i.user,o=i.error)throw o;return(null===s||void 0===s||null===(r=s.overleaf)||void 0===r?void 0:r.id)&&s.overleaf.id!==U?(d.Zs.signOut(),E("account-already-linked"),ie("error"),V(!1),Y(""),[2]):[4,(0,l.v_)("/api/oauth2-link-accounts",{overleafId:U,email:e,overleafTokens:O},{headers:{"Content-Type":"application/json"}})];case 2:return u=a.sent(),[4,d.Zs.refreshUserData()];case 3:return a.sent(),ie("success"),_(u),"wfo"!==(null===(n=se.current)||void 0===n?void 0:n.origin)&&re.push("/account"),[3,5];case 4:return a.sent(),E("error-linking"),ie("error"),V(!1),Y(""),[3,5];case 5:return[2]}}))}));return function(t,r){return e.apply(this,arguments)}}(),[U,O]),oe=(0,c.useCallback)(function(){var e=(0,n.Z)((function(e){var t,r,n;return(0,a.__generator)(this,(function(i){return t=e.data,r=t.email,n=t.password,ae(r,n),[2]}))}));return function(t){return e.apply(this,arguments)}}(),[ae]),ue=(0,g.m)({requiresSession:!1,allowedDomains:x,customMessageHandlers:{"link-accounts":oe}}),ce=ue.isValidParent,le=ue.loading,de=ue.origin,fe=ue.isIframe,he=(0,c.useRef)(de);(0,c.useEffect)((function(){he.current=de}),[de]);var pe=(0,c.useRef)(fe);(0,c.useEffect)((function(){pe.current=fe}),[fe]),(0,c.useEffect)((function(){if(te.current!==G&&t){te.current=G;var e={type:"status_updated",data:{status:t}};"success"===t&&(e.data.session=d.Zs.session()),"error"===t&&(e.data.error=j),S&&(e.data.email=S),C&&(e.data.uuid=C),!0===pe.current&&function(e,t){window!==window.top&&t&&window.parent.postMessage(e,t)}(e,he.current)}}),[t,G]),(0,c.useEffect)((function(){var e=$;if(e&&(!(!0===pe.current)||de)){var t=se.current,r=t.origin,s=t.redirect,o=t.code,u=t.price_id,c="wfo"!==r,f=function(){var r=(0,n.Z)((function(){var r,n,f,h,p,m,v,g,y,x,b,w,j,k,S,A;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(0,l.v_)("/api/oauth2-callback",{code:e,state:(0,i.Z)({},t)},{headers:{"Content-Type":"application/json"}})];case 1:if(r=a.sent(),n=r.session,f=r.user,(null===(h=d.Zs.session())||void 0===h?void 0:h.idToken)&&d.Zs.signOut(),d.Zs.setSession(n),ie("success"),_(f),c){if("plans"===s)return p="/plans?",o&&(p+="code=".concat(o,"&")),u&&(p+="price_id=".concat(u)),p+="#select",re.push(p),[2];re.push("/account")}return[3,3];case 2:return(null===(m=a.sent())||void 0===m?void 0:m.message)?(v=m.message,g=v,"object"===typeof v&&(g=v.error),"email-not-confirmed"===g?(E("email-not-confirmed"),ie("error"),[2]):"email-already-in-use"===g?(j=null===(y=v.data)||void 0===y?void 0:y.email,k=null===(x=v.data)||void 0===x?void 0:x.overleafId,S=null===(b=v.data)||void 0===b?void 0:b.tokens,A=null===(w=v.data)||void 0===w?void 0:w.uuid,j&&k&&S?(N(j),I(A),R(k),L(S),E("email-already-in-use"),ie("error"),[2]):(E("unknown-error"),ie("error"),[2])):"tos-not-accepted"===g?(E("tos-not-accepted"),ie("error"),[2]):"user-not-found"===g?(E("uset-not-found"),ie("error"),c&&re.push("/authenticate?error=ol-user-not-found&signInWithOverleaf=enabled"),[2]):(E("unknown-error"),ie("error"),[3,3])):(E("unknown-error"),ie("error"),[2]);case 3:return[2]}}))}));return function(){return r.apply(this,arguments)}}();f()}}),[$,ce,le]);var me=function(){var e=(0,n.Z)((function(){return(0,a.__generator)(this,(function(e){return window.open(b,"_blank","noopener"),[2]}))}));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=(0,n.Z)((function(){return(0,a.__generator)(this,(function(e){return re.push({pathname:"/api/oauth2",query:(0,s.Z)((0,i.Z)({},ne),{hasAgreedToTOS:!0})}),[2]}))}));return function(){return e.apply(this,arguments)}}(),ge=function(){re.push("/authenticate?signInWithOverleaf=enabled")};if(null!==j){var ye="error-linking"===j||"account-already-linked"===j;"wfo"!==se.current.origin&&("unknown-error"===j&&setTimeout((function(){ge()}),5e3),ye&&setTimeout((function(){E("email-already-in-use")}),5e3));var xe=!q||!S||M,be=Z?"block":"hidden";return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"flex justify-center height-screen-helper",children:(0,o.jsxs)("div",{className:"flex flex-col justify-between p-3 m-auto w-96 ",children:[(0,o.jsx)("div",{className:"flex justify-center pb-8 ",children:(0,o.jsx)(h.Z,{width:"64px",height:"64px"})}),"email-not-confirmed"===j&&(0,o.jsxs)("div",{className:"w-full max-w-md",children:[(0,o.jsx)("div",{children:(0,o.jsx)("h2",{className:"text-center text-xl font-bold tracking-tight text-gray-900",children:"Confirm your primary email on Overleaf"})}),(0,o.jsxs)("form",{className:"mt-6 space-y-8",onSubmit:function(e){return e.preventDefault()},children:[(0,o.jsx)("p",{className:"px-2 text-gray-900",children:"Please confirm your primary email address on Overleaf to start using Writefull."}),(0,o.jsxs)("div",{children:[(0,o.jsx)("button",{type:"submit",className:"relative flex justify-center rounded-md w-full py-2 px-3 mt-3\n                      bg-overleaf-green hover:bg-overleaf-green-dark text-sm font-semibold\n                      text-white focus-visible:outline focus-visible:outline-2\n                      focus-visible:outline-offset-2 focus-visible:outline-slate-800",onClick:function(){me()},children:(0,o.jsx)("span",{children:"Confirm primary email"})}),(0,o.jsx)("button",{type:"submit",className:"relative flex justify-center rounded-md w-full\n                      py-2 px-3 mt-3 bg-slate-900 hover:bg-slate-800 text-sm\n                      font-semibold text-white focus-visible:outline\n                      focus-visible:outline-2 focus-visible:outline-offset-2\n                      focus-visible:outline-slate-800",onClick:function(e){e.preventDefault(),re.push("/api/oauth2")},children:(0,o.jsx)("span",{children:"I have verified my account"})}),(0,o.jsx)("button",{type:"submit",className:"relative flex justify-center rounded-md w-full\n                      py-2 px-3 mt-3 bg-white hover:bg-slate-100 text-sm\n                      font-semibold text-slate-900",onClick:function(e){e.preventDefault(),ge()},children:"Cancel"})]})]})]}),"tos-not-accepted"===j&&(0,o.jsxs)("div",{className:"w-full max-w-md",children:[(0,o.jsx)("div",{children:(0,o.jsx)("h2",{className:"text-center text-xl font-bold tracking-tight text-gray-900",children:"Accept the terms of service"})}),(0,o.jsx)("p",{className:"px-2 text-gray-900",children:"Please accept the terms of service on Overleaf to start using Writefull."}),(0,o.jsxs)("div",{children:[(0,o.jsx)("button",{type:"submit",className:"relative flex justify-center rounded-md w-full py-2 px-3 mt-3\n                    bg-overleaf-green hover:bg-overleaf-green-dark text-sm font-semibold\n                    text-white focus-visible:outline focus-visible:outline-2\n                    focus-visible:outline-offset-2 focus-visible:outline-slate-800",onClick:function(){ve()},children:(0,o.jsx)("span",{children:"Accept terms of service"})}),(0,o.jsx)("button",{type:"submit",className:"relative flex justify-center rounded-md w-full py-2 px-3 mt-3\n                    bg-slate-900 hover:bg-slate-800 text-sm font-semibold text-white\n                    focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2\n                    focus-visible:outline-slate-800",onClick:function(e){e.preventDefault(),ge()},children:(0,o.jsx)("span",{children:"Cancel"})})]})]}),("email-already-in-use"===j||ye)&&(0,o.jsxs)("div",{className:"w-full max-w-md",children:[(0,o.jsx)("div",{children:(0,o.jsx)("h2",{className:"text-center text-xl font-bold tracking-tight text-gray-900",children:"Link your Writefull and Overleaf accounts"})}),(0,o.jsxs)("form",{className:"mt-6 space-y-8",onSubmit:function(e){return e.preventDefault()},children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{className:"text-ellipsis overflow-hidden",children:["You can link your Writefull and Overleaf accounts associated with",Z?(0,o.jsx)("span",{children:"\xa0your account"}):(0,o.jsxs)("span",{children:["\xa0the email ",(0,o.jsx)("b",{children:S})]}),"."]}),!Z&&(0,o.jsx)("a",{href:"#",className:"underline hover:no-underline text-slate-900 text-sm",onClick:function(){N(""),F(!0)},children:"Use a different account"}),(0,o.jsx)("p",{className:"text-ellipsis overflow-hidden mt-2",children:"By linking your accounts, you will be able to sign in to Writefull using your Overleaf account."})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:be,children:[(0,o.jsx)("label",{htmlFor:"email-address",className:"sr-only select-none",children:"Email address"}),(0,o.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",spellCheck:"false",required:!0,className:"relative block w-full py-1.5 pl-3 rounded-t-md border-0\n                      text-gray-900 sm:text-sm sm:leading-6 placeholder:text-gray-400\n                        ring-1 ring-gray-300 focus:ring-2 focus:ring-gray-900\n                        focus:ring-opacity-100 focus:z-10 outline-none",placeholder:"Email address",value:S,onChange:function(e){N(e.target.value)}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"password",className:"sr-only select-none",children:"Password"}),(0,o.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"relative block w-full py-1.5 pl-3\n                        rounded-b-md border-0 text-gray-900 sm:text-sm sm:leading-6\n                        placeholder:text-gray-400 ring-1 ring-gray-300 focus:ring-2\n                        focus:ring-black focus:ring-opacity-100 focus:z-10 outline-none",placeholder:"Password",value:q,onChange:function(e){Y(e.target.value)}})]}),ye&&(0,o.jsx)("div",{children:(0,o.jsxs)("p",{className:"text-red text-sm mt-2",children:["error-linking"===j&&"We were unable to sign you in with Overleaf. Please make sure you entered the correct email and password.","account-already-linked"===j&&"This account is already linked to another Overleaf account."]})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("button",{type:"submit",className:"relative flex justify-center rounded-md w-full py-2 px-3 mt-3\n                      bg-slate-900 hover:bg-slate-800 text-sm font-semibold text-white\n                      focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2\n                      focus-visible:outline-slate-800",disabled:xe,onClick:function(){V(!0),ae(S,q)},children:M?(0,o.jsx)(p.Z,{size:"sm"}):(0,o.jsx)("span",{children:"Link accounts"})}),(0,o.jsx)("button",{type:"submit",className:"relative flex justify-center rounded-md w-full py-2 px-3 mt-3\n                      bg-white hover:underline hover:bg-slate-100 text-sm font-semibold text-slate-900",onClick:function(e){e.preventDefault(),ge()},children:"Cancel"})]})]})]}),"unknown-error"===j&&(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h1",{children:"Unknown error"}),(0,o.jsx)("p",{children:"Redirecting to login page..."}),(0,o.jsx)("div",{children:(0,o.jsx)("a",{href:"/authenticate?signInWithOverleaf=enabled",children:"Go back"})})]})]})})})}return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"flex justify-center height-screen-helper",children:(0,o.jsxs)("div",{className:"flex flex-col justify-between p-3 m-auto w-96 ",children:[(0,o.jsx)("div",{className:"flex justify-center pb-8 ",children:(0,o.jsx)(h.Z,{width:"64px",height:"64px"})}),!v&&(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)(p.Z,{size:"lg"})})]})})})}},2743:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var n=r(5893),i=r(1163),s=r(7294),a=r(6917);function o(){var e=(0,a.m)({allowedDomains:["https://overleaf.com","https://www.overleaf.com","https://stag-overleaf.com","https://www.stag-overleaf.com"],requiresSession:!1}),t=e.loading,r=e.isIframe,o=e.isValidParent,u=e.origin,c=(0,i.useRouter)();return(0,s.useEffect)((function(){if(c.isReady&&r&&o&&!t&&u){var e=c.query.state;e?window.parent.postMessage({type:"overleaf_authorize",data:{state:e}},u):window.parent.postMessage({type:"status_updated",data:{status:"error",error:"unknown-error"}},u)}}),[c.isReady,u,r,o,t]),(0,n.jsx)("div",{children:(0,n.jsx)("h1",{children:"Redirecting to Overleaf..."})})}},3298:function(e,t,r){"use strict";r.r(t);var n=r(7568),i=r(6042),s=r(9396),a=r(7582),o=r(5893),u=r(1664),c=r.n(u),l=r(1163),d=r(7294),f=r(2708),h=r(374),p=r(7507),m="https://chrome.google.com/webstore/detail/writefull-for-overleaf/edhnemgfcihjcpfhkoiiejgedkbefnhg?hl=en",v=function(e){return"plans"===e?{url:"/plans?origin=wfo",description:"Redirecting to the plans page...",acceptCode:!0,hasAnchor:!0,anchor:"select"}:"wfo-landing"===e?{url:"https://writefull.com/writefull-for-overleaf-integration",description:"Redirecting to the Writefull for Overleaf page...",acceptCode:!1,hasAnchor:!1}:{url:m,description:"Redirecting to the Chrome Store...",acceptCode:!1,hasAnchor:!1}},g=v();t.default=function(){var e=(0,d.useState)(g),t=e[0],r=e[1],u=(0,l.useRouter)(),y=u.query,x=y.code,b=y.redirect;return(0,d.useEffect)((function(){if(u.isReady){var e=Array.isArray(b)?b[0]:b;e&&(g=v(e),r(g));var t=null===localStorage||void 0===localStorage?void 0:localStorage.getItem("writefull.auth"),o=null,c="unregistered";if(t&&"string"===typeof t){var l,d,f=JSON.parse(t);if(null===f||void 0===f||null===(l=f.currentSession)||void 0===l?void 0:l.uid)o=f.currentSession,c=(null===(d=o.user)||void 0===d?void 0:d.premium)?"premium":"registered"}if(!(0,h.gB)()){var y=Array.isArray(x)?x[0]:x,_="unregistered";(null===o||void 0===o?void 0:o.user)&&(_=o.user.premium?"premium":"registered"),(0,h.Cz)(_,y)}var w=(0,h.IF)(),j=function(){var e=(0,n.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,p.x)("overleaf-invite",{},(0,s.Z)((0,i.Z)({},w),{currentState:c,redirect:b,code:x}),o)];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}();j(),setTimeout((function(){var e=null===g||void 0===g?void 0:g.url;e&&!0===(null===g||void 0===g?void 0:g.acceptCode)&&x&&(e="".concat(null===g||void 0===g?void 0:g.url,"&code=").concat(x)),(null===g||void 0===g?void 0:g.hasAnchor)&&(e="".concat(e,"#").concat(null===g||void 0===g?void 0:g.anchor)),function(e){window.location.href=e}(e||m)}))}}),[u.isReady]),(0,o.jsx)(o.Fragment,{children:u.isReady&&(0,o.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen py-2",children:(0,o.jsxs)("main",{className:"flex flex-col items-center justify-center flex-1 px-10 text-center",children:[(0,o.jsx)(f.Z,{short:!0}),(0,o.jsx)("h1",{className:"text-2xl pt-4 text-gray-900",children:t.description}),(0,o.jsx)(c(),{href:t.url,children:(0,o.jsx)("a",{className:"font-medium text-gray-900 underline hover:text-gray-700",children:"Click here if you are not redirected automatically."})})]})})})}},9297:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return P}});var n=r(7568),i=r(6042),s=r(9396),a=r(603),o=r(7582),u=r(5893),c=r(9008),l=r.n(c),d=r(7294),f=r(3967),h=r.n(f),p=r(1163),m=r(4624),v=r(4245),g=r(433),y=r(6917),x=r(8672);function b(){return(0,u.jsx)("span",{className:"inline-flex h-6 items-center",children:(0,u.jsx)("svg",{viewBox:"0 0 15 15","aria-hidden":"true",className:"size-[0.9375rem] shrink-0 fill-gray-950/25",children:(0,u.jsx)("path",{clipRule:"evenodd",d:"M8 0H7v7H0v1h7v7h1V8h7V7H8V0z"})})})}function _(e){var t=e.text,r=e.available,n=void 0===r||r;return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("li",{"data-disabled":n?void 0:"true",className:"flex items-start gap-4 text-sm/6 text-gray-950/75 data-[disabled]:text-gray-950/25",children:[(0,u.jsx)(b,{}),t]})})}function w(e){var t=e.title,r=e.subtitle,n=e.children;return(0,u.jsx)("div",{className:"-m-2 grid grid-cols-1 rounded-4xl ring-0 ring-black/5 w-full",children:(0,u.jsx)("div",{className:"grid grid-cols-1 p-2",children:(0,u.jsxs)("div",{className:"rounded-3xl bg-white p-10 pb-9 shadow-md ring-1 ring-black/5",children:[(0,u.jsx)("h2",{className:"font-mono text-xs/5 font-semibold uppercase tracking-widest text-gray-500 data-[dark]:text-gray-400",children:t}),(0,u.jsx)("p",{className:"mt-2 text-sm/6 text-gray-950/75",children:r}),n]})})})}function j(e){var t=e.open;return(0,u.jsx)("svg",{className:h()("h-5 w-5 text-gray-500 duration-200",t?"transform rotate-180":""),viewBox:"0 0 20 20",fill:"currentColor",children:(0,u.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})}function E(e){var t=e.question,r=e.children,n=(0,d.useState)(!1),i=n[0],s=n[1];return(0,u.jsxs)("div",{className:"border-b border-gray-200 py-4",children:[(0,u.jsxs)("div",{className:"flex w-full items-center justify-between text-left cursor-pointer",onClick:function(){s(!i)},children:[(0,u.jsx)("span",{className:"text-lg font-medium text-gray-900",children:t}),(0,u.jsx)(j,{open:i})]}),i&&(0,u.jsxs)("p",{className:"mt-2 text-gray-600",children:[r," "]})]})}function k(){var e=function(e){window.open(e,"_blank")};return(0,u.jsx)("div",{className:"mt-4 bg-gray-50 py-6 px-4 sm:px-6 lg:px-8",children:(0,u.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,u.jsx)("h2",{className:"text-3xl font-normal text-center text-gray-900 mb-8",children:"Need more info? We're here to help."}),(0,u.jsxs)("div",{className:"bg-white rounded-3xl shadow-sm p-6",children:[(0,u.jsxs)(E,{question:"What\u2019s included in the Free plan?",children:["The Free plan offers a limited number of language edits a day, restricted use of the writing features (to paraphrase, change style, explain or summarize, and more), and limited access to TeXGPT and the LaTeX generation options. You're notified when you've hit your daily limit.",(0,u.jsx)("br",{}),"Please note that limits might change daily so that we can maintain certain levels of quality of service."]}),(0,u.jsx)(E,{question:"Do I get different language edits if I upgrade to Premium?",children:"Both the Free and Premium plans let you choose the language model that revises your text: Writefull\u2019s model, which is ideal for research writing in English, or GPT, which works with any language or text type. With the Free plan, you get a limited number of edits each day, but Premium gives you unlimited access. Plus, when you upgrade to Premium, you can add custom prompts to GPT, giving you more control over how your text is revised."}),(0,u.jsx)(E,{question:"What does the 'custom prompt for GPT language edits' mean?",children:"With this feature, you can give the GPT model specific instructions on how to revise your text. For example, you can ask it to keep certain terms unchanged, make your writing more assertive, or focus only on essential language corrections. It\u2019s a great way to tailor the edits to your needs! This option is available with the Premium plan."}),(0,u.jsx)(E,{question:"What is the 'Supercomplete' feature?",children:"The 'Supercomplete' feature will make your writing even more efficient by completing your sentences and LaTeX code when prompted. This will be a fully Premium feature. Stay tuned for its release!"}),(0,u.jsx)(E,{question:"What other features are likely to come?",children:"We have a long list of upcoming features! Two of these are translation and diagram generation using TikZ."}),(0,u.jsx)(E,{question:"I already pay for Overleaf. Do I still need Writefull Premium?",children:"Yes, Writefull and Overleaf have integrated, but are two separate services with their own subscriptions."}),(0,u.jsxs)(E,{question:"Do you offer group discounts?",children:["We do! Go"," ",(0,u.jsx)("a",{className:"border-b-2 border-[gold]",href:"#",onClick:function(t){e("https://my.writefull.com/group-license"),t.preventDefault()},children:"here"})," ","to calculate pricing depending on your group size. Select a plan and invite others to join."]}),(0,u.jsx)("div",{className:"mt-8 text-sm text-gray-600",children:(0,u.jsx)("p",{children:"* Fair usage policy applies."})})]}),(0,u.jsx)("div",{className:"mt8 bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 rounded-3xl",children:(0,u.jsxs)("div",{className:"max-w-3xl mx-auto text-center",children:[(0,u.jsx)("h2",{className:"text-lg font-regular text-gray-900 mb-4",children:"Do you still have questions?"}),(0,u.jsx)("a",{href:"#",className:"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-gray-900 hover:bg-gray-800 transition-colors duration-300",onClick:function(t){e("mailto:support@writefull.com"),t.preventDefault()},children:"Contact Us"})]})})]})})}function S(e){var t=e.intervals,r=e.current,n=e.onSelect,i=t.length<2?"invisible":"";return(0,u.jsx)("div",{className:"flex justify-center",children:(0,u.jsx)("div",{className:"inline-flex items-center rounded-full bg-gray-100 p-1 ".concat(i),children:t.map((function(e){return(0,u.jsx)("button",{className:h()("px-4 py-2 text-sm font-medium rounded-full transition-colors duration-200 text-gray-500 hover:text-gray-900",e.interval===r?"text-gray-900 hover:text-gray-900 bg-white shadow-sm":"text-gray-500 hover:text-gray-900"),onClick:function(){return n(e.interval)},children:e.title},e.interval)}))})})}function N(e){var t=e.price,r=e.currency;return t&&r?(0,u.jsx)("div",{className:"flex items-center",children:(0,u.jsxs)("div",{className:"mt-2 flex items-center gap-4",children:[(0,u.jsx)("div",{className:"text-5xl font-medium text-gray-950",children:t}),(0,u.jsxs)("div",{className:"text-sm/5 text-gray-950/75",children:[(0,u.jsx)("p",{children:r}),(0,u.jsx)("p",{children:"per month"})]})]})}):null}var A=r(1968),C=r(4884);function I(e){var t=e.intervals,r=e.visibleBillingIntervalCount,n=e.setVisibleBillingIntervalCount,i=e.visiblePrice,s=e.currency,a=e.isFreemiumPlan,o=void 0!==a&&a;return(0,u.jsxs)("div",{className:"flex-col h-[12rem] content-end",children:[o&&(0,u.jsx)("div",{className:"mb-4",children:(0,u.jsx)("span",{className:"inline-flex items-center justify-center px-4 py-[calc(theme(spacing.2)-1px)] rounded-full bg-white border-gray-500 border-2 whitespace-nowrap text-base font-normal text-gray-500 data-[disabled]:bg-gray-950 data-[hover]:bg-gray-800 opacity-90",children:"Your current plan"})}),!o&&(0,u.jsx)("div",{className:"mt-2",children:(0,u.jsx)(S,{intervals:t,current:r,onSelect:n})}),(0,u.jsx)("div",{className:"flex",children:(0,u.jsx)("div",{className:h()("flex items-center",(null===i||void 0===i?void 0:i.hasPriceDiscount)?"mt-1":"mt-8"),children:(0,u.jsxs)("div",{className:"mt-2 flex items-center gap-4",children:[(0,u.jsx)("div",{className:h()("",(null===i||void 0===i?void 0:i.hasPriceDiscount)?"font-light line-through text-3xl text-gray-400":"font-medium text-5xl text-gray-950"),children:o?(0,g.w)(0,s,"ceil",0):"".concat(null===i||void 0===i?void 0:i.unitPriceUnits,".").concat(null===i||void 0===i?void 0:i.unitPriceCents)}),(null===i||void 0===i?void 0:i.hasPriceDiscount)?(0,u.jsxs)(C.Z,{type:"primary",style:"rounded-shadow",children:[100*i.appliedDiscount,"% off!"]}):(0,u.jsxs)("div",{className:"text-sm/5 text-gray-950/75",children:[(0,u.jsx)("p",{children:s}),(0,u.jsx)("p",{children:"per month"})]})]})})}),(null===i||void 0===i?void 0:i.hasPriceDiscount)&&(0,u.jsx)(N,{price:"".concat(null===i||void 0===i?void 0:i.discountedPriceUnits,".").concat(null===i||void 0===i?void 0:i.discountedPriceCents),currency:s}),(0,u.jsxs)("p",{className:"font-extralight mt-2 text-gray-500 h-[20px]",children:[!o&&1!==r&&!0===(null===i||void 0===i?void 0:i.hasPriceDiscount)&&"billed as one payment of ".concat(null===i||void 0===i?void 0:i.totalDiscountPrice,".").concat(null===i||void 0===i?void 0:i.totalDiscountPriceCents),!o&&1!==r&&!0!==(null===i||void 0===i?void 0:i.hasPriceDiscount)&&"billed as one payment of ".concat(null===i||void 0===i?void 0:i.totalPrice,".").concat(null===i||void 0===i?void 0:i.totalPriceCents)]})]})}function T(){return(0,u.jsxs)("div",{className:"w-full h-[750px] flex justify-center items-center",children:[(0,u.jsx)("div",{className:"inset-x-2 bottom-0 top-0 rounded-4xl ring-1 ring-inset ring-black/5 bg-[linear-gradient(115deg,var(--tw-gradient-stops))] sm:bg-[linear-gradient(145deg,var(--tw-gradient-stops))]"}),(0,u.jsx)("div",{className:"relative px-6 lg:px-8",children:(0,u.jsx)("div",{className:"mx-auto max-w-2xl lg:max-w-7xl",children:(0,u.jsx)(x.Z,{size:"xl"})})})]})}var U=[{interval:1,title:"Monthly"},{interval:3,title:"Quarterly"},{interval:12,title:"Yearly"}],R={EOY24:{validIntervals:[1],visibleInterval:1,onlyTier1Prices:!0}};function P(){var e,t=(0,p.useRouter)(),r=(0,d.useState)(12),c=r[0],f=r[1],x=(0,d.useState)(U),b=x[0],j=x[1],E=(0,d.useState)(),S=E[0],N=E[1],C=(0,d.useState)(),P=C[0],O=C[1],L=(0,m.Z)({isRouterReady:t.isReady,discountCode:t.query.code,onlyTier1Prices:null===(e=R[t.query.campaign])||void 0===e?void 0:e.onlyTier1Prices}),B=L.products,Z=L.currency,F=(0,d.useState)(),D=F[0],M=F[1],V=(0,v.Z)({priceLoading:N}).handleCheckout;(0,d.useEffect)((function(){(0,A.L)("page-viewed","plans",{source:"wfo"})}),[]),(0,d.useEffect)((function(){var e;if(t.isReady){var r=null===(e=t.query)||void 0===e?void 0:e.campaign;if(r&&R[r]){var n=R[r],i=n.validIntervals,s=n.visibleInterval;i&&(f(null!==s&&void 0!==s?s:i[i.length-1]),j(U.filter((function(e){var t=e.interval;return i.includes(t)}))))}}}),[t.isReady]);var W=(0,y.m)({requiresSession:!0,allowedDomains:["https://www.stag-overleaf.com","https://www.overleaf.com","https://overleaf.com","https://stag-overleaf.com"]}),q=W.isValidParent,Y=W.loading,z=(0,d.useCallback)((0,n.Z)((function(){var e,r,n,i;return(0,o.__generator)(this,(function(s){switch(s.label){case 0:return D&&t.isReady?(e=t.query.currentUrl,r=-1!==(null===e||void 0===e?void 0:e.indexOf("?"))?"&":"?",n=e?"".concat(e).concat(r,"writefullCheckoutCompleted=true"):void 0,i=e?"".concat(e).concat(r,"writefullCheckoutCanceled=true"):void 0,[4,V(D,n,i)]):[2];case 1:return s.sent(),[2]}}))})),[D,V,t.isReady]);return(0,d.useEffect)((function(){var e,t=null===(e=null===B||void 0===B?void 0:B.map((function(e){return e.prices})))||void 0===e?void 0:e.filter((function(e){return void 0!==e})).find((function(e){return e&&e.length>0&&e[0].interval_count===c}));if(t&&0!==t.length){var r=t[0];O({appliedDiscount:void 0,discountedPriceCents:"",discountedPriceUnits:"0",hasPriceDiscount:!1,id:"",totalDiscountPrice:"0",totalDiscountPriceCents:"",totalPrice:"0",totalPriceCents:"",unitPriceCents:"",unitPriceUnits:"0"});var n=(0,a.Z)((0,g.j)(r.total_price,r.currency),2),o=n[0],u=n[1],l=(0,a.Z)((0,g.j)(r.total_discounted_price,r.currency),2),d=l[0],f=l[1],h=(0,a.Z)((0,g.j)(r.unit_amount,r.currency,"ceil"),2),p=h[0],m=h[1],v=(0,a.Z)((0,g.j)(r.unit_discounted_amount,r.currency,"ceil"),2),y=v[0],x=v[1],b=void 0!==r.applied_discount&&0!==r.applied_discount;M((0,s.Z)((0,i.Z)({},r),{appliedDiscount:r.applied_discount,totalPrice:o,totalPriceCents:u,totalDiscountPrice:d,totalDiscountPriceCents:f,unitPriceUnits:p,unitPriceCents:m,discountedPriceUnits:y,discountedPriceCents:x,hasPriceDiscount:b}))}}),[c,B]),Y?(0,u.jsx)(T,{}):q?B?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(l(),{children:(0,u.jsx)("meta",{name:"ROBOTS",content:"NOINDEX"})}),(0,u.jsxs)("div",{className:"relative pt-2",children:[(0,u.jsx)("div",{className:"inset-x-2 bottom-0 top-0 rounded-4xl ring-1 ring-inset ring-black/5 bg-[linear-gradient(115deg,var(--tw-gradient-stops))] sm:bg-[linear-gradient(145deg,var(--tw-gradient-stops))]"}),(0,u.jsx)("div",{className:"relative px-6 lg:px-8",children:(0,u.jsx)("div",{className:"mx-auto max-w-xl lg:max-w-7xl",children:(0,u.jsxs)("div",{className:"flex flex-col-reverse lg:flex-row lg: justify-center gap-8",children:[(0,u.jsxs)(w,{title:"FREE",subtitle:"Basic access to Writefull",children:[(0,u.jsx)(I,{isFreemiumPlan:!0,intervals:b,visibleBillingIntervalCount:void 0,setVisibleBillingIntervalCount:f,visiblePrice:P,currency:Z}),(0,u.jsxs)("div",{className:"mt-8",children:[(0,u.jsx)("h3",{className:"text-sm/6 font-medium text-gray-950",children:"Features:"}),(0,u.jsxs)("ul",{className:"mt-3 space-y-3",children:[(0,u.jsx)(_,{text:"Limited language edits"}),(0,u.jsx)(_,{text:"Limited usage of writing features"}),(0,u.jsx)(_,{text:"Limited usage of TeXGPT"}),(0,u.jsx)(_,{text:"Custom prompt for GPT language edits",available:!1}),(0,u.jsx)(_,{text:"Supercomplete (coming soon)",available:!1}),(0,u.jsx)(_,{text:"Priority access to new Writefull features",available:!1})]})]})]}),(0,u.jsxs)(w,{title:"WRITEFULL PREMIUM",subtitle:"All of Writefull unlocked",children:[(0,u.jsx)(I,{isFreemiumPlan:!1,intervals:b,visibleBillingIntervalCount:c,setVisibleBillingIntervalCount:f,visiblePrice:D,currency:Z}),(0,u.jsxs)("div",{className:"mt-8",children:[(0,u.jsx)("h3",{className:"text-sm/6 font-medium text-gray-950",children:"Features:"}),(0,u.jsxs)("ul",{className:"mt-3 space-y-3",children:[(0,u.jsx)(_,{text:"Unlimited language edits*"}),(0,u.jsx)(_,{text:"Unlimited usage of writing features*"}),(0,u.jsx)(_,{text:"Unlimited usage of TeXGPT"}),(0,u.jsx)(_,{text:"Custom prompt for GPT language edits"}),(0,u.jsx)(_,{text:"Supercomplete (coming soon)"}),(0,u.jsx)(_,{text:"Priority access to new Writefull features"})]})]}),(0,u.jsx)("button",{className:h()("mt-8 px-6 py-3 text-lg font-semibold w-full","text-gray-950 bg-[gold] rounded-2xl hover:shadow-md transition-all duration-300","disabled:opacity-50 disabled:cursor-not-allowed"),disabled:!D||S===D.id,onClick:z,children:D&&S===D.id?(0,u.jsx)("span",{children:"Redirecting..."}):(0,u.jsx)("span",{children:"Select Writefull plan"})}),(0,u.jsxs)("div",{className:"mt-4 text-center font-extralight",children:["Looking for"," ",(0,u.jsx)("a",{className:"border-b-2 border-[gold]",onClick:function(){window.open("https://my.writefull.com/group-license","_blank")},href:"#",children:"group licenses"}),"?"]})]})]})})})]}),(0,u.jsx)(k,{})]}):(0,u.jsx)("div",{children:(0,u.jsx)(T,{})}):(0,u.jsx)(u.Fragment,{})}},9260:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var n=r(7568),i=r(7582),s=r(5893),a=r(7294),o=r(444),u=r(2708),c=r(3996),l=r(1163),d=r(7543),f="Please enter your email address to reset your password.",h="If you have a Writefull account registered with the email address you entered, you will now receive instructions to reset your password.";function p(){var e=(0,a.useState)(""),t=e[0],r=e[1],p=(0,a.useState)(null),m=p[0],v=p[1],g=(0,a.useState)(!1),y=g[0],x=g[1],b=(0,a.useState)(!1),_=b[0],w=b[1],j=(0,a.useState)(null),E=j[0],k=j[1],S=(0,c.aF)().resetPasswordForEmail,N=(0,l.useRouter)();if((0,a.useEffect)((function(){if(m){var e=function(){var e=(0,n.Z)((function(){var e;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,d.v_)("/api/user",{uuid:m},{headers:{"Content-Type":"application/json"}})];case 1:return(e=t.sent().email)&&r(e),[3,3];case 2:return t.sent(),[3,3];case 3:return x(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}}),[m]),!N.isReady)return null;var A=N.query,C=A.t,I=A.e;if(C&&!m)return v(C),null;if(I&&!t)return r(I),null;var T=function(){var e=(0,n.Z)((function(e){return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return e.preventDefault(),x(!0),[4,S(t)];case 1:return r.sent()?k(h):w(!0),x(!1),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,s.jsx)("div",{className:"relative flex min-h-screen flex-col justify-center overflow-hidden bg-gray-50",children:(0,s.jsx)("div",{className:"relative bg-white w-96 px-6 pb-8 pt-10 shadow-xl ring-1 ring-gray-900/5 mx-auto max-w-lg rounded-lg",children:(0,s.jsxs)("div",{className:"mx-auto max-w-md",children:[(0,s.jsx)(u.Z,{short:!1,width:"128px",height:"128px"}),(0,s.jsx)("div",{className:"divide-y divide-gray-300/50",children:(0,s.jsxs)("div",{className:"pt-8 text-base leading-6 text-gray-600",children:[!E&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"mt-2",children:_?(0,s.jsxs)(s.Fragment,{children:["You can now follow the instructions sent to ",(0,s.jsx)("b",{children:t})," to reset your password."]}):f}),!_&&(0,s.jsxs)("form",{className:"flex flex-col relative mt-8 gap-6",onSubmit:T,children:[(0,s.jsx)("input",{type:"email",placeholder:"Email",value:t,required:!0,className:"\n                          relative block w-full py-1.5 pl-3\n                          rounded-md border-0\n                          text-gray-900 sm:text-sm sm:leading-6\n                          placeholder:text-gray-400\n                          ring-1 ring-gray-300\n                          focus:ring-2 focus:ring-black focus:ring-opacity-100 focus:z-10\n                          outline-none",onChange:function(e){var t;r(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)}}),(0,s.jsx)(o.Z,{type:"submit",loading:y,disabled:!t.length,className:"text-white w-full bg-slate-900 px-3 py-2 text-sm font-normal justify-center rounded-md hover:bg-slate-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-800",children:"Continue"})]})]}),E&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:E}),(0,s.jsx)("br",{}),(0,s.jsx)("p",{children:(0,s.jsxs)("span",{children:["If you don't have a Writefull account yet, please ",(0,s.jsx)("a",{className:"underline font-semibold",href:"https://my.writefull.com/signup",children:"create one here"}),"."]})}),(0,s.jsx)("br",{}),(0,s.jsx)("p",{children:(0,s.jsxs)("span",{children:["If you have an account but are not receiving the password reset email, please check your spam folder or contact us at ",(0,s.jsx)("a",{className:"underline font-semibold",href:"mailto:support@writefull.com",children:"support@writefull.com"}),"."]})})]})]})})]})})})}},605:function(e,t,r){"use strict";r.r(t);var n=r(7568),i=r(7582),s=r(5893),a=r(9008),o=r.n(a),u=r(7294),c=r(3996),l=r(8946),d="https://x.writefull.com";t.default=function(){var e=(0,c.aF)(),t=e.session,r=e.signOut,a=e.refreshUserData,f=e.resendVerificationEmail,h=function(){var e=(0,n.Z)((function(e){var t,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e.origin!==d?[2]:(t=e.data.action,n=l.Zs.session(),"logout"!==t?[3,1]:(r(),[3,6]));case 1:return"refresh-user-data"!==t?[3,4]:n&&n.idToken?[4,a(n.idToken)]:[3,3];case 2:i.sent(),window.parent.postMessage(l.Zs.session(),d),i.label=3;case 3:return[3,6];case 4:return"resend-verification-email"!==t?[3,6]:n&&n.email?[4,f(n.email)]:[3,6];case 5:i.sent(),i.label=6;case 6:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){return window.addEventListener("message",h),function(){window.removeEventListener("message",h)}}),[]),(0,u.useEffect)((function(){window.parent.postMessage(l.Zs.session(),d)}),[t,null===t||void 0===t?void 0:t.idToken]),(0,s.jsx)(o(),{children:(0,s.jsx)("meta",{name:"ROBOTS",content:"NOINDEX"})})}},4347:function(e,t,r){"use strict";r.r(t);var n=r(7568),i=r(7582),s=r(5893),a=r(1664),o=r.n(a),u=r(1163),c=r(7294),l=r(444),d=r(2708),f=r(3996),h=r(949),p=r(7543),m=(r(3454),r(6010)),v=r(374),g=r(7507),y="6LdBGokfAAAAAEcmcCwAlHwLafiB2KsN0NbnZEZ0";t.default=function(){var e=(0,c.useState)(null),t=e[0],r=e[1],a=(0,c.useState)(""),x=a[0],b=a[1],_=(0,c.useState)(""),w=_[0],j=_[1],E=(0,c.useState)(!1),k=E[0],S=E[1],N=(0,c.useState)(""),A=(N[0],N[1],(0,c.useState)(!1)),C=A[0],I=A[1],T=(0,c.useState)({type:"",content:""}),U=T[0],R=T[1],P=(0,u.useRouter)(),O=P.query,L=(0,f.aF)(),B=L.signUp,Z=L.user,F=!1,D=O.callback,M=function(){var e=(0,n.Z)((function(e){return(0,i.__generator)(this,(function(t){return e.preventDefault(),I(!0),R({}),window.grecaptcha.ready((function(){window.grecaptcha.execute(y,{action:"signup"}).then(function(){var e=(0,n.Z)((function(e){var t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,(0,p.v_)("/api/verify-captcha",{recaptchaToken:e},{headers:{"Content-Type":"application/json"}})];case 1:return(t=r.sent())&&t.success&&"signup"===t.action?(F=!0,[4,V()]):[3,3];case 2:return r.sent(),[3,4];case 3:R({type:"error",content:"An unexpected error occurred."}),I(!1),r.label=4;case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}())})),[2]}))}));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=(0,n.Z)((function(){var e,t,n,s,a,o,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return F?(F=!1,[4,B({email:x,password:w})]):[2];case 1:return e=i.sent(),t=e.error,n=e.user,s=e.session,t?(a=function(e){var t="An unexpected error has occurred.";return'"EMAIL_ALREADY_EXISTS"'!==e.message&&"EMAIL_ALREADY_EXISTS"!==e.message||(t="This email address is already in use by another account."),'"INVALID_PASSWORD"'!==e.message&&"INVALID_PASSWORD"!==e.message||(t="Please use a password with at least 6 characters."),t}(t),R({type:"error",content:a}),[3,9]):[3,2];case 2:return n?(r(n),o={},(0,v.gB)()?(u=(0,v.IF)(),o.referral=u,[4,(0,p.v_)("/api/add-referral",{email:n.email,referral:u},{headers:{"Content-Type":"application/json"}})]):[3,4]):[3,8];case 3:i.sent(),i.label=4;case 4:return[4,(0,g.x)("signup",{},o,s)];case 5:return i.sent(),k?[4,(0,p.v_)("/api/email-subscription/subscribe",{source:"CustomerPortal_SignUp"},{headers:{"Content-Type":"application/json",token:null===s||void 0===s?void 0:s.idToken}})]:[3,7];case 6:i.sent(),i.label=7;case 7:return[3,9];case 8:R({type:"note",content:"Check your email for the confirmation link."}),i.label=9;case 9:return I(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){I(!0),(0,h.Vr)("recaptcha-key","https://www.recaptcha.net/recaptcha/api.js?render=".concat(y),(function(){I(!1)}))}),[]),(0,c.useEffect)((function(){if(t||Z){var e="/account?";if("x"===D)e="https://x.writefull.com";else{var r=O.price_id,n=O.code;r&&(e+="&price_id="+r),n&&(e+="&code="+n)}P.replace(e)}}),[t,Z]),(0,s.jsx)("div",{className:"h-screen bg-gray-50",children:(0,s.jsx)("div",{className:"flex justify-center height-screen-helper",children:(0,s.jsxs)("div",{className:"flex flex-col justify-between w-full max-w-[475px] min-w-[350px] m-auto px-4",children:[(0,s.jsx)("div",{className:"flex justify-center pb-2",children:(0,s.jsx)(d.Z,{short:!0})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-center text-2xl md:text-3xl font-bold tracking-tight text-gray-900",children:"Create a Writefull account"}),(0,s.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",(0,s.jsx)(o(),{href:"/login",children:(0,s.jsx)("a",{onClick:function(e){e.preventDefault(),P.push({pathname:"/login",query:O})},className:"font-medium text-gray-900 underline hover:text-gray-700",children:"log in with your account"})})]})]}),(0,s.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:M,children:[(0,s.jsxs)("div",{className:"-space-y-px rounded-md shadow-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email-address",className:"sr-only select-none",children:"Email address"}),(0,s.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",spellCheck:"false",required:!0,className:"relative block w-full py-1.5 pl-3\n                    rounded-t-md border-0\n                    text-gray-900 sm:text-sm sm:leading-6\n                    placeholder:text-gray-400\n                    ring-1 ring-gray-300\n                    focus:ring-2 focus:ring-gray-900 focus:ring-opacity-100 focus:z-10\n                    outline-none",placeholder:"Email address",value:x,onChange:function(e){var t;b(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"sr-only select-none",children:"Password"}),(0,s.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"\n                    relative block w-full py-1.5 pl-3\n                    rounded-b-md border-0\n                    text-gray-900 sm:text-sm sm:leading-6\n                    placeholder:text-gray-400\n                    ring-1 ring-gray-300\n                    focus:ring-2 focus:ring-black focus:ring-opacity-100 focus:z-10\n                    outline-none",placeholder:"Password",value:w,onChange:function(e){var t;j(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)}})]})]}),(0,s.jsxs)("div",{className:"border border-accents-4 rounded-md p m-auto mt-4 flex items-start justify-between text-sm px-5 py-4 bg-white",children:[(0,s.jsx)("input",{id:"newsletter",name:"newsletter",type:"checkbox",className:"h-6 w-6 accent-black border-gray-300 text-gray-600 focus:ring-gray-600",checked:k,onChange:function(e){return S(e.target.checked)}}),(0,s.jsx)("span",{className:"text-gray-900 sm:text-sm sm:leading-6 ml-2",children:"Tick here to receive update notifications, invites to test new features, and more. You can opt out at any time. "})]}),(0,s.jsx)("div",{children:(0,s.jsx)(l.Z,{type:"submit",loading:C,className:"text-white flex relative w-full bg-slate-900 px-3 py-2 text-sm font-normal justify-center rounded-md hover:bg-slate-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-800",children:"Agree and Sign up"})}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"text-center text-sm",children:[(0,s.jsx)("span",{className:"text-gray-900 sm:text-sm sm:leading-6",children:"By signing up, you agree to the "}),(0,s.jsx)(o(),{href:"https://www.writefull.com/terms",children:(0,s.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"font-medium text-gray-900 underline hover:text-gray-700",children:"Terms and Conditions"})}),(0,s.jsx)("span",{className:"text-gray-900 sm:text-sm sm:leading-6",children:" and "}),(0,s.jsx)(o(),{href:"https://www.writefull.com/privacy",children:(0,s.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"font-medium text-gray-900 underline hover:text-gray-700",children:"Privacy Policy"})}),(0,s.jsx)("span",{className:"text-gray-900 sm:text-sm sm:leading-6",children:"."})]})}),U.content&&(0,s.jsx)("div",{className:(0,m.Z)("p-3 border","error"===U.type?"text-pink border-pink":"text-green border-green"),children:U.content}),(0,s.jsx)("input",{type:"hidden",name:"remember",defaultValue:"true"})]})]})})})}},1508:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var n=r(5893),i=r(1664),s=r.n(i),a=r(1163);function o(){var e=(0,a.useRouter)().query,t=e.t,r=e.u,i=e.ue,o=e.f,u="/manage-group";return o&&(u=Array.isArray(o)?o[0]:o),(0,n.jsx)("section",{className:"mt-4 sm:mt-4",children:(0,n.jsxs)("div",{className:"max-w-full sm:max-w-6xl m-auto pt-2 sm:pt-4",children:[(0,n.jsxs)("div",{className:"sm:flex sm:align-center items-center justify-between px-32",children:[(0,n.jsxs)("h1",{className:"text-xl sm:text-3xl",children:["Stats - ",i]}),(0,n.jsx)(s(),{className:"text-xl sm:text-3xl",href:u,children:"Back"})]}),(0,n.jsx)("iframe",{height:3200,className:"max-w-full sm:max-w-6xl m-auto mt-2 sm:mt-4",src:"https://dashboard.writefull.com/?embed=true&user_uuid=".concat(r,"&t=").concat(t)})]})})}},9223:function(e,t,r){"use strict";r.d(t,{E:function(){return n}});var n=function(){var e=localStorage.getItem("wf.device");return e||(e=crypto.randomUUID(),localStorage.setItem("wf.device",e)),e}},949:function(e,t,r){"use strict";r.d(t,{Ax:function(){return o},Ei:function(){return h},Pu:function(){return d},Qr:function(){return p},Vr:function(){return l},jQ:function(){return c},oS:function(){return f},qC:function(){return u}});var n=r(7568),i=r(7582),s=r(3454),a=r(8764).lW,o=function(){var e,t;return(null===s||void 0===s?void 0:null!==(e=s.env)&&void 0!==e||void 0)?"https://my.writefull.com":(null===s||void 0===s||null===(t=s.env)||void 0===t?void 0:t.VERCEL_URL)&&""!==s.env.VERCEL_URL?s.env.VERCEL_URL:""},u=function(){var e=(0,n.Z)((function(e){var t,r,n,s,a,o,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=e.url,r=e.token,n=e.data,[4,fetch(t,{method:"POST",headers:new Headers({"Content-Type":"application/json",token:r}),credentials:"same-origin",body:JSON.stringify(n)})];case 1:if((s=i.sent()).ok)return[3,6];a={},i.label=2;case 2:return i.trys.push([2,4,,5]),[4,s.json()];case 3:return o=i.sent(),a=o&&o.error?o.error:{},[3,5];case 4:return i.sent(),{},[3,5];case 5:throw u=a&&a.message?a.message:s.statusText,Error(u);case 6:return[2,s.json()]}}))}));return function(t){return e.apply(this,arguments)}}(),c=function(e){var t=new Date("1970-01-01T00:30:00Z");return t.setSeconds(e),t},l=function(e,t,r){var n=document.getElementById(e);if(!n){var i=document.createElement("script");i.type="text/javascript",i.src=t,i.id=e,i.onload=function(){r&&r()},document.body.appendChild(i)}n&&r&&r()},d=function(e){var t,r,n,i,s,a,o,u,c,l=function(e,t){var r,n,i,s,a;return i=2147483648&e,s=2147483648&t,a=(1073741823&e)+(1073741823&t),(r=1073741824&e)&(n=1073741824&t)?2147483648^a^i^s:r|n?1073741824&a?3221225472^a^i^s:1073741824^a^i^s:a^i^s},d=function(e,t,r,n,i,s,a){return e=l(e,l(l(t&r|~t&n,i),a)),l(e<<s|e>>>32-s,t)},f=function(e,t,r,n,i,s,a){return e=l(e,l(l(t&n|r&~n,i),a)),l(e<<s|e>>>32-s,t)},h=function(e,t,r,n,i,s,a){return e=l(e,l(l(t^r^n,i),a)),l(e<<s|e>>>32-s,t)},p=function(e,t,r,n,i,s,a){return e=l(e,l(l(r^(t|~n),i),a)),l(e<<s|e>>>32-s,t)},m=function(e){var t,r,n="";for(t=0;3>=t;t++)n+=(r="0"+(r=e>>>8*t&255).toString(16)).substr(r.length-2,2);return n};e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);128>n?t+=String.fromCharCode(n):(127<n&&2048>n?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t}(e),t=function(e){for(var t,r=e.length,n=16*(((t=r+8)-t%64)/64+1),i=Array(n-1),s=0,a=0;a<r;)s=a%4*8,i[t=(a-a%4)/4]|=e.charCodeAt(a)<<s,a++;return i[t=(a-a%4)/4]|=128<<a%4*8,i[n-2]=r<<3,i[n-1]=r>>>29,i}(e),a=1732584193,o=4023233417,u=2562383102,c=271733878;for(var v=0;v<t.length;v+=16)r=a,n=o,i=u,s=c,a=d(a,o,u,c,t[v+0],7,3614090360),c=d(c,a,o,u,t[v+1],12,3905402710),u=d(u,c,a,o,t[v+2],17,606105819),o=d(o,u,c,a,t[v+3],22,3250441966),a=d(a,o,u,c,t[v+4],7,4118548399),c=d(c,a,o,u,t[v+5],12,1200080426),u=d(u,c,a,o,t[v+6],17,2821735955),o=d(o,u,c,a,t[v+7],22,4249261313),a=d(a,o,u,c,t[v+8],7,1770035416),c=d(c,a,o,u,t[v+9],12,2336552879),u=d(u,c,a,o,t[v+10],17,4294925233),o=d(o,u,c,a,t[v+11],22,2304563134),a=d(a,o,u,c,t[v+12],7,1804603682),c=d(c,a,o,u,t[v+13],12,4254626195),u=d(u,c,a,o,t[v+14],17,2792965006),a=f(a,o=d(o,u,c,a,t[v+15],22,1236535329),u,c,t[v+1],5,4129170786),c=f(c,a,o,u,t[v+6],9,3225465664),u=f(u,c,a,o,t[v+11],14,643717713),o=f(o,u,c,a,t[v+0],20,3921069994),a=f(a,o,u,c,t[v+5],5,3593408605),c=f(c,a,o,u,t[v+10],9,38016083),u=f(u,c,a,o,t[v+15],14,3634488961),o=f(o,u,c,a,t[v+4],20,3889429448),a=f(a,o,u,c,t[v+9],5,568446438),c=f(c,a,o,u,t[v+14],9,3275163606),u=f(u,c,a,o,t[v+3],14,4107603335),o=f(o,u,c,a,t[v+8],20,1163531501),a=f(a,o,u,c,t[v+13],5,2850285829),c=f(c,a,o,u,t[v+2],9,4243563512),u=f(u,c,a,o,t[v+7],14,1735328473),a=h(a,o=f(o,u,c,a,t[v+12],20,2368359562),u,c,t[v+5],4,4294588738),c=h(c,a,o,u,t[v+8],11,2272392833),u=h(u,c,a,o,t[v+11],16,1839030562),o=h(o,u,c,a,t[v+14],23,4259657740),a=h(a,o,u,c,t[v+1],4,2763975236),c=h(c,a,o,u,t[v+4],11,1272893353),u=h(u,c,a,o,t[v+7],16,4139469664),o=h(o,u,c,a,t[v+10],23,3200236656),a=h(a,o,u,c,t[v+13],4,681279174),c=h(c,a,o,u,t[v+0],11,3936430074),u=h(u,c,a,o,t[v+3],16,3572445317),o=h(o,u,c,a,t[v+6],23,76029189),a=h(a,o,u,c,t[v+9],4,3654602809),c=h(c,a,o,u,t[v+12],11,3873151461),u=h(u,c,a,o,t[v+15],16,530742520),a=p(a,o=h(o,u,c,a,t[v+2],23,3299628645),u,c,t[v+0],6,4096336452),c=p(c,a,o,u,t[v+7],10,1126891415),u=p(u,c,a,o,t[v+14],15,2878612391),o=p(o,u,c,a,t[v+5],21,4237533241),a=p(a,o,u,c,t[v+12],6,1700485571),c=p(c,a,o,u,t[v+3],10,2399980690),u=p(u,c,a,o,t[v+10],15,4293915773),o=p(o,u,c,a,t[v+1],21,2240044497),a=p(a,o,u,c,t[v+8],6,1873313359),c=p(c,a,o,u,t[v+15],10,4264355552),u=p(u,c,a,o,t[v+6],15,2734768916),o=p(o,u,c,a,t[v+13],21,1309151649),a=p(a,o,u,c,t[v+4],6,4149444226),c=p(c,a,o,u,t[v+11],10,3174756917),u=p(u,c,a,o,t[v+2],15,718787259),o=p(o,u,c,a,t[v+9],21,3951481745),a=l(a,r),o=l(o,n),u=l(u,i),c=l(c,s);return(m(a)+m(o)+m(u)+m(c)).toLowerCase()},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.slice(r?e.indexOf("\n")+1:0).split("\n").map((function(e){return e.split(t)}))},h=function(e){if(!e)return{};try{return JSON.parse(decodeURIComponent(a.from(e,"base64").toString()))}catch(t){return{}}},p=function(e,t){try{var r=new URL(e),n=new URL(t),i=r.hostname,s=n.hostname;return i===s||new RegExp("(^|\\.)".concat(i.replace(/\./g,"\\."),"$"),"i").test(s)}catch(a){return!1}}},433:function(e,t,r){"use strict";r.d(t,{j:function(){return i},w:function(){return n}});var n=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=e||0,s="ceil"===r?Math.ceil(i):i;return new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:n}).format(s/100)},i=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=n(e,t,r);return i.split(".")}},374:function(e,t,r){"use strict";r.d(t,{Cz:function(){return o},HJ:function(){return u},IF:function(){return a},gB:function(){return s}});var n=r(7815),i="writefull.referral",s=function(){return!!(null===localStorage||void 0===localStorage?void 0:localStorage.getItem(i))},a=function(){var e=null===localStorage||void 0===localStorage?void 0:localStorage.getItem(i);return e&&"string"===typeof e?JSON.parse(e):null},o=function(e,t){var r={code:t,originalState:e,uuid:(0,n.Vj)(),timestamp:Date.now()};return null===localStorage||void 0===localStorage||localStorage.setItem(i,JSON.stringify(r)),r},u=function(){null===localStorage||void 0===localStorage||localStorage.removeItem(i)}},8582:function(e,t,r){"use strict";r.d(t,{d:function(){return g}});var n,i="https://js.stripe.com/v3",s=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,a="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",o=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(i).concat(t);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(r),r},u=null,c=null,l=null,d=function(e){return null!==u?u:(u=new Promise((function(t,r){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(a),window.Stripe)t(window.Stripe);else try{var n=function(){for(var e=document.querySelectorAll('script[src^="'.concat(i,'"]')),t=0;t<e.length;t++){var r=e[t];if(s.test(r.src))return r}return null}();if(n&&e)console.warn(a);else if(n){if(n&&null!==l&&null!==c){var u;n.removeEventListener("load",l),n.removeEventListener("error",c),null===(u=n.parentNode)||void 0===u||u.removeChild(n),n=o(e)}}else n=o(e);l=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,r),c=function(e){return function(){e(new Error("Failed to load Stripe.js"))}}(r),n.addEventListener("load",l),n.addEventListener("error",c)}catch(d){return void r(d)}else t(null)}))).catch((function(e){return u=null,Promise.reject(e)}))},f=function(e,t,r){if(null===e)return null;var n=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"4.4.0",startTime:t})}(n,r),n},h=!1,p=function(){return n||(n=d(null).catch((function(e){return n=null,Promise.reject(e)})))};Promise.resolve().then((function(){return p()})).catch((function(e){h||console.warn(e)}));var m,v=r(3454),g=function(){if(!m){var e,t,r=(null!==(t=null!==(e=v.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY_LIVE)&&void 0!==e?e:"pk_live_51J8HkdEUsIYYEeXNR5rNMiFWLY2GprZfulU0m3nqClv9P2GWuZ1lNMWCBBlxbzBZVcJBSWuC17R3Lv8qum61FOjl00gsMIV4bv")&&void 0!==t?t:"").trim();m=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];h=!0;var n=Date.now();return p().then((function(e){return f(e,t,n)}))}(r)}return m}},6917:function(e,t,r){"use strict";r.d(t,{m:function(){return d}});var n=r(7568);function i(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var s=r(6042),a=r(9396),o=r(7582),u=r(7294),c=r(949),l=r(7003);function d(e){var t=(0,l.Iy)(),r=t.signInFromSession,d=t.session,f=t.isAuthenticationInitialized,h=t.signOut,p=(0,u.useState)({isValidParent:!1,loading:!0,origin:null,error:null}),m=p[0],v=p[1],g=(0,u.useState)(!1),y=g[0],x=g[1];(0,u.useEffect)((function(){window!==window.top&&x(!0)}),[]);var b=(0,u.useRef)(e),_=(0,u.useRef)(m),w=(0,u.useRef)({signInFromSession:r,session:d,signOut:h});(0,u.useEffect)((function(){b.current=e}),[e]),(0,u.useEffect)((function(){w.current={signInFromSession:r,session:d,signOut:h}}),[r,d,h]),(0,u.useEffect)((function(){_.current=m}),[m]);var j=(0,u.useCallback)(function(){var e=(0,n.Z)((function(e,t){var r,n,u,c,l,d;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:r=w.current.signInFromSession,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r(t)];case 2:return u=o.sent(),c=u.session,u.error||!c?[2]:(v((function(e){return(0,a.Z)((0,s.Z)({},e),{isValidParent:!0,loading:!1,error:null})})),null===(n=e.source)||void 0===n||n.postMessage({type:"session-initialized"},{targetOrigin:e.origin}),[3,4]);case 3:return l=o.sent(),v((function(e){return(0,a.Z)((0,s.Z)({},e),{loading:!1,error:i(l,Error)?l.message:"An unknown error occurred"})})),null===(d=e.source)||void 0===d||d.postMessage({type:"ERROR",message:i(l,Error)?l.message:"An unknown error occurred"},{targetOrigin:e.origin}),[3,4];case 4:return[2]}}))}));return function(t,r){return e.apply(this,arguments)}}(),[]);return(0,u.useEffect)((function(){var e=function(){var e=(0,n.Z)((function(e){var t,r,n,i,u,l,d,f,h,p,m,g,y,x,E,k,S;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=b.current,r=t.requiresSession,n=t.allowedDomains,i=t.customMessageHandlers,u=w.current,l=u.session,d=u.signOut,f=_.current,function(e,t){var r=!1,n=!0,i=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;if((0,c.Qr)(u,e)){r=!0;break}}}catch(l){i=!0,s=l}finally{try{n||null==o.return||o.return()}finally{if(i)throw s}}return r}(e.origin,n)?e.data&&"object"===typeof e.data?(h=e.data,p=h.type,m=h.data,g=h.action,"pong"===(y=null!==p&&void 0!==p?p:g)?(v((function(t){return(0,a.Z)((0,s.Z)({},t),{origin:e.origin,isValidParent:!0,loading:!!r})})),E=r?"session-required":"connected",r&&d(),null===(x=e.source)||void 0===x||x.postMessage({type:E},{targetOrigin:e.origin}),[2]):e.origin!==f.origin?[2]:r&&"session"===y?(k=m.session,[4,j(e,k)]):[3,2]):[2]:[2];case 1:return o.sent(),[2];case 2:return r&&!l?[2]:(S=(null!==i&&void 0!==i?i:{})[y])?[4,S(e,v)]:[3,4];case 3:o.sent(),o.label=4;case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();if(y&&f)return window.addEventListener("message",e),window.parent.postMessage({type:"ping"},{targetOrigin:"*"}),function(){window.removeEventListener("message",e)}}),[j,y,f]),(0,s.Z)({isIframe:y},m)}},3996:function(e,t,r){"use strict";r.d(t,{aF:function(){return g},fS:function(){return v}});var n=r(7568),i=r(6042),s=r(603),a=r(7582),o=r(5893),u=r(7294),c=r(8946),l=(r(4935),r(7543)),d=r(7003),f=(0,u.createContext)(void 0),h="ForcedCancel",p=new AbortController,m=function(){p.abort(h),p=new AbortController},v=function(e){var t,r=(0,d.Iy)(),v=r.session,g=r.user,y=r.oAuth2Status,x=r.isAuthenticationInitialized,b=r.signIn,_=r.signUp,w=r.signOut,j=r.resetPasswordForEmail,E=r.resendVerificationEmail,k=r.checkEmailVerified,S=r.refreshUserData,N=r.updateOAuth2Status,A=r.signInFromSession,C=(0,u.useState)(!1),I=C[0],T=C[1],U=(0,u.useState)(null),R=U[0],P=U[1],O=(0,u.useState)(null),L=O[0],B=O[1],Z=(0,u.useState)(!1),F=Z[0],D=Z[1];(0,u.useEffect)((function(){var e;if(x)if(null===v||void 0===v||null===(e=v.user)||void 0===e?void 0:e.uid){if(null===v||void 0===v?void 0:v.idToken){var t=function(){var e=(0,n.Z)((function(e){var t,r,n,i,o,u;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:t=p.signal,a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,Promise.all([M(e,t),V(e,t),W(e,t)])];case 2:return r=s.Z.apply(void 0,[a.sent(),3]),n=r[0],i=r[1],o=r[2],P(n),B(i),D(o),[3,5];case 3:return u=a.sent(),u===h||console.error("Error fetching user data:",u),[3,5];case 4:return T(!0),[7];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return t(null===v||void 0===v?void 0:v.idToken),function(){m()}}}else T(!0)}),[null===v||void 0===v||null===(t=v.user)||void 0===t?void 0:t.uid,null===v||void 0===v?void 0:v.idToken,x]);var M=function(){var e=(0,n.Z)((function(e,t){var r;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return e?[4,(0,l.v_)("/api/get-subscription-details",{},{headers:{"Content-Type":"application/json",token:e},signal:t})]:[2,null];case 1:return[2,(null===(r=n.sent())||void 0===r?void 0:r.length)>0?r[0]:null]}}))}));return function(t,r){return e.apply(this,arguments)}}(),V=function(){var e=(0,n.Z)((function(e,t){return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return e?[4,(0,l.v_)("/api/get-group-details",{},{headers:{"Content-Type":"application/json",token:e},signal:t})]:[2,null];case 1:return[2,r.sent()]}}))}));return function(t,r){return e.apply(this,arguments)}}(),W=function(){var e=(0,n.Z)((function(e,t){return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return e?[4,(0,l.v_)("/api/has-user-password",{},{headers:{"Content-Type":"application/json",token:e},signal:t})]:[2,!1];case 1:return[2,r.sent().hasPassword]}}))}));return function(t,r){return e.apply(this,arguments)}}(),q={session:v,user:g,userLoaded:I,subscription:R,group:L,hasPassword:F,oAuth2Status:y,isAuthenticationInitialized:x,signIn:b,signUp:_,signOut:function(){return m(),w(),P(null),B(null),D(!1),c.Zs.signOut()},resetPasswordForEmail:j,resendVerificationEmail:E,checkEmailVerified:k,refreshUserData:S,updateOAuth2Status:N,signInFromSession:A};return(0,o.jsx)(f.Provider,(0,i.Z)({value:q},e))},g=function(){var e=(0,u.useContext)(f);if(void 0===e)throw new Error("useUser must be used within a UserContextProvider.");return e}},7003:function(e,t,r){"use strict";r.d(t,{Iy:function(){return h},Pl:function(){return f}});var n=r(7568),i=r(6042),s=r(7582),a=r(5893),o=r(7294),u=r(8946),c=(r(4935),(0,o.createContext)(void 0)),l=new AbortController,d=function(){l.abort("ForcedCancel"),l=new AbortController},f=function(e){var t=(0,o.useState)(null),r=t[0],l=t[1],f=(0,o.useState)(null),h=f[0],p=f[1],m=(0,o.useState)(null),v=m[0],g=m[1],y=(0,o.useState)(!1),x=y[0],b=y[1];(0,o.useEffect)((function(){var e,t=u.Zs.session();l(t),p(null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:null),b(u.Zs.isAuthenticationInitialized);var r=u.Zs.onAuthStateChange(function(){var e=(0,n.Z)((function(e,t){var r;return(0,s.__generator)(this,(function(e){return l(t),p(null!==(r=null===t||void 0===t?void 0:t.user)&&void 0!==r?r:null),b(u.Zs.isAuthenticationInitialized),[2]}))}));return function(t,r){return e.apply(this,arguments)}}()),i=r.data;return function(){d(),null===i||void 0===i||i.unsubscribe()}}),[]);var _={session:r,user:h,oAuth2Status:v,isAuthenticationInitialized:x,signIn:function(e){return u.Zs.signIn(e)},signUp:function(e){return u.Zs.signUp(e)},signOut:function(){return d(),l(null),p(null),g(null),u.Zs.signOut()},resetPasswordForEmail:function(){var e=(0,n.Z)((function(e){return(0,s.__generator)(this,(function(t){return[2,u.Zs.resetPasswordForEmail(e)]}))}));return function(t){return e.apply(this,arguments)}}(),resendVerificationEmail:function(){var e=(0,n.Z)((function(e){return(0,s.__generator)(this,(function(t){return[2,u.Zs.resendVerificationEmail(e)]}))}));return function(t){return e.apply(this,arguments)}}(),checkEmailVerified:function(){var e=(0,n.Z)((function(e){return(0,s.__generator)(this,(function(t){return[2,u.Zs.checkEmailVerification(e)]}))}));return function(t){return e.apply(this,arguments)}}(),refreshUserData:function(){var e=(0,n.Z)((function(e){var t,r,n,i;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return[4,u.Zs.refreshUserData(e)];case 1:return t=s.sent(),r=t.data,n=t.user,(i=t.error)||(p(n),l(r)),[2,{data:r,user:n,error:i}]}}))}));return function(t){return e.apply(this,arguments)}}(),updateOAuth2Status:function(e){return g(e)},signInFromSession:function(e){return u.Zs.signInFromSession(e)}};return(0,a.jsx)(c.Provider,(0,i.Z)({value:_},e))},h=function(){var e=(0,o.useContext)(c);if(void 0===e)throw new Error("useUser must be used within a UserBasicContextProvider.");return e}},8946:function(e,t,r){"use strict";r.d(t,{Zs:function(){return u}});var n=r(7568),i=r(7582),s=r(7543),a=r(4935),o=r(3454),u=new a.k({url:"https://auth.writefull.com",apiURL:"https://nlp.writefull.ai"});(function(){var e=(0,n.Z)((function(e){var t,r,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,u.api.getUser(e)];case 1:if(t=i.sent(),r=t.data,n=t.error)throw n;return[2,r]}}))}))})(),function(){var e=(0,n.Z)((function(e,t){var r,n,a,u,c,l;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:r=o.env.WRITEFULL_CLOUD_FUNCTIONS_URL,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,s.v_)("".concat(r,"/addCustomer"),{token:e,payment_provider:"stripe",customerId:t},{headers:{"Content-Type":"application/json"}})];case 2:return c=i.sent(),l={payment_provider:null===c||void 0===c||null===(n=c.subscription)||void 0===n?void 0:n.payment_provider,stripe:null===c||void 0===c||null===(a=c.subscription)||void 0===a?void 0:a.stripe,gumroad:null===c||void 0===c||null===(u=c.subscription)||void 0===u?void 0:u.gumroad},[2,{user:{email:null===c||void 0===c?void 0:c.email,emailVerified:!0===(null===c||void 0===c?void 0:c.email_verified),uid:null===c||void 0===c?void 0:c.uid,premium:!0===(null===c||void 0===c?void 0:c.premium),subscription:l},error:null}];case 3:return[2,{user:null,error:i.sent()}];case 4:return[2]}}))}))}(),function(){var e=(0,n.Z)((function(){var e;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,s.U2)("https://nlp.writefull.ai/get-ip-info")];case 1:return[2,t.sent().result.country.isoCode];case 2:return e=t.sent(),console.error(e),[2,""];case 3:return[2]}}))}))}(),function(){var e=(0,n.Z)((function(e){var t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return t=o.env.WRITEFULL_CLOUD_FUNCTIONS_URL,[4,(0,s.v_)("".concat(t,"/paymentIntentSucceededStage"),e,{headers:{"Content-Type":"application/json"}})];case 1:return r.sent(),[2]}}))}))}(),function(){var e=(0,n.Z)((function(e){var t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return t=o.env.WRITEFULL_CLOUD_FUNCTIONS_URL,[4,(0,s.v_)("".concat(t,"/subscriptionNewStripeSaleStage"),e,{headers:{"Content-Type":"application/json"}})];case 1:return r.sent(),[2]}}))}))}(),function(){var e=(0,n.Z)((function(e){var t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return t=o.env.WRITEFULL_CLOUD_FUNCTIONS_URL,[4,(0,s.v_)("".concat(t,"/subscriptionUpdatedStripe"),e,{headers:{"Content-Type":"application/json"}})];case 1:return r.sent(),[2]}}))}))}(),function(){var e=(0,n.Z)((function(e){var t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return t=o.env.WRITEFULL_CLOUD_FUNCTIONS_URL,[4,(0,s.v_)("".concat(t,"/subscriptionStripeCancellationStage"),e,{headers:{"Content-Type":"application/json"}})];case 1:return r.sent(),[2]}}))}))}(),function(){var e=(0,n.Z)((function(e){var t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return t=o.env.WRITEFULL_CLOUD_FUNCTIONS_URL,[4,(0,s.U2)("".concat(t,"/getGroup?token=").concat(e))];case 1:return[2,r.sent()]}}))}))}(),function(){var e=(0,n.Z)((function(e,t){var r,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return r=o.env.WRITEFULL_CLOUD_FUNCTIONS_URL,n={action:"INVITE",token:e,newMembers:t},[4,(0,s.v_)("".concat(r,"/groupInvitation"),n,{resolveText:!0,headers:{"Content-Type":"application/json"}})];case 1:return i.sent(),[2]}}))}))}(),function(){var e=(0,n.Z)((function(e){var t,r;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return t=o.env.WRITEFULL_CLOUD_FUNCTIONS_URL,r={action:"ACCEPT_INVITATION",iuid:e},[4,(0,s.v_)("".concat(t,"/groupInvitation"),r,{resolveText:!0,headers:{"Content-Type":"application/json"}})];case 1:return n.sent(),[2]}}))}))}(),function(){var e=(0,n.Z)((function(e){var t,r;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return t=o.env.WRITEFULL_CLOUD_FUNCTIONS_URL,r={action:"REJECT_INVITATION",iuid:e},[4,(0,s.v_)("".concat(t,"/groupInvitation"),r,{headers:{"Content-Type":"application/json"}})];case 1:return n.sent(),[2]}}))}))}(),function(){var e=(0,n.Z)((function(e,t){var r,n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return r=o.env.WRITEFULL_CLOUD_FUNCTIONS_URL,n={token:e,members:t},[4,(0,s.v_)("".concat(r,"/deleteMember"),n,{noResolveJson:!0,headers:{"Content-Type":"application/json"}})];case 1:return i.sent(),[2]}}))}))}(),function(){var e=(0,n.Z)((function(e,t,r){var n,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=o.env.WRITEFULL_CLOUD_FUNCTIONS_URL,a={email:e,idToken:t,referral:r},[4,(0,s.v_)("".concat(n,"/addReferral"),a,{headers:{"Content-Type":"application/json"}})];case 1:return i.sent(),[2]}}))}))}(),function(){var e=(0,n.Z)((function(e,t,r){var n,a,u,c,l;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:n=o.env.WRITEFULL_CLOUD_FUNCTIONS_URL,a=o.env.WRITEFULL_KEY,u={email:e,overleafId:t,tokens:r},c=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,s.v_)("".concat(n,"/linkAccount"),u,{headers:{"Content-Type":"application/json",Authorization:"".concat(a)}})];case 2:return c=i.sent(),[3,4];case 3:return l=i.sent(),console.error(l),[3,4];case 4:return[2,c]}}))}))}(),function(){var e=(0,n.Z)((function(e,t){var r,n,a,u,c;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:r=o.env.WRITEFULL_CLOUD_FUNCTIONS_URL,n=o.env.WRITEFULL_KEY,a={overleafId:e,tokens:t},u=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,s.v_)("".concat(r,"/updateOverleafTokens"),a,{headers:{"Content-Type":"application/json",Authorization:"".concat(n)}})];case 2:return u=i.sent(),[3,4];case 3:return c=i.sent(),console.error(c),[3,4];case 4:return[2,u]}}))}))}(),function(){var e=(0,n.Z)((function(e){var t,r,n,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:t=o.env.WRITEFULL_CLOUD_FUNCTIONS_URL,r=o.env.WRITEFULL_KEY,n=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,s.U2)("".concat(t,"/getFirebaseUser?email=").concat(e),{headers:{"Content-Type":"application/json",Authorization:"".concat(r)}})];case 2:return n=i.sent(),[3,4];case 3:return a=i.sent(),console.error(a),[3,4];case 4:return[2,n]}}))}))}(),function(){var e=(0,n.Z)((function(e){var t,r,n,a,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:t=o.env.WRITEFULL_CLOUD_FUNCTIONS_URL,r=o.env.WRITEFULL_KEY,n="".concat(t,"/getOverleafUser?overleafId=").concat(e),a=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,s.U2)(n,{headers:{"Content-Type":"application/json",Authorization:"".concat(r)}})];case 2:return a=i.sent(),[3,4];case 3:return u=i.sent(),console.error(u),[3,4];case 4:return[2,a]}}))}))}(),function(){var e=(0,n.Z)((function(e,t){return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,u.api.signUpWithOverleaf(t,e)];case 1:return[2,r.sent()]}}))}))}(),function(){var e=(0,n.Z)((function(e){var t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return t=o.env.WRITEFULL_CLOUD_FUNCTIONS_URL,[4,(0,s.v_)("".concat(t,"/dictionary"),{idToken:e,action:"get"},{headers:{"Content-Type":"application/json"}})];case 1:return[2,r.sent()]}}))}))}(),function(){var e=(0,n.Z)((function(e,t,r){var n;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=o.env.WRITEFULL_CLOUD_FUNCTIONS_URL,[4,(0,s.v_)("".concat(n,"/dictionary"),{idToken:e,action:"remove",target:t,replacement:r},{headers:{"Content-Type":"application/json"}})];case 1:return[2,i.sent()]}}))}))}(),function(){var e=(0,n.Z)((function(e){return(0,i.__generator)(this,(function(t){return[2,u.signInWithOverleaf({overleafId:e,key:o.env.WRITEFULL_KEY})]}))}))}(),function(){var e=(0,n.Z)((function(e){var t,r,n,a,u,c,l;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:t=o.env.WRITEFULL_NLP_URL,r=o.env.WRITEFULL_NLP_KEY,n={emails:e},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,s.v_)("".concat(t,"/wfull/system/check-premium-list"),n,{headers:{"Content-Type":"application/json","Writefull-Key":r}})];case 2:return a=i.sent(),u=a.ok,c=a.result,u&&c?[2,c.filter((function(e){return e.isPremium})).map((function(e){return e.email}))]:[2,[]];case 3:return l=i.sent(),console.error(l),[2,[]];case 4:return[2]}}))}))}()},1968:function(e,t,r){"use strict";r.d(t,{L:function(){return f}});var n,i=r(7568),s=r(6042),a=r(9396),o=r(7582),u=r(9223),c=r(3611),l=null!==(n="https://metrics.writefull.ai")?n:c.wk,d=function(e){if(void 0!==(null===e||void 0===e?void 0:e.user))return e.user.isPaid?"paid":e.user.isPremium?"premium":"freemium"},f=function(){var e=(0,i.Z)((function(e,t,r){var n,i,f,h,p,m,v,g,y;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:n=null,(i=null===localStorage||void 0===localStorage?void 0:localStorage.getItem("writefull.auth"))&&"string"===typeof i&&(null===(h=JSON.parse(i))||void 0===h||null===(f=h.currentSession)||void 0===f?void 0:f.uid)&&(n=h.currentSession),r=r||{},(p=null===localStorage||void 0===localStorage?void 0:localStorage.getItem("writefull.targets"))&&"string"===typeof p&&(m=JSON.parse(p),r=(0,a.Z)((0,s.Z)({},r),{target:m})),o.label=1;case 1:return o.trys.push([1,3,,4]),g={uid:null===n||void 0===n?void 0:n.uid,deviceId:(0,u.E)(),frontend:"customer-portal",version:"1",type:e,action:t,emailDomain:null===n||void 0===n||null===(v=n.email)||void 0===v?void 0:v.split("@")[1],accountType:d(n),properties:r},[4,fetch(l,{method:"POST",body:JSON.stringify(g),headers:(0,s.Z)({},c.QN,{"api-version":"2"})})];case 2:return o.sent(),[3,4];case 3:return y=o.sent(),console.log(y),[3,4];case 4:return[2]}}))}));return function(t,r,n){return e.apply(this,arguments)}}()},4935:function(e,t,r){"use strict";r.d(t,{k:function(){return v}});var n=r(7568);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,o=r(6042),u=r(9396),c=r(7582),l=r(7543),d=r(3611),f=r(7815),h=r(949),p=function(){function e(t){var r=t.url,n=void 0===r?"":r,s=t.apiURL,a=void 0===s?"":s,u=t.headers,c=void 0===u?{}:u;i(this,e),this.url=n,this.apiURL=a,this.headers=(0,o.Z)({},d.QN,c)}var t=e.prototype;return t.signUpWithEmail=function(e,t){var r=this;return(0,n.Z)((function(){var n,i;return(0,c.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),(n=(0,o.Z)({},r.headers)).Accept="text/html",[4,(0,l.v_)("".concat(r.url,"/user"),{email:e,password:t},{headers:n})];case 1:return i=s.sent(),[2,{data:{uid:null===i||void 0===i?void 0:i.uid,email:null===i||void 0===i?void 0:i.email,emailVerified:!1},error:null}];case 2:return[2,{data:null,error:s.sent()}];case 3:return[2]}}))}))()},t.signUpWithOverleaf=function(e,t){var r=this;return(0,n.Z)((function(){var n,i;return(0,c.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),(n=(0,o.Z)({},r.headers)).Accept="text/html",[4,(0,l.v_)("".concat(r.url,"/v2/user/custom"),{email:e,overleafId:t},{headers:n})];case 1:return i=s.sent(),[2,{data:{uid:null===i||void 0===i?void 0:i.uid,email:null===i||void 0===i?void 0:i.email,emailVerified:!0},error:null}];case 2:return[2,{data:null,error:s.sent()}];case 3:return[2]}}))}))()},t.signInWithEmail=function(e,t){var r=this;return(0,n.Z)((function(){var n,i,s,a;return(0,c.__generator)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),(n=(0,o.Z)({},r.headers)).Accept="text/html",[4,(0,l.v_)("".concat(r.url,"/auth"),{email:e,password:t},{headers:n})];case 1:return i=u.sent(),s=(0,o.Z)({},i),a={uid:null===s||void 0===s?void 0:s.uid,email:null===s||void 0===s?void 0:s.email},s.user=a,s.expiresIn=parseInt(i.expiresIn),s.expiresIn&&(s.expiresAt=(0,f.Fq)(s.expiresIn)),[2,{data:s,error:null}];case 2:return[2,{data:null,error:u.sent()}];case 3:return[2]}}))}))()},t.signInWithOverleaf=function(e,t){var r=this;return(0,n.Z)((function(){var n,i,s,a;return(0,c.__generator)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),(n=(0,o.Z)({},r.headers)).Accept="text/html",n["Content-Type"]="application/json",n.Authorization="".concat(t),[4,(0,l.v_)("".concat((0,h.Ax)(),"/api/auth/custom"),{overleafId:e},{headers:n})];case 1:return i=u.sent(),s=(0,o.Z)({},i),a={uid:null===s||void 0===s?void 0:s.uid,email:null===s||void 0===s?void 0:s.email},s.user=a,s.expiresIn=parseInt(i.expiresIn),s.expiresIn&&(s.expiresAt=(0,f.Fq)(s.expiresIn)),[2,{data:s,error:null}];case 2:return[2,{data:null,error:u.sent()}];case 3:return[2]}}))}))()},t.resetPasswordForEmail=function(e){var t=this;return(0,n.Z)((function(){var r;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),(r=(0,o.Z)({},t.headers)).Accept="text/html",[4,(0,l.v_)("".concat(t.url,"/user/getCode"),{email:e,requestType:"PASSWORD_RESET"},{headers:r,noResolveJson:!0})];case 1:return[2,{data:n.sent(),error:null}];case 2:return[2,{data:null,error:n.sent()}];case 3:return[2]}}))}))()},t.resendVerificationEmail=function(e){var t=this;return(0,n.Z)((function(){var r;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),(r=(0,o.Z)({},t.headers)).Accept="text/html",[4,(0,l.v_)("".concat(t.url,"/user/getCode"),{email:e,requestType:"VERIFY_EMAIL"},{headers:r,noResolveJson:!0})];case 1:return[2,{data:n.sent(),error:null}];case 2:return[2,{data:null,error:n.sent()}];case 3:return[2]}}))}))()},t._createRequestHeaders=function(e){var t=(0,o.Z)({},this.headers);return t.Authorization="Bearer ".concat(e),t},t.getUser=function(e){var t=this;return(0,n.Z)((function(){var r,n,i,s,a,d,f,p,m,v,g,y,x,b,_,w;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,5,,6]),m=t._createRequestHeaders(e),[4,(0,l.v_)("".concat((0,h.Ax)(),"/api/auth/user"),{idToken:e},{headers:m})];case 1:return v=c.sent(),g={payment_provider:null===v||void 0===v||null===(r=v.subscription)||void 0===r?void 0:r.paymentProvider,stripe:null===v||void 0===v||null===(n=v.subscription)||void 0===n?void 0:n.stripe,gumroad:null===v||void 0===v||null===(i=v.subscription)||void 0===i?void 0:i.gumroad},y={widgets:null===v||void 0===v||null===(s=v.config)||void 0===s?void 0:s.widgets,showStats:null===v||void 0===v||null===(a=v.config)||void 0===a?void 0:a.showStats,cacheNeedsToBeCleared:null===v||void 0===v||null===(d=v.config)||void 0===d?void 0:d.cacheNeedsToBeCleared,features:null===v||void 0===v||null===(f=v.config)||void 0===f?void 0:f.features,settings:null===v||void 0===v||null===(p=v.config)||void 0===p?void 0:p.settings},(b=null!==(x=null===v||void 0===v?void 0:v.emailVerified)&&void 0!==x?x:null===v||void 0===v?void 0:v.email_verified)?[4,t.isAPremiumUser(e)]:[3,3];case 2:return w=c.sent(),[3,4];case 3:w={isPremium:!1,isPaid:!1},c.label=4;case 4:return _=w,[2,{user:(0,u.Z)((0,o.Z)({email:null===v||void 0===v?void 0:v.email,emailVerified:b,uid:null===v||void 0===v?void 0:v.uid,premium:!0===(null===v||void 0===v?void 0:v.premium)||!0===_.isPremium},_),{subscription:g,config:y,referral:null===v||void 0===v?void 0:v.referral,overleaf:null===v||void 0===v?void 0:v.overleaf,uuid:null===v||void 0===v?void 0:v.uuid,admin_group:null===v||void 0===v?void 0:v.admin_group}),data:v,error:null}];case 5:return[2,{user:null,data:null,error:c.sent()}];case 6:return[2]}}))}))()},t.refreshAccessToken=function(e){var t=this;return(0,n.Z)((function(){var r,n;return(0,c.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,l.v_)("".concat(t.url,"/user/idToken"),{refreshToken:e},{headers:t.headers})];case 1:return r=i.sent(),(n={user:null,idToken:r.id_token,refreshToken:r.refresh_token,expiresIn:parseInt(r.expires_in)}).expiresIn&&(n.expiresAt=(0,f.Fq)(n.expiresIn)),[2,{data:n,error:null}];case 2:return[2,{data:null,error:i.sent()}];case 3:return[2]}}))}))()},t.isAPremiumUser=function(e){var t=this;return(0,n.Z)((function(){var r,n;return(0,c.__generator)(this,(function(i){switch(i.label){case 0:if(!e||""==e)return[3,4];r=(0,u.Z)((0,o.Z)({},t.headers),{"firebase-token":e}),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,l.v_)("".concat(t.apiURL,"/isPremium"),{},{headers:r})];case 2:return[2,{isPremium:(null===(n=i.sent())||void 0===n?void 0:n.isPremium)||!1,isPaid:(null===n||void 0===n?void 0:n.isPaid)||!1}];case 3:throw i.sent();case 4:return[2,{isPremium:!1,isPaid:!1}]}}))}))()},e}();!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();var m={url:d.Gg,apiURL:d.$E,autoRefreshToken:!0,persistSession:!0,headers:d.QN,ttl:144e5},v=function(){function e(t){i(this,e),this.stateChangeEmitters=new Map;var r=this;this.init=(0,n.Z)((function(){return(0,c.__generator)(this,(function(e){switch(e.label){case 0:return[4,r._recoverSession()];case 1:return e.sent(),[4,r._recoverAndRefresh()];case 2:return e.sent(),r.currentSession&&r.currentUser?!1!==r.currentUser.emailVerified?[3,4]:[4,r.checkEmailVerification(r.currentSession.idToken)]:[3,6];case 3:return e.sent(),[3,6];case 4:return[4,r.refreshUserData(r.currentSession.idToken)];case 5:e.sent(),e.label=6;case 6:return r.authenticationInitialized=!0,r._notifyAllSubscribers("INIT_SESSION_COMPLETE"),[2]}}))}));var s=(0,o.Z)({},m,t);s.url||(s.url=m.url),this.currentUser=null,this.currentSession=null,this.authenticationInitialized=!1,this.autoRefreshToken=s.autoRefreshToken,this.persistSession=s.persistSession,this.ttl=s.ttl,this.localStorage=s.localStorage||globalThis.localStorage,this.api=new p({url:s.url,apiURL:s.apiURL,headers:s.headers}),this.init()}var t,r,l,h=e.prototype;return h.signUp=function(e){var t=e.email,r=e.password,i=this;return(0,n.Z)((function(){var e,n,s;return(0,c.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),i._removeSession(),[4,i.api.signUpWithEmail(t,r)];case 1:if(e=a.sent(),n=e.data,s=e.error)throw s;if(!n||!n.uid)throw new Error("An error occurred on sign up.");return[2,i.signIn({email:t,password:r})];case 2:return[2,{user:null,session:null,error:a.sent()}];case 3:return[2]}}))}))()},h.signUpWithOverleaf=function(e){var t=e.email,r=e.overleafId,i=this;return(0,n.Z)((function(){var e,n,s;return(0,c.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),i._removeSession(),[4,i.api.signUpWithOverleaf(t,r)];case 1:if(e=a.sent(),n=e.data,s=e.error)throw s;if(!n||!n.uid)throw new Error("An error occurred on sign up.");return[2,i.signIn({email:t})];case 2:return[2,{user:null,session:null,error:a.sent()}];case 3:return[2]}}))}))()},h.signIn=function(e){var t=e.email,r=e.password,i=e.rememberMe,s=this;return(0,n.Z)((function(){return(0,c.__generator)(this,(function(e){try{if(s._removeSession(),void 0!==i&&(s.persistSession=i),t&&r)return[2,s._handleEmailSignIn(t,r)];throw new Error("You must provide an email and a password.")}catch(n){return[2,{user:null,session:null,error:n}]}return[2]}))}))()},h.signInWithOverleaf=function(e){var t=e.overleafId,r=e.key,i=this;return(0,n.Z)((function(){return(0,c.__generator)(this,(function(e){try{if(i._removeSession(),!t||!r)throw new Error("You must provide an overleafId and a key.");return i.persistSession=!0,[2,i._handleOverleafSignIn(t,r)]}catch(n){return[2,{user:null,session:null,error:n}]}return[2]}))}))()},h.user=function(){return this.currentUser},h.session=function(){return this.currentSession},h.refreshSession=function(){var e=this;return(0,n.Z)((function(){var t,r;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:if(n.trys.push([0,2,,3]),!(null===(t=e.currentSession)||void 0===t?void 0:t.idToken))throw new Error("Not logged in.");return[4,e._callRefreshToken()];case 1:if(r=n.sent().error)throw r;return[2,{data:e.currentSession,user:e.currentUser,error:null}];case 2:return[2,{data:null,user:null,error:n.sent()}];case 3:return[2]}}))}))()},h.setAuth=function(e){return this.currentSession=(0,u.Z)((0,o.Z)({},this.currentSession),{idToken:e,user:null}),this.currentSession},h.signOut=function(){var e=this;return(0,n.Z)((function(){return(0,c.__generator)(this,(function(t){return e._removeSession(),e._notifyAllSubscribers("SIGNED_OUT"),[2,{error:null}]}))}))()},h.resetPasswordForEmail=function(e){var t=this;return(0,n.Z)((function(){return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.api.resetPasswordForEmail(e)];case 1:return[2,r.sent().error]}}))}))()},h.resendVerificationEmail=function(e){var t=this;return(0,n.Z)((function(){return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.api.resendVerificationEmail(e)];case 1:return[2,r.sent().error]}}))}))()},h.checkEmailVerification=function(e){var t=this;return(0,n.Z)((function(){var r,n,i,s;return(0,c.__generator)(this,(function(a){switch(a.label){case 0:return[4,t.api.getUser(e)];case 1:return r=a.sent(),n=r.user,(i=r.error)?[2,{user:null,error:i}]:(n&&!0===n.emailVerified&&((s=(0,o.Z)({},t.currentSession)).emailVerified=!0,s.user=n,t._saveSession(s),t._notifyAllSubscribers("SIGNED_IN")),[2,{user:n,error:null}])}}))}))()},h.refreshUserData=function(e){var t=this;return(0,n.Z)((function(){var r,n,i,s,a,u,l;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return[4,t._recoverAndRefresh(!0)];case 1:return c.sent(),(i=null!==(n=null===(r=t.currentSession)||void 0===r?void 0:r.idToken)&&void 0!==n?n:e)?[4,t.api.getUser(i)]:[2,{data:null,user:null,error:Error("not IDToken found")}];case 2:return s=c.sent(),a=s.user,(u=s.error)?[2,{data:null,user:null,error:u}]:(a&&!0===a.emailVerified&&((l=(0,o.Z)({},t.currentSession)).emailVerified=!0,l.user=(0,o.Z)({},a),t._saveSession(l),t._notifyAllSubscribers("SIGNED_IN")),[2,{data:t.currentSession,user:a,error:null}])}}))}))()},h.setSession=function(e){this._saveSession(e),this._notifyAllSubscribers("SIGNED_IN")},h.onAuthStateChange=function(e){try{var t=(0,f.Vj)(),r=this,n={id:t,callback:e,unsubscribe:function(){r.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,n),{data:n,error:null}}catch(i){return{data:null,error:i}}},h.signInFromSession=function(e){var t=this;return(0,n.Z)((function(){return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return t.currentSession?[4,t.signOut()]:[3,2];case 1:r.sent(),r.label=2;case 2:return t._saveSession(e),[4,t.init()];case 3:return r.sent(),e?[2,{session:e,error:null}]:[2,{session:null,error:new Error("No session found.")}]}}))}))()},h._handleEmailSignIn=function(e,t){var r=this;return(0,n.Z)((function(){var n,i,s,a,o,u;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,4,,5]),[4,r.api.signInWithEmail(e,t)];case 1:if(n=c.sent(),i=n.data,(s=n.error)||!i)throw s;return(null===i||void 0===i?void 0:i.idToken)&&(null===i||void 0===i?void 0:i.refreshToken)?[4,r.api.getUser(i.idToken)]:[3,3];case 2:if(a=c.sent(),o=a.user,u=a.error)throw u;if(!(null===o||void 0===o?void 0:o.uid))throw new Error("An error occurred on sign in.");i.user=o,i.emailVerified=o.emailVerified,r._saveSession(i),i.emailVerified?r._notifyAllSubscribers("SIGNED_IN"):r._notifyAllSubscribers("WAITING_ACCOUNT_VERIFICATION"),c.label=3;case 3:return[2,{user:i.user,session:i,error:null}];case 4:return[2,{user:null,session:null,error:c.sent()}];case 5:return[2]}}))}))()},h._handleOverleafSignIn=function(e,t){var r=this;return(0,n.Z)((function(){var n,i,s,a,o,u;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,4,,5]),[4,r.api.signInWithOverleaf(e,t)];case 1:if(n=c.sent(),i=n.data,(s=n.error)||!i)throw s;return(null===i||void 0===i?void 0:i.idToken)&&(null===i||void 0===i?void 0:i.refreshToken)?[4,r.api.getUser(i.idToken)]:[3,3];case 2:if(a=c.sent(),o=a.user,u=a.error)throw u;if(!(null===o||void 0===o?void 0:o.uid))throw new Error("An error occurred on sign in.");o.emailVerified=!0,i.user=o,i.emailVerified=o.emailVerified,r._saveSession(i),r._notifyAllSubscribers("SIGNED_IN"),c.label=3;case 3:return[2,{user:i.user,session:i,error:null}];case 4:return[2,{user:null,session:null,error:c.sent()}];case 5:return[2]}}))}))()},h._recoverSessionWithExpiry=function(){var e=this;return(0,n.Z)((function(){var t,r,n;return(0,c.__generator)(this,(function(i){switch(i.label){case 0:return(r=(0,f.jU)()&&(null===(t=e.localStorage)||void 0===t?void 0:t.getItem(d.Uf)))&&"string"===typeof r?(n=JSON.parse(r)).ttl?(new Date).getTime()>n.ttl?[4,e._removeSession()]:[3,2]:[3,3]:[2,null];case 1:return i.sent(),[2,null];case 2:e.persistSession=!1,i.label=3;case 3:return[2,n]}}))}))()},h._recoverSession=function(){var e=this;return(0,n.Z)((function(){var t,r,n,i,s;return(0,c.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,e._recoverSessionWithExpiry()];case 1:return(t=a.sent())?(r=t.currentSession,n=t.expiresAt,i=Math.round(Date.now()/1e3),n>=i&&(null===r||void 0===r?void 0:r.user)&&(e._saveSession(r),t.emailVerified?e._notifyAllSubscribers("SIGNED_IN"):e._notifyAllSubscribers("WAITING_ACCOUNT_VERIFICATION")),[3,3]):[2];case 2:return s=a.sent(),console.error("error",s),[3,3];case 3:return[2]}}))}))()},h._recoverAndRefresh=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;return(0,n.Z)((function(){var r,n,i,s,a;return(0,c.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,9,,10]),[4,t._recoverSessionWithExpiry()];case 1:return(r=o.sent())?(n=r.currentSession,i=r.expiresAt,s=Math.round(Date.now()/1e3),i<s||e?t.autoRefreshToken&&n.refreshToken?(t.currentSession=n,t.currentUser=n.user,[4,t._callRefreshToken(n.refreshToken)]):[3,5]:[3,7]):[2];case 2:return o.sent().error?[4,t._removeSession()]:[3,4];case 3:o.sent(),o.label=4;case 4:return[3,6];case 5:t._removeSession(),o.label=6;case 6:return[3,8];case 7:n&&n.user||t._removeSession(),o.label=8;case 8:return[3,10];case 9:return a=o.sent(),console.error(a),[2,null];case 10:return[2]}}))}))()},h._callRefreshToken=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(a=this.currentSession)||void 0===a?void 0:a.refreshToken,t=this;return(0,n.Z)((function(){var r,n,i,s;return(0,c.__generator)(this,(function(a){switch(a.label){case 0:if(a.trys.push([0,2,,3]),!e)throw new Error("No current session.");return[4,t.api.refreshAccessToken(e)];case 1:if(r=a.sent(),n=r.data,i=r.error)throw i;if(!n)throw Error("Invalid session data.");return(s=(0,o.Z)({},t.currentSession)).idToken=n.idToken,s.refreshToken=n.refreshToken,s.expiresAt=n.expiresAt,t._saveSession(s),n.emailVerified?t._notifyAllSubscribers("SIGNED_IN"):t._notifyAllSubscribers("WAITING_ACCOUNT_VERIFICATION"),[2,{data:s,error:null}];case 2:return[2,{data:null,error:a.sent()}];case 3:return[2]}}))}))()},h._notifyAllSubscribers=function(e){var t=this;this.stateChangeEmitters.forEach((function(r){return r.callback(e,t.currentSession)}))},h._saveSession=function(e){if((0,f.jU)()){this.currentSession=e,this.currentUser=e.user;var t=e.expiresAt;if(t){var r=t-Math.round(Date.now()/1e3),n=r>300?r-300:1;this._startAutoRefreshToken(1e3*n),this._persistSession(this.currentSession,!0===this.persistSession)}}},h._persistSession=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={currentSession:e,expiresAt:e.expiresAt};if(!t){var n=new Date;r.ttl=n.getTime()+this.ttl}(0,f.jU)()&&this.localStorage.setItem(d.Uf,JSON.stringify(r))},h._removeSession=function(){var e=this;return(0,n.Z)((function(){return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return(0,f.jU)()?(e.currentSession=null,e.currentUser=null,e.refreshTokenTimer&&clearTimeout(e.refreshTokenTimer),(0,f.jU)()?[4,e.localStorage.removeItem(d.Uf)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))()},h._startAutoRefreshToken=function(e){var t=this;this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),e<=0||!this.autoRefreshToken||(this.refreshTokenTimer=setTimeout((function(){return t._callRefreshToken()}),e),"function"===typeof this.refreshTokenTimer.unref&&this.refreshTokenTimer.unref())},t=e,(r=[{key:"isAuthenticationInitialized",get:function(){return this.authenticationInitialized}}])&&s(t.prototype,r),l&&s(t,l),e}()},3611:function(e,t,r){"use strict";r.d(t,{$E:function(){return a},Gg:function(){return s},QN:function(){return o},Uf:function(){return u},tU:function(){return i},wk:function(){return n}});var n="https://metrics.writefull.ai",i="303db9d84ca860c936ae63c9f9948c29",s="https://auth.writefull.ai",a="https://api.writefull.ai",o={Accept:"application/json","Content-Type":"application/json"},u="writefull.auth"},7543:function(e,t,r){"use strict";r.d(t,{U2:function(){return f},v_:function(){return p}});var n=r(7568),i=r(6042),s=r(7582),a=function(e){if("string"!==typeof e||!e.length)return!1;try{return JSON.parse(e),!0}catch(t){return!1}},o=function(e){return e.data?e:e.msg||e.message||e.error_description||e.error||a(e)?JSON.stringify(e):e},u=function(e,t){if("function"!==typeof e.json)return t(e);if("object"===typeof e&&e.status)e.text().then((function(r){if(a(r)){var n=JSON.parse(r);return t({message:o(n),status:(null===e||void 0===e?void 0:e.status)||500})}return t({message:o(r),status:(null===e||void 0===e?void 0:e.status)||500})})).catch((function(r){return t({message:e,status:500})}));else{if(!a(e))return t({message:e,status:500});e.json().then((function(r){return t({message:o(r),status:(null===e||void 0===e?void 0:e.status)||500})})).catch((function(r){return t({message:e,status:500})}))}},c=function(e,t,r){var n={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{},signal:null===t||void 0===t?void 0:t.signal};return"GET"===e||(n.headers=(0,i.Z)({"Content-Type":"text/plain;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),n.body=(null===t||void 0===t?void 0:t.noStringify)?r:JSON.stringify(r)),n};function l(e,t,r,n){return d.apply(this,arguments)}function d(){return(d=(0,n.Z)((function(e,t,r,n){return(0,s.__generator)(this,(function(i){return[2,new Promise((function(i,s){fetch(t,c(e,r,n)).then((function(e){if(!e.ok)throw e;return(null===r||void 0===r?void 0:r.noResolveJson)?i:(null===r||void 0===r?void 0:r.resolveText)?e.text():e.json()})).then((function(e){i(e)})).catch((function(e){u(e,s)}))}))]}))}))).apply(this,arguments)}function f(e,t){return h.apply(this,arguments)}function h(){return(h=(0,n.Z)((function(e,t){return(0,s.__generator)(this,(function(r){return[2,l("GET",e,t)]}))}))).apply(this,arguments)}function p(e,t,r){return m.apply(this,arguments)}function m(){return(m=(0,n.Z)((function(e,t,r){return(0,s.__generator)(this,(function(n){return[2,l("POST",e,r,t)]}))}))).apply(this,arguments)}},7815:function(e,t,r){"use strict";function n(e){return Math.round(Date.now()/1e3)+e}function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}r.d(t,{Fq:function(){return n},Vj:function(){return i},jU:function(){return s}});var s=function(){return!0}},7507:function(e,t,r){"use strict";r.d(t,{x:function(){return f}});var n,i=r(7568),s=r(7582),a=r(3611),o=r(9223),u=r(7543),c=a.tU,l=null!==(n="https://metrics.writefull.ai")?n:a.wk,d=+new Date,f=function(){var e=(0,i.Z)((function(e,t,r,n){var i,a,f;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),a={deviceID:(0,o.E)(),sessionID:d,amplitudeKey:c,userID:null===n||void 0===n?void 0:n.uid,email:null===n||void 0===n?void 0:n.email,emailDomain:null===n||void 0===n||null===(i=n.email)||void 0===i?void 0:i.split("@")[1],eventType:e,eventProperties:t,userProperties:r},[4,(0,u.v_)(l,a,{headers:{"Content-Type":"application/json"},resolveText:!0})];case 1:return s.sent(),[3,3];case 2:return f=s.sent(),console.error(f),[3,3];case 3:return[2]}}))}));return function(t,r,n,i){return e.apply(this,arguments)}}()},5609:function(e){e.exports={root:"Button_root__G_l9X",loading:"Button_loading__4K_aO",slim:"Button_slim__WmpZF",disabled:"Button_disabled__Ksgjy"}},105:function(e){e.exports={link:"Footer_link__LpNu2"}},6732:function(e){e.exports={root:"LoadingDots_root__L3YhM",blink:"LoadingDots_blink__8sST9"}},7255:function(e){e.exports={root:"Navbar_root__JXKn9",link:"Navbar_link__IStfC",logo:"Navbar_logo__gEyoC"}},2584:function(e){e.exports={root:"Tag_root__qltUU"}},1442:function(){},6512:function(){},7663:function(e){!function(){var t={229:function(e){var t,r,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"===typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var o,u=[],c=!1,l=-1;function d(){c&&o&&(c=!1,o.length?u=o.concat(u):l=-1,u.length&&f())}function f(){if(!c){var e=a(d);c=!0;for(var t=u.length;t;){for(o=u,u=[];++l<t;)o&&o[l].run();l=-1,t=u.length}o=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new h(e,t)),1!==u.length||c||a(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var s=r[e]={exports:{}},a=!0;try{t[e](s,s.exports,n),a=!1}finally{a&&delete r[e]}return s.exports}n.ab="//";var i=n(229);e.exports=i}()},5152:function(e,t,r){e.exports=r(638)},9008:function(e,t,r){e.exports=r(5443)},5675:function(e,t,r){e.exports=r(8045)},1664:function(e,t,r){e.exports=r(8418)},1163:function(e,t,r){e.exports=r(387)},4298:function(e,t,r){e.exports=r(699)},3250:function(e,t,r){"use strict";var n=r(7294);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=n.useState,a=n.useEffect,o=n.useLayoutEffect,u=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!i(e,r)}catch(n){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=s({inst:{value:r,getSnapshot:t}}),i=n[0].inst,l=n[1];return o((function(){i.value=r,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,r,t]),a((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),u(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:l},1688:function(e,t,r){"use strict";e.exports=r(3250)},3967:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=a(e,s(r)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)n.call(e,r)&&e[r]&&(t=a(t,r));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},7568:function(e,t,r){"use strict";function n(e,t,r,n,i,s,a){try{var o=e[s](a),u=o.value}catch(c){return void r(c)}o.done?t(u):Promise.resolve(u).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,s){var a=e.apply(t,r);function o(e){n(a,i,s,o,u,"next",e)}function u(e){n(a,i,s,o,u,"throw",e)}o(void 0)}))}}r.d(t,{Z:function(){return i}})},4924:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Z:function(){return n}})},6042:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(4924);function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),i.forEach((function(t){(0,n.Z)(e,t,r[t])}))}return e}},9396:function(e,t,r){"use strict";function n(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}r.d(t,{Z:function(){return n}})},9534:function(e,t,r){"use strict";function n(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}r.d(t,{Z:function(){return n}})},603:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.d(t,{Z:function(){return i}})}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],(function(){return t(6840),t(387)}));var r=e.O();_N_E=r}]);